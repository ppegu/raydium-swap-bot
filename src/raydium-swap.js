import { createRequire as createImportMetaRequire } from "module"; 
import.meta.require ||= (id) => createImportMetaRequire(import.meta.url)(id);
var J1=Object.create;var{defineProperty:BW,getPrototypeOf:$1,getOwnPropertyNames:H1}=Object;var Q1=Object.prototype.hasOwnProperty;var E0=(J,$,H)=>{H=J!=null?J1($1(J)):{};const Q=$||!J||!J.__esModule?BW(H,"default",{value:J,enumerable:!0}):H;for(let W of H1(J))if(!Q1.call(Q,W))BW(Q,W,{get:()=>J[W],enumerable:!0});return Q};var t$=(J,$)=>()=>($||J(($={exports:{}}).exports,$),$.exports);var mH=(J)=>{return import.meta.require(J)};var pJ=t$((MW)=>{var MH=function(J){if(!(J instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")},w0=function(J){return MH(J),y8.Buffer.from(J.buffer,J.byteOffset,J.length)},I8=function(J,$){if($.property)return J+"["+$.property+"]";return J},W1=function(J,$){if(typeof J!=="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(J,"layout_"))throw new Error("Class is already bound to a layout");if(!($&&$ instanceof g0))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call($,"boundConstructor_"))throw new Error("layout is already bound to a constructor");J.layout_=$,$.boundConstructor_=J,$.makeDestinationObject=()=>new J,Object.defineProperty(J.prototype,"encode",{value(H,Q){return $.encode(this,H,Q)},writable:!0}),Object.defineProperty(J,"decode",{value(H,Q){return $.decode(H,Q)},writable:!0})},qQ=function(J){const $=Math.floor(J/f8),H=J-$*f8;return{hi32:$,lo32:H}},vQ=function(J,$){return J*f8+$},BH=function(J){if(0>J)J+=4294967296;return J};Object.defineProperty(MW,"__esModule",{value:!0});MW.s16=MW.s8=MW.nu64be=MW.u48be=MW.u40be=MW.u32be=MW.u24be=MW.u16be=MW.nu64=MW.u48=MW.u40=MW.u32=MW.u24=MW.u16=MW.u8=MW.offset=MW.greedy=MW.Constant=MW.UTF8=MW.CString=MW.Blob=MW.Boolean=MW.BitField=MW.BitStructure=MW.VariantLayout=MW.Union=MW.UnionLayoutDiscriminator=MW.UnionDiscriminator=MW.Structure=MW.Sequence=MW.DoubleBE=MW.Double=MW.FloatBE=MW.Float=MW.NearInt64BE=MW.NearInt64=MW.NearUInt64BE=MW.NearUInt64=MW.IntBE=MW.Int=MW.UIntBE=MW.UInt=MW.OffsetLayout=MW.GreedyCount=MW.ExternalLayout=MW.bindConstructorLayout=MW.nameWithProperty=MW.Layout=MW.uint8ArrayToBuffer=MW.checkUint8Array=void 0;MW.constant=MW.utf8=MW.cstr=MW.blob=MW.unionLayoutDiscriminator=MW.union=MW.seq=MW.bits=MW.struct=MW.f64be=MW.f64=MW.f32be=MW.f32=MW.ns64be=MW.s48be=MW.s40be=MW.s32be=MW.s24be=MW.s16be=MW.ns64=MW.s48=MW.s40=MW.s32=MW.s24=void 0;var y8=mH("buffer");MW.checkUint8Array=MH;MW.uint8ArrayToBuffer=w0;class g0{constructor(J,$){if(!Number.isInteger(J))throw new TypeError("span must be an integer");this.span=J,this.property=$}makeDestinationObject(){return{}}getSpan(J,$){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(J){const $=Object.create(this.constructor.prototype);return Object.assign($,this),$.property=J,$}fromArray(J){return}}MW.Layout=g0;MW.nameWithProperty=I8;MW.bindConstructorLayout=W1;class dJ extends g0{isCount(){throw new Error("ExternalLayout is abstract")}}MW.ExternalLayout=dJ;class m8 extends dJ{constructor(J=1,$){if(!Number.isInteger(J)||0>=J)throw new TypeError("elementSpan must be a (positive) integer");super(-1,$);this.elementSpan=J}isCount(){return!0}decode(J,$=0){MH(J);const H=J.length-$;return Math.floor(H/this.elementSpan)}encode(J,$,H){return 0}}MW.GreedyCount=m8;class DQ extends dJ{constructor(J,$=0,H){if(!(J instanceof g0))throw new TypeError("layout must be a Layout");if(!Number.isInteger($))throw new TypeError("offset must be integer or undefined");super(J.span,H||J.property);this.layout=J,this.offset=$}isCount(){return this.layout instanceof oJ||this.layout instanceof Z$}decode(J,$=0){return this.layout.decode(J,$+this.offset)}encode(J,$,H=0){return this.layout.encode(J,$,H+this.offset)}}MW.OffsetLayout=DQ;class oJ extends g0{constructor(J,$){super(J,$);if(6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(J,$=0){return w0(J).readUIntLE($,this.span)}encode(J,$,H=0){return w0($).writeUIntLE(J,H,this.span),this.span}}MW.UInt=oJ;class Z$ extends g0{constructor(J,$){super(J,$);if(6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(J,$=0){return w0(J).readUIntBE($,this.span)}encode(J,$,H=0){return w0($).writeUIntBE(J,H,this.span),this.span}}MW.UIntBE=Z$;class T$ extends g0{constructor(J,$){super(J,$);if(6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(J,$=0){return w0(J).readIntLE($,this.span)}encode(J,$,H=0){return w0($).writeIntLE(J,H,this.span),this.span}}MW.Int=T$;class o$ extends g0{constructor(J,$){super(J,$);if(6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(J,$=0){return w0(J).readIntBE($,this.span)}encode(J,$,H=0){return w0($).writeIntBE(J,H,this.span),this.span}}MW.IntBE=o$;var f8=Math.pow(2,32);class d8 extends g0{constructor(J){super(8,J)}decode(J,$=0){const H=w0(J),Q=H.readUInt32LE($),W=H.readUInt32LE($+4);return vQ(W,Q)}encode(J,$,H=0){const Q=qQ(J),W=w0($);return W.writeUInt32LE(Q.lo32,H),W.writeUInt32LE(Q.hi32,H+4),8}}MW.NearUInt64=d8;class p8 extends g0{constructor(J){super(8,J)}decode(J,$=0){const H=w0(J),Q=H.readUInt32BE($),W=H.readUInt32BE($+4);return vQ(Q,W)}encode(J,$,H=0){const Q=qQ(J),W=w0($);return W.writeUInt32BE(Q.hi32,H),W.writeUInt32BE(Q.lo32,H+4),8}}MW.NearUInt64BE=p8;class l8 extends g0{constructor(J){super(8,J)}decode(J,$=0){const H=w0(J),Q=H.readUInt32LE($),W=H.readInt32LE($+4);return vQ(W,Q)}encode(J,$,H=0){const Q=qQ(J),W=w0($);return W.writeUInt32LE(Q.lo32,H),W.writeInt32LE(Q.hi32,H+4),8}}MW.NearInt64=l8;class u8 extends g0{constructor(J){super(8,J)}decode(J,$=0){const H=w0(J),Q=H.readInt32BE($),W=H.readUInt32BE($+4);return vQ(Q,W)}encode(J,$,H=0){const Q=qQ(J),W=w0($);return W.writeInt32BE(Q.hi32,H),W.writeUInt32BE(Q.lo32,H+4),8}}MW.NearInt64BE=u8;class c8 extends g0{constructor(J){super(4,J)}decode(J,$=0){return w0(J).readFloatLE($)}encode(J,$,H=0){return w0($).writeFloatLE(J,H),4}}MW.Float=c8;class s8 extends g0{constructor(J){super(4,J)}decode(J,$=0){return w0(J).readFloatBE($)}encode(J,$,H=0){return w0($).writeFloatBE(J,H),4}}MW.FloatBE=s8;class a8 extends g0{constructor(J){super(8,J)}decode(J,$=0){return w0(J).readDoubleLE($)}encode(J,$,H=0){return w0($).writeDoubleLE(J,H),8}}MW.Double=a8;class i8 extends g0{constructor(J){super(8,J)}decode(J,$=0){return w0(J).readDoubleBE($)}encode(J,$,H=0){return w0($).writeDoubleBE(J,H),8}}MW.DoubleBE=i8;class r8 extends g0{constructor(J,$,H){if(!(J instanceof g0))throw new TypeError("elementLayout must be a Layout");if(!($ instanceof dJ&&$.isCount()||Number.isInteger($)&&0<=$))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let Q=-1;if(!($ instanceof dJ)&&0<J.span)Q=$*J.span;super(Q,H);this.elementLayout=J,this.count=$}getSpan(J,$=0){if(0<=this.span)return this.span;let H=0,Q=this.count;if(Q instanceof dJ)Q=Q.decode(J,$);if(0<this.elementLayout.span)H=Q*this.elementLayout.span;else{let W=0;while(W<Q)H+=this.elementLayout.getSpan(J,$+H),++W}return H}decode(J,$=0){const H=[];let Q=0,W=this.count;if(W instanceof dJ)W=W.decode(J,$);while(Q<W)H.push(this.elementLayout.decode(J,$)),$+=this.elementLayout.getSpan(J,$),Q+=1;return H}encode(J,$,H=0){const Q=this.elementLayout,W=J.reduce((Z,Y)=>{return Z+Q.encode(Y,$,H+Z)},0);if(this.count instanceof dJ)this.count.encode(J.length,$,H);return W}}MW.Sequence=r8;class n8 extends g0{constructor(J,$,H){if(!(Array.isArray(J)&&J.reduce((W,Z)=>W&&Z instanceof g0,!0)))throw new TypeError("fields must be array of Layout instances");if(typeof $==="boolean"&&H===void 0)H=$,$=void 0;for(let W of J)if(0>W.span&&W.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let Q=-1;try{Q=J.reduce((W,Z)=>W+Z.getSpan(),0)}catch(W){}super(Q,$);this.fields=J,this.decodePrefixes=!!H}getSpan(J,$=0){if(0<=this.span)return this.span;let H=0;try{H=this.fields.reduce((Q,W)=>{const Z=W.getSpan(J,$);return $+=Z,Q+Z},0)}catch(Q){throw new RangeError("indeterminate span")}return H}decode(J,$=0){MH(J);const H=this.makeDestinationObject();for(let Q of this.fields){if(Q.property!==void 0)H[Q.property]=Q.decode(J,$);if($+=Q.getSpan(J,$),this.decodePrefixes&&J.length===$)break}return H}encode(J,$,H=0){const Q=H;let W=0,Z=0;for(let Y of this.fields){let z=Y.span;if(Z=0<z?z:0,Y.property!==void 0){const j=J[Y.property];if(j!==void 0){if(Z=Y.encode(j,$,H),0>z)z=Y.getSpan($,H)}}W=H,H+=z}return W+Z-Q}fromArray(J){const $=this.makeDestinationObject();for(let H of this.fields)if(H.property!==void 0&&0<J.length)$[H.property]=J.shift();return $}layoutFor(J){if(typeof J!=="string")throw new TypeError("property must be string");for(let $ of this.fields)if($.property===J)return $;return}offsetOf(J){if(typeof J!=="string")throw new TypeError("property must be string");let $=0;for(let H of this.fields){if(H.property===J)return $;if(0>H.span)$=-1;else if(0<=$)$+=H.span}return}}MW.Structure=n8;class CQ{constructor(J){this.property=J}decode(J,$){throw new Error("UnionDiscriminator is abstract")}encode(J,$,H){throw new Error("UnionDiscriminator is abstract")}}MW.UnionDiscriminator=CQ;class pH extends CQ{constructor(J,$){if(!(J instanceof dJ&&J.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super($||J.property||"variant");this.layout=J}decode(J,$){return this.layout.decode(J,$)}encode(J,$,H){return this.layout.encode(J,$,H)}}MW.UnionLayoutDiscriminator=pH;class RQ extends g0{constructor(J,$,H){let Q;if(J instanceof oJ||J instanceof Z$)Q=new pH(new DQ(J));else if(J instanceof dJ&&J.isCount())Q=new pH(J);else if(!(J instanceof CQ))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");else Q=J;if($===void 0)$=null;if(!($===null||$ instanceof g0))throw new TypeError("defaultLayout must be null or a Layout");if($!==null){if(0>$.span)throw new Error("defaultLayout must have constant span");if($.property===void 0)$=$.replicate("content")}let W=-1;if($){if(W=$.span,0<=W&&(J instanceof oJ||J instanceof Z$))W+=Q.layout.span}super(W,H);this.discriminator=Q,this.usesPrefixDiscriminator=J instanceof oJ||J instanceof Z$,this.defaultLayout=$,this.registry={};let Z=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(Y){return Z(Y)},this.configGetSourceVariant=function(Y){Z=Y.bind(this)}}getSpan(J,$=0){if(0<=this.span)return this.span;const H=this.getVariant(J,$);if(!H)throw new Error("unable to determine span for unrecognized variant");return H.getSpan(J,$)}defaultGetSourceVariant(J){if(Object.prototype.hasOwnProperty.call(J,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(J,this.defaultLayout.property))return;const $=this.registry[J[this.discriminator.property]];if($&&(!$.layout||$.property&&Object.prototype.hasOwnProperty.call(J,$.property)))return $}else for(let $ in this.registry){const H=this.registry[$];if(H.property&&Object.prototype.hasOwnProperty.call(J,H.property))return H}throw new Error("unable to infer src variant")}decode(J,$=0){let H;const Q=this.discriminator,W=Q.decode(J,$),Z=this.registry[W];if(Z===void 0){const Y=this.defaultLayout;let z=0;if(this.usesPrefixDiscriminator)z=Q.layout.span;H=this.makeDestinationObject(),H[Q.property]=W,H[Y.property]=Y.decode(J,$+z)}else H=Z.decode(J,$);return H}encode(J,$,H=0){const Q=this.getSourceVariant(J);if(Q===void 0){const W=this.discriminator,Z=this.defaultLayout;let Y=0;if(this.usesPrefixDiscriminator)Y=W.layout.span;return W.encode(J[W.property],$,H),Y+Z.encode(J[Z.property],$,H+Y)}return Q.encode(J,$,H)}addVariant(J,$,H){const Q=new e8(this,J,$,H);return this.registry[J]=Q,Q}getVariant(J,$=0){let H;if(J instanceof Uint8Array)H=this.discriminator.decode(J,$);else H=J;return this.registry[H]}}MW.Union=RQ;class e8 extends g0{constructor(J,$,H,Q){if(!(J instanceof RQ))throw new TypeError("union must be a Union");if(!Number.isInteger($)||0>$)throw new TypeError("variant must be a (non-negative) integer");if(typeof H==="string"&&Q===void 0)Q=H,H=null;if(H){if(!(H instanceof g0))throw new TypeError("layout must be a Layout");if(J.defaultLayout!==null&&0<=H.span&&H.span>J.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof Q!=="string")throw new TypeError("variant must have a String property")}let W=J.span;if(0>J.span){if(W=H?H.span:0,0<=W&&J.usesPrefixDiscriminator)W+=J.discriminator.layout.span}super(W,Q);this.union=J,this.variant=$,this.layout=H||null}getSpan(J,$=0){if(0<=this.span)return this.span;let H=0;if(this.union.usesPrefixDiscriminator)H=this.union.discriminator.layout.span;let Q=0;if(this.layout)Q=this.layout.getSpan(J,$+H);return H+Q}decode(J,$=0){const H=this.makeDestinationObject();if(this!==this.union.getVariant(J,$))throw new Error("variant mismatch");let Q=0;if(this.union.usesPrefixDiscriminator)Q=this.union.discriminator.layout.span;if(this.layout)H[this.property]=this.layout.decode(J,$+Q);else if(this.property)H[this.property]=!0;else if(this.union.usesPrefixDiscriminator)H[this.union.discriminator.property]=this.variant;return H}encode(J,$,H=0){let Q=0;if(this.union.usesPrefixDiscriminator)Q=this.union.discriminator.layout.span;if(this.layout&&!Object.prototype.hasOwnProperty.call(J,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,$,H);let W=Q;if(this.layout){if(this.layout.encode(J[this.property],$,H+Q),W+=this.layout.getSpan($,H+Q),0<=this.union.span&&W>this.union.span)throw new Error("encoded variant overruns containing union")}return W}fromArray(J){if(this.layout)return this.layout.fromArray(J);return}}MW.VariantLayout=e8;class BQ extends g0{constructor(J,$,H){if(!(J instanceof oJ||J instanceof Z$))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof $==="string"&&H===void 0)H=$,$=!1;if(4<J.span)throw new RangeError("word cannot exceed 32 bits");super(J.span,H);this.word=J,this.msb=!!$,this.fields=[];let Q=0;this._packedSetValue=function(W){return Q=BH(W),this},this._packedGetValue=function(){return Q}}decode(J,$=0){const H=this.makeDestinationObject(),Q=this.word.decode(J,$);this._packedSetValue(Q);for(let W of this.fields)if(W.property!==void 0)H[W.property]=W.decode(J);return H}encode(J,$,H=0){const Q=this.word.decode($,H);this._packedSetValue(Q);for(let W of this.fields)if(W.property!==void 0){const Z=J[W.property];if(Z!==void 0)W.encode(Z)}return this.word.encode(this._packedGetValue(),$,H)}addField(J,$){const H=new MQ(this,J,$);return this.fields.push(H),H}addBoolean(J){const $=new t8(this,J);return this.fields.push($),$}fieldFor(J){if(typeof J!=="string")throw new TypeError("property must be string");for(let $ of this.fields)if($.property===J)return $;return}}MW.BitStructure=BQ;class MQ{constructor(J,$,H){if(!(J instanceof BQ))throw new TypeError("container must be a BitStructure");if(!Number.isInteger($)||0>=$)throw new TypeError("bits must be positive integer");const Q=8*J.span,W=J.fields.reduce((Z,Y)=>Z+Y.bits,0);if($+W>Q)throw new Error("bits too long for span remainder ("+(Q-W)+" of "+Q+" remain)");if(this.container=J,this.bits=$,this.valueMask=(1<<$)-1,$===32)this.valueMask=4294967295;if(this.start=W,this.container.msb)this.start=Q-W-$;this.wordMask=BH(this.valueMask<<this.start),this.property=H}decode(J,$){const H=this.container._packedGetValue();return BH(H&this.wordMask)>>>this.start}encode(J){if(typeof J!=="number"||!Number.isInteger(J)||J!==BH(J&this.valueMask))throw new TypeError(I8("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const $=this.container._packedGetValue(),H=BH(J<<this.start);this.container._packedSetValue(BH($&~this.wordMask)|H)}}MW.BitField=MQ;class t8 extends MQ{constructor(J,$){super(J,1,$)}decode(J,$){return!!super.decode(J,$)}encode(J){if(typeof J==="boolean")J=+J;super.encode(J)}}MW.Boolean=t8;class o8 extends g0{constructor(J,$){if(!(J instanceof dJ&&J.isCount()||Number.isInteger(J)&&0<=J))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let H=-1;if(!(J instanceof dJ))H=J;super(H,$);this.length=J}getSpan(J,$){let H=this.span;if(0>H)H=this.length.decode(J,$);return H}decode(J,$=0){let H=this.span;if(0>H)H=this.length.decode(J,$);return w0(J).slice($,$+H)}encode(J,$,H){let Q=this.length;if(this.length instanceof dJ)Q=J.length;if(!(J instanceof Uint8Array&&Q===J.length))throw new TypeError(I8("Blob.encode",this)+" requires (length "+Q+") Uint8Array as src");if(H+Q>$.length)throw new RangeError("encoding overruns Uint8Array");const W=w0(J);if(w0($).write(W.toString("hex"),H,Q,"hex"),this.length instanceof dJ)this.length.encode(Q,$,H);return Q}}MW.Blob=o8;class J6 extends g0{constructor(J){super(-1,J)}getSpan(J,$=0){MH(J);let H=$;while(H<J.length&&J[H]!==0)H+=1;return 1+H-$}decode(J,$=0){const H=this.getSpan(J,$);return w0(J).slice($,$+H-1).toString("utf-8")}encode(J,$,H=0){if(typeof J!=="string")J=String(J);const Q=y8.Buffer.from(J,"utf8"),W=Q.length;if(H+W>$.length)throw new RangeError("encoding overruns Buffer");const Z=w0($);return Q.copy(Z,H),Z[H+W]=0,W+1}}MW.CString=J6;class $6 extends g0{constructor(J,$){if(typeof J==="string"&&$===void 0)$=J,J=void 0;if(J===void 0)J=-1;else if(!Number.isInteger(J))throw new TypeError("maxSpan must be an integer");super(-1,$);this.maxSpan=J}getSpan(J,$=0){return MH(J),J.length-$}decode(J,$=0){const H=this.getSpan(J,$);if(0<=this.maxSpan&&this.maxSpan<H)throw new RangeError("text length exceeds maxSpan");return w0(J).slice($,$+H).toString("utf-8")}encode(J,$,H=0){if(typeof J!=="string")J=String(J);const Q=y8.Buffer.from(J,"utf8"),W=Q.length;if(0<=this.maxSpan&&this.maxSpan<W)throw new RangeError("text length exceeds maxSpan");if(H+W>$.length)throw new RangeError("encoding overruns Buffer");return Q.copy(w0($),H),W}}MW.UTF8=$6;class H6 extends g0{constructor(J,$){super(0,$);this.value=J}decode(J,$){return this.value}encode(J,$,H){return 0}}MW.Constant=H6;MW.greedy=(J,$)=>new m8(J,$);MW.offset=(J,$,H)=>new DQ(J,$,H);MW.u8=(J)=>new oJ(1,J);MW.u16=(J)=>new oJ(2,J);MW.u24=(J)=>new oJ(3,J);MW.u32=(J)=>new oJ(4,J);MW.u40=(J)=>new oJ(5,J);MW.u48=(J)=>new oJ(6,J);MW.nu64=(J)=>new d8(J);MW.u16be=(J)=>new Z$(2,J);MW.u24be=(J)=>new Z$(3,J);MW.u32be=(J)=>new Z$(4,J);MW.u40be=(J)=>new Z$(5,J);MW.u48be=(J)=>new Z$(6,J);MW.nu64be=(J)=>new p8(J);MW.s8=(J)=>new T$(1,J);MW.s16=(J)=>new T$(2,J);MW.s24=(J)=>new T$(3,J);MW.s32=(J)=>new T$(4,J);MW.s40=(J)=>new T$(5,J);MW.s48=(J)=>new T$(6,J);MW.ns64=(J)=>new l8(J);MW.s16be=(J)=>new o$(2,J);MW.s24be=(J)=>new o$(3,J);MW.s32be=(J)=>new o$(4,J);MW.s40be=(J)=>new o$(5,J);MW.s48be=(J)=>new o$(6,J);MW.ns64be=(J)=>new u8(J);MW.f32=(J)=>new c8(J);MW.f32be=(J)=>new s8(J);MW.f64=(J)=>new a8(J);MW.f64be=(J)=>new i8(J);MW.struct=(J,$,H)=>new n8(J,$,H);MW.bits=(J,$,H)=>new BQ(J,$,H);MW.seq=(J,$,H)=>new r8(J,$,H);MW.union=(J,$,H)=>new RQ(J,$,H);MW.unionLayoutDiscriminator=(J,$)=>new pH(J,$);MW.blob=(J,$)=>new o8(J,$);MW.cstr=(J)=>new J6(J);MW.utf8=(J,$)=>new $6(J,$);MW.constant=(J,$)=>new H6(J,$)});var hW=t$((yj,KW)=>{var K4=function(J){if(typeof J!="string"||J.length<=7||J.substring(0,7)!="file://")throw new TypeError("must pass in a file:// URI to convert to a file path");var $=decodeURI(J.substring(7)),H=$.indexOf("/"),Q=$.substring(0,H),W=$.substring(H+1);if(Q=="localhost")Q="";if(Q)Q=OQ+OQ+Q;if(W=W.replace(/^(.+)\|/,"$1:"),OQ=="\\")W=W.replace(/\//g,"\\");if(/^.+\:/.test(W));else W=OQ+W;return Q+W},OQ=mH("path").sep||"/";KW.exports=K4});var bW=t$((hQ,wW)=>{var S4=function(J){if(typeof J=="string")J={bindings:J};else if(!J)J={};if(Object.keys(SW).map(function(j){if(!(j in J))J[j]=SW[j]}),!J.module_root)J.module_root=hQ.getRoot(hQ.getFileName());if(KQ.extname(J.bindings)!=".node")J.bindings+=".node";var $=typeof __webpack_require__==="function"?__non_webpack_require__:require,H=[],Q=0,W=J.try.length,Z,Y,z;for(;Q<W;Q++){Z=LQ.apply(null,J.try[Q].map(function(j){return J[j]||j})),H.push(Z);try{if(Y=J.path?$.resolve(Z):$(Z),!J.path)Y.path=Z;return Y}catch(j){if(j.code!=="MODULE_NOT_FOUND"&&j.code!=="QUALIFIED_PATH_RESOLUTION_FAILED"&&!/not find/i.test(j.message))throw j}}throw z=new Error("Could not locate the bindings file. Tried:\n"+H.map(function(j){return J.arrow+j}).join("\n")),z.tries=H,z},__filename="/Users/ppegu/Projects/salona/node_modules/bindings/bindings.js",Q6=mH("fs"),KQ=mH("path"),h4=hW(),LQ=KQ.join,E4=KQ.dirname,EW=Q6.accessSync&&function(J){try{Q6.accessSync(J)}catch($){return!1}return!0}||Q6.existsSync||KQ.existsSync,SW={arrow:process.env.NODE_BINDINGS_ARROW||" \u2192 ",compiled:process.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process.platform,arch:process.arch,nodePreGyp:"node-v"+process.versions.modules+"-"+process.platform+"-"+process.arch,version:process.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","addon-build","release","install-root","bindings"],["module_root","addon-build","debug","install-root","bindings"],["module_root","addon-build","default","install-root","bindings"],["module_root","lib","binding","nodePreGyp","bindings"]]};wW.exports=hQ=S4;hQ.getFileName=function J($){var{prepareStackTrace:H,stackTraceLimit:Q}=Error,W={},Z;Error.stackTraceLimit=10,Error.prepareStackTrace=function(z,j){for(var V=0,U=j.length;V<U;V++)if(Z=j[V].getFileName(),Z!==__filename)if($){if(Z!==$)return}else return},Error.captureStackTrace(W),W.stack,Error.prepareStackTrace=H,Error.stackTraceLimit=Q;var Y="file://";if(Z.indexOf(Y)===0)Z=h4(Z);return Z};hQ.getRoot=function J($){var H=E4($),Q;while(!0){if(H===".")H=process.cwd();if(EW(LQ(H,"package.json"))||EW(LQ(H,"node_modules")))return H;if(Q===H)throw new Error('Could not find module root given file: "'+$+'". Do you have a `package.json` file? ');Q=H,H=LQ(H,"..")}}});var PW=t$((_W)=>{var w4=function(J){if(w$===void 0){const $=Buffer.from(J);$.reverse();const H=$.toString("hex");if(H.length===0)return BigInt(0);return BigInt(`0x${H}`)}return w$.toBigInt(J,!1)},b4=function(J){if(w$===void 0){const $=J.toString("hex");if($.length===0)return BigInt(0);return BigInt(`0x${$}`)}return w$.toBigInt(J,!0)},_4=function(J,$){if(w$===void 0){const H=J.toString(16),Q=Buffer.from(H.padStart($*2,"0").slice(0,$*2),"hex");return Q.reverse(),Q}return w$.fromBigInt(J,Buffer.allocUnsafe($),!1)},P4=function(J,$){if(w$===void 0){const H=J.toString(16);return Buffer.from(H.padStart($*2,"0").slice(0,$*2),"hex")}return w$.fromBigInt(J,Buffer.allocUnsafe($),!0)};Object.defineProperty(_W,"__esModule",{value:!0});var w$;try{w$=bW()("bigint_buffer")}catch(J){console.warn("bigint: Failed to load bindings, pure JS will be used (try npm run rebuild?)")}_W.toBigIntLE=w4;_W.toBigIntBE=b4;_W.toBufferLE=_4;_W.toBufferBE=P4});var EJ=t$((zZ,U6)=>{(function(J,$){function H(_,G){if(!_)throw new Error(G||"Assertion failed")}function Q(_,G){_.super_=G;var v=function(){};v.prototype=G.prototype,_.prototype=new v,_.prototype.constructor=_}function W(_,G,v){if(W.isBN(_))return _;if(this.negative=0,this.words=null,this.length=0,this.red=null,_!==null){if(G==="le"||G==="be")v=G,G=10;this._init(_||0,G||10,v||"be")}}if(typeof J==="object")J.exports=W;else $.BN=W;W.BN=W,W.wordSize=26;var Z;try{if(typeof window!=="undefined"&&typeof window.Buffer!=="undefined")Z=window.Buffer;else Z=mH("buffer").Buffer}catch(_){}W.isBN=function _(G){if(G instanceof W)return!0;return G!==null&&typeof G==="object"&&G.constructor.wordSize===W.wordSize&&Array.isArray(G.words)},W.max=function _(G,v){if(G.cmp(v)>0)return G;return v},W.min=function _(G,v){if(G.cmp(v)<0)return G;return v},W.prototype._init=function _(G,v,X){if(typeof G==="number")return this._initNumber(G,v,X);if(typeof G==="object")return this._initArray(G,v,X);if(v==="hex")v=16;H(v===(v|0)&&v>=2&&v<=36),G=G.toString().replace(/\s+/g,"");var D=0;if(G[0]==="-")D++,this.negative=1;if(D<G.length){if(v===16)this._parseHex(G,D,X);else if(this._parseBase(G,v,D),X==="le")this._initArray(this.toArray(),v,X)}},W.prototype._initNumber=function _(G,v,X){if(G<0)this.negative=1,G=-G;if(G<67108864)this.words=[G&67108863],this.length=1;else if(G<4503599627370496)this.words=[G&67108863,G/67108864&67108863],this.length=2;else H(G<9007199254740992),this.words=[G&67108863,G/67108864&67108863,1],this.length=3;if(X!=="le")return;this._initArray(this.toArray(),v,X)},W.prototype._initArray=function _(G,v,X){if(H(typeof G.length==="number"),G.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(G.length/3),this.words=new Array(this.length);for(var D=0;D<this.length;D++)this.words[D]=0;var M,L,S=0;if(X==="be"){for(D=G.length-1,M=0;D>=0;D-=3)if(L=G[D]|G[D-1]<<8|G[D-2]<<16,this.words[M]|=L<<S&67108863,this.words[M+1]=L>>>26-S&67108863,S+=24,S>=26)S-=26,M++}else if(X==="le"){for(D=0,M=0;D<G.length;D+=3)if(L=G[D]|G[D+1]<<8|G[D+2]<<16,this.words[M]|=L<<S&67108863,this.words[M+1]=L>>>26-S&67108863,S+=24,S>=26)S-=26,M++}return this._strip()};function Y(_,G){var v=_.charCodeAt(G);if(v>=48&&v<=57)return v-48;else if(v>=65&&v<=70)return v-55;else if(v>=97&&v<=102)return v-87;else H(!1,"Invalid character in "+_)}function z(_,G,v){var X=Y(_,v);if(v-1>=G)X|=Y(_,v-1)<<4;return X}W.prototype._parseHex=function _(G,v,X){this.length=Math.ceil((G.length-v)/6),this.words=new Array(this.length);for(var D=0;D<this.length;D++)this.words[D]=0;var M=0,L=0,S;if(X==="be")for(D=G.length-1;D>=v;D-=2)if(S=z(G,v,D)<<M,this.words[L]|=S&67108863,M>=18)M-=18,L+=1,this.words[L]|=S>>>26;else M+=8;else{var R=G.length-v;for(D=R%2===0?v+1:v;D<G.length;D+=2)if(S=z(G,v,D)<<M,this.words[L]|=S&67108863,M>=18)M-=18,L+=1,this.words[L]|=S>>>26;else M+=8}this._strip()};function j(_,G,v,X){var D=0,M=0,L=Math.min(_.length,v);for(var S=G;S<L;S++){var R=_.charCodeAt(S)-48;if(D*=X,R>=49)M=R-49+10;else if(R>=17)M=R-17+10;else M=R;H(R>=0&&M<X,"Invalid character"),D+=M}return D}W.prototype._parseBase=function _(G,v,X){this.words=[0],this.length=1;for(var D=0,M=1;M<=67108863;M*=v)D++;D--,M=M/v|0;var L=G.length-X,S=L%D,R=Math.min(L,L-S)+X,F=0;for(var E=X;E<R;E+=D)if(F=j(G,E,E+D,v),this.imuln(M),this.words[0]+F<67108864)this.words[0]+=F;else this._iaddn(F);if(S!==0){var f=1;F=j(G,E,G.length,v);for(E=0;E<S;E++)f*=v;if(this.imuln(f),this.words[0]+F<67108864)this.words[0]+=F;else this._iaddn(F)}this._strip()},W.prototype.copy=function _(G){G.words=new Array(this.length);for(var v=0;v<this.length;v++)G.words[v]=this.words[v];G.length=this.length,G.negative=this.negative,G.red=this.red};function V(_,G){_.words=G.words,_.length=G.length,_.negative=G.negative,_.red=G.red}if(W.prototype._move=function _(G){V(G,this)},W.prototype.clone=function _(){var G=new W(null);return this.copy(G),G},W.prototype._expand=function _(G){while(this.length<G)this.words[this.length++]=0;return this},W.prototype._strip=function _(){while(this.length>1&&this.words[this.length-1]===0)this.length--;return this._normSign()},W.prototype._normSign=function _(){if(this.length===1&&this.words[0]===0)this.negative=0;return this},typeof Symbol!=="undefined"&&typeof Symbol.for==="function")try{W.prototype[Symbol.for("nodejs.util.inspect.custom")]=U}catch(_){W.prototype.inspect=U}else W.prototype.inspect=U;function U(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var C=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],q=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],K=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64000000,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,24300000,28629151,33554432,39135393,45435424,52521875,60466176];if(W.prototype.toString=function _(G,v){G=G||10,v=v|0||1;var X;if(G===16||G==="hex"){X="";var D=0,M=0;for(var L=0;L<this.length;L++){var S=this.words[L],R=((S<<D|M)&16777215).toString(16);if(M=S>>>24-D&16777215,D+=2,D>=26)D-=26,L--;if(M!==0||L!==this.length-1)X=C[6-R.length]+R+X;else X=R+X}if(M!==0)X=M.toString(16)+X;while(X.length%v!==0)X="0"+X;if(this.negative!==0)X="-"+X;return X}if(G===(G|0)&&G>=2&&G<=36){var F=q[G],E=K[G];X="";var f=this.clone();f.negative=0;while(!f.isZero()){var l=f.modrn(E).toString(G);if(f=f.idivn(E),!f.isZero())X=C[F-l.length]+l+X;else X=l+X}if(this.isZero())X="0"+X;while(X.length%v!==0)X="0"+X;if(this.negative!==0)X="-"+X;return X}H(!1,"Base should be between 2 and 36")},W.prototype.toNumber=function _(){var G=this.words[0];if(this.length===2)G+=this.words[1]*67108864;else if(this.length===3&&this.words[2]===1)G+=4503599627370496+this.words[1]*67108864;else if(this.length>2)H(!1,"Number can only safely store up to 53 bits");return this.negative!==0?-G:G},W.prototype.toJSON=function _(){return this.toString(16,2)},Z)W.prototype.toBuffer=function _(G,v){return this.toArrayLike(Z,G,v)};W.prototype.toArray=function _(G,v){return this.toArrayLike(Array,G,v)};var w=function _(G,v){if(G.allocUnsafe)return G.allocUnsafe(v);return new G(v)};if(W.prototype.toArrayLike=function _(G,v,X){this._strip();var D=this.byteLength(),M=X||Math.max(1,D);H(D<=M,"byte array longer than desired length"),H(M>0,"Requested array length <= 0");var L=w(G,M),S=v==="le"?"LE":"BE";return this["_toArrayLike"+S](L,D),L},W.prototype._toArrayLikeLE=function _(G,v){var X=0,D=0;for(var M=0,L=0;M<this.length;M++){var S=this.words[M]<<L|D;if(G[X++]=S&255,X<G.length)G[X++]=S>>8&255;if(X<G.length)G[X++]=S>>16&255;if(L===6){if(X<G.length)G[X++]=S>>24&255;D=0,L=0}else D=S>>>24,L+=2}if(X<G.length){G[X++]=D;while(X<G.length)G[X++]=0}},W.prototype._toArrayLikeBE=function _(G,v){var X=G.length-1,D=0;for(var M=0,L=0;M<this.length;M++){var S=this.words[M]<<L|D;if(G[X--]=S&255,X>=0)G[X--]=S>>8&255;if(X>=0)G[X--]=S>>16&255;if(L===6){if(X>=0)G[X--]=S>>24&255;D=0,L=0}else D=S>>>24,L+=2}if(X>=0){G[X--]=D;while(X>=0)G[X--]=0}},Math.clz32)W.prototype._countBits=function _(G){return 32-Math.clz32(G)};else W.prototype._countBits=function _(G){var v=G,X=0;if(v>=4096)X+=13,v>>>=13;if(v>=64)X+=7,v>>>=7;if(v>=8)X+=4,v>>>=4;if(v>=2)X+=2,v>>>=2;return X+v};W.prototype._zeroBits=function _(G){if(G===0)return 26;var v=G,X=0;if((v&8191)===0)X+=13,v>>>=13;if((v&127)===0)X+=7,v>>>=7;if((v&15)===0)X+=4,v>>>=4;if((v&3)===0)X+=2,v>>>=2;if((v&1)===0)X++;return X},W.prototype.bitLength=function _(){var G=this.words[this.length-1],v=this._countBits(G);return(this.length-1)*26+v};function O(_){var G=new Array(_.bitLength());for(var v=0;v<G.length;v++){var X=v/26|0,D=v%26;G[v]=_.words[X]>>>D&1}return G}W.prototype.zeroBits=function _(){if(this.isZero())return 0;var G=0;for(var v=0;v<this.length;v++){var X=this._zeroBits(this.words[v]);if(G+=X,X!==26)break}return G},W.prototype.byteLength=function _(){return Math.ceil(this.bitLength()/8)},W.prototype.toTwos=function _(G){if(this.negative!==0)return this.abs().inotn(G).iaddn(1);return this.clone()},W.prototype.fromTwos=function _(G){if(this.testn(G-1))return this.notn(G).iaddn(1).ineg();return this.clone()},W.prototype.isNeg=function _(){return this.negative!==0},W.prototype.neg=function _(){return this.clone().ineg()},W.prototype.ineg=function _(){if(!this.isZero())this.negative^=1;return this},W.prototype.iuor=function _(G){while(this.length<G.length)this.words[this.length++]=0;for(var v=0;v<G.length;v++)this.words[v]=this.words[v]|G.words[v];return this._strip()},W.prototype.ior=function _(G){return H((this.negative|G.negative)===0),this.iuor(G)},W.prototype.or=function _(G){if(this.length>G.length)return this.clone().ior(G);return G.clone().ior(this)},W.prototype.uor=function _(G){if(this.length>G.length)return this.clone().iuor(G);return G.clone().iuor(this)},W.prototype.iuand=function _(G){var v;if(this.length>G.length)v=G;else v=this;for(var X=0;X<v.length;X++)this.words[X]=this.words[X]&G.words[X];return this.length=v.length,this._strip()},W.prototype.iand=function _(G){return H((this.negative|G.negative)===0),this.iuand(G)},W.prototype.and=function _(G){if(this.length>G.length)return this.clone().iand(G);return G.clone().iand(this)},W.prototype.uand=function _(G){if(this.length>G.length)return this.clone().iuand(G);return G.clone().iuand(this)},W.prototype.iuxor=function _(G){var v,X;if(this.length>G.length)v=this,X=G;else v=G,X=this;for(var D=0;D<X.length;D++)this.words[D]=v.words[D]^X.words[D];if(this!==v)for(;D<v.length;D++)this.words[D]=v.words[D];return this.length=v.length,this._strip()},W.prototype.ixor=function _(G){return H((this.negative|G.negative)===0),this.iuxor(G)},W.prototype.xor=function _(G){if(this.length>G.length)return this.clone().ixor(G);return G.clone().ixor(this)},W.prototype.uxor=function _(G){if(this.length>G.length)return this.clone().iuxor(G);return G.clone().iuxor(this)},W.prototype.inotn=function _(G){H(typeof G==="number"&&G>=0);var v=Math.ceil(G/26)|0,X=G%26;if(this._expand(v),X>0)v--;for(var D=0;D<v;D++)this.words[D]=~this.words[D]&67108863;if(X>0)this.words[D]=~this.words[D]&67108863>>26-X;return this._strip()},W.prototype.notn=function _(G){return this.clone().inotn(G)},W.prototype.setn=function _(G,v){H(typeof G==="number"&&G>=0);var X=G/26|0,D=G%26;if(this._expand(X+1),v)this.words[X]=this.words[X]|1<<D;else this.words[X]=this.words[X]&~(1<<D);return this._strip()},W.prototype.iadd=function _(G){var v;if(this.negative!==0&&G.negative===0)return this.negative=0,v=this.isub(G),this.negative^=1,this._normSign();else if(this.negative===0&&G.negative!==0)return G.negative=0,v=this.isub(G),G.negative=1,v._normSign();var X,D;if(this.length>G.length)X=this,D=G;else X=G,D=this;var M=0;for(var L=0;L<D.length;L++)v=(X.words[L]|0)+(D.words[L]|0)+M,this.words[L]=v&67108863,M=v>>>26;for(;M!==0&&L<X.length;L++)v=(X.words[L]|0)+M,this.words[L]=v&67108863,M=v>>>26;if(this.length=X.length,M!==0)this.words[this.length]=M,this.length++;else if(X!==this)for(;L<X.length;L++)this.words[L]=X.words[L];return this},W.prototype.add=function _(G){var v;if(G.negative!==0&&this.negative===0)return G.negative=0,v=this.sub(G),G.negative^=1,v;else if(G.negative===0&&this.negative!==0)return this.negative=0,v=G.sub(this),this.negative=1,v;if(this.length>G.length)return this.clone().iadd(G);return G.clone().iadd(this)},W.prototype.isub=function _(G){if(G.negative!==0){G.negative=0;var v=this.iadd(G);return G.negative=1,v._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(G),this.negative=1,this._normSign();var X=this.cmp(G);if(X===0)return this.negative=0,this.length=1,this.words[0]=0,this;var D,M;if(X>0)D=this,M=G;else D=G,M=this;var L=0;for(var S=0;S<M.length;S++)v=(D.words[S]|0)-(M.words[S]|0)+L,L=v>>26,this.words[S]=v&67108863;for(;L!==0&&S<D.length;S++)v=(D.words[S]|0)+L,L=v>>26,this.words[S]=v&67108863;if(L===0&&S<D.length&&D!==this)for(;S<D.length;S++)this.words[S]=D.words[S];if(this.length=Math.max(this.length,S),D!==this)this.negative=1;return this._strip()},W.prototype.sub=function _(G){return this.clone().isub(G)};function h(_,G,v){v.negative=G.negative^_.negative;var X=_.length+G.length|0;v.length=X,X=X-1|0;var D=_.words[0]|0,M=G.words[0]|0,L=D*M,S=L&67108863,R=L/67108864|0;v.words[0]=S;for(var F=1;F<X;F++){var E=R>>>26,f=R&67108863,l=Math.min(F,G.length-1);for(var p=Math.max(0,F-_.length+1);p<=l;p++){var i=F-p|0;D=_.words[i]|0,M=G.words[p]|0,L=D*M+f,E+=L/67108864|0,f=L&67108863}v.words[F]=f|0,R=E|0}if(R!==0)v.words[F]=R|0;else v.length--;return v._strip()}var b=function _(G,v,X){var D=G.words,M=v.words,L=X.words,S=0,R,F,E,f=D[0]|0,l=f&8191,p=f>>>13,i=D[1]|0,D0=i&8191,Q0=i>>>13,fJ=D[2]|0,Y0=fJ&8191,q0=fJ>>>13,n$=D[3]|0,N0=n$&8191,s0=n$>>>13,e$=D[4]|0,l0=e$&8191,a0=e$>>>13,iJ=D[5]|0,u0=iJ&8191,c0=iJ>>>13,UQ=D[6]|0,b0=UQ&8191,R0=UQ>>>13,YW=D[7]|0,o0=YW&8191,JJ=YW>>>13,zW=D[8]|0,$J=zW&8191,HJ=zW>>>13,jW=D[9]|0,QJ=jW&8191,WJ=jW>>>13,VW=M[0]|0,ZJ=VW&8191,YJ=VW>>>13,GW=M[1]|0,zJ=GW&8191,jJ=GW>>>13,FW=M[2]|0,VJ=FW&8191,GJ=FW>>>13,XW=M[3]|0,FJ=XW&8191,XJ=XW>>>13,UW=M[4]|0,UJ=UW&8191,DJ=UW>>>13,DW=M[5]|0,qJ=DW&8191,vJ=DW>>>13,qW=M[6]|0,CJ=qW&8191,RJ=qW>>>13,vW=M[7]|0,BJ=vW&8191,MJ=vW>>>13,CW=M[8]|0,OJ=CW&8191,LJ=CW>>>13,RW=M[9]|0,KJ=RW&8191,hJ=RW>>>13;X.negative=G.negative^v.negative,X.length=19,R=Math.imul(l,ZJ),F=Math.imul(l,YJ),F=F+Math.imul(p,ZJ)|0,E=Math.imul(p,YJ);var R8=(S+R|0)+((F&8191)<<13)|0;S=(E+(F>>>13)|0)+(R8>>>26)|0,R8&=67108863,R=Math.imul(D0,ZJ),F=Math.imul(D0,YJ),F=F+Math.imul(Q0,ZJ)|0,E=Math.imul(Q0,YJ),R=R+Math.imul(l,zJ)|0,F=F+Math.imul(l,jJ)|0,F=F+Math.imul(p,zJ)|0,E=E+Math.imul(p,jJ)|0;var B8=(S+R|0)+((F&8191)<<13)|0;S=(E+(F>>>13)|0)+(B8>>>26)|0,B8&=67108863,R=Math.imul(Y0,ZJ),F=Math.imul(Y0,YJ),F=F+Math.imul(q0,ZJ)|0,E=Math.imul(q0,YJ),R=R+Math.imul(D0,zJ)|0,F=F+Math.imul(D0,jJ)|0,F=F+Math.imul(Q0,zJ)|0,E=E+Math.imul(Q0,jJ)|0,R=R+Math.imul(l,VJ)|0,F=F+Math.imul(l,GJ)|0,F=F+Math.imul(p,VJ)|0,E=E+Math.imul(p,GJ)|0;var M8=(S+R|0)+((F&8191)<<13)|0;S=(E+(F>>>13)|0)+(M8>>>26)|0,M8&=67108863,R=Math.imul(N0,ZJ),F=Math.imul(N0,YJ),F=F+Math.imul(s0,ZJ)|0,E=Math.imul(s0,YJ),R=R+Math.imul(Y0,zJ)|0,F=F+Math.imul(Y0,jJ)|0,F=F+Math.imul(q0,zJ)|0,E=E+Math.imul(q0,jJ)|0,R=R+Math.imul(D0,VJ)|0,F=F+Math.imul(D0,GJ)|0,F=F+Math.imul(Q0,VJ)|0,E=E+Math.imul(Q0,GJ)|0,R=R+Math.imul(l,FJ)|0,F=F+Math.imul(l,XJ)|0,F=F+Math.imul(p,FJ)|0,E=E+Math.imul(p,XJ)|0;var O8=(S+R|0)+((F&8191)<<13)|0;S=(E+(F>>>13)|0)+(O8>>>26)|0,O8&=67108863,R=Math.imul(l0,ZJ),F=Math.imul(l0,YJ),F=F+Math.imul(a0,ZJ)|0,E=Math.imul(a0,YJ),R=R+Math.imul(N0,zJ)|0,F=F+Math.imul(N0,jJ)|0,F=F+Math.imul(s0,zJ)|0,E=E+Math.imul(s0,jJ)|0,R=R+Math.imul(Y0,VJ)|0,F=F+Math.imul(Y0,GJ)|0,F=F+Math.imul(q0,VJ)|0,E=E+Math.imul(q0,GJ)|0,R=R+Math.imul(D0,FJ)|0,F=F+Math.imul(D0,XJ)|0,F=F+Math.imul(Q0,FJ)|0,E=E+Math.imul(Q0,XJ)|0,R=R+Math.imul(l,UJ)|0,F=F+Math.imul(l,DJ)|0,F=F+Math.imul(p,UJ)|0,E=E+Math.imul(p,DJ)|0;var L8=(S+R|0)+((F&8191)<<13)|0;S=(E+(F>>>13)|0)+(L8>>>26)|0,L8&=67108863,R=Math.imul(u0,ZJ),F=Math.imul(u0,YJ),F=F+Math.imul(c0,ZJ)|0,E=Math.imul(c0,YJ),R=R+Math.imul(l0,zJ)|0,F=F+Math.imul(l0,jJ)|0,F=F+Math.imul(a0,zJ)|0,E=E+Math.imul(a0,jJ)|0,R=R+Math.imul(N0,VJ)|0,F=F+Math.imul(N0,GJ)|0,F=F+Math.imul(s0,VJ)|0,E=E+Math.imul(s0,GJ)|0,R=R+Math.imul(Y0,FJ)|0,F=F+Math.imul(Y0,XJ)|0,F=F+Math.imul(q0,FJ)|0,E=E+Math.imul(q0,XJ)|0,R=R+Math.imul(D0,UJ)|0,F=F+Math.imul(D0,DJ)|0,F=F+Math.imul(Q0,UJ)|0,E=E+Math.imul(Q0,DJ)|0,R=R+Math.imul(l,qJ)|0,F=F+Math.imul(l,vJ)|0,F=F+Math.imul(p,qJ)|0,E=E+Math.imul(p,vJ)|0;var K8=(S+R|0)+((F&8191)<<13)|0;S=(E+(F>>>13)|0)+(K8>>>26)|0,K8&=67108863,R=Math.imul(b0,ZJ),F=Math.imul(b0,YJ),F=F+Math.imul(R0,ZJ)|0,E=Math.imul(R0,YJ),R=R+Math.imul(u0,zJ)|0,F=F+Math.imul(u0,jJ)|0,F=F+Math.imul(c0,zJ)|0,E=E+Math.imul(c0,jJ)|0,R=R+Math.imul(l0,VJ)|0,F=F+Math.imul(l0,GJ)|0,F=F+Math.imul(a0,VJ)|0,E=E+Math.imul(a0,GJ)|0,R=R+Math.imul(N0,FJ)|0,F=F+Math.imul(N0,XJ)|0,F=F+Math.imul(s0,FJ)|0,E=E+Math.imul(s0,XJ)|0,R=R+Math.imul(Y0,UJ)|0,F=F+Math.imul(Y0,DJ)|0,F=F+Math.imul(q0,UJ)|0,E=E+Math.imul(q0,DJ)|0,R=R+Math.imul(D0,qJ)|0,F=F+Math.imul(D0,vJ)|0,F=F+Math.imul(Q0,qJ)|0,E=E+Math.imul(Q0,vJ)|0,R=R+Math.imul(l,CJ)|0,F=F+Math.imul(l,RJ)|0,F=F+Math.imul(p,CJ)|0,E=E+Math.imul(p,RJ)|0;var h8=(S+R|0)+((F&8191)<<13)|0;S=(E+(F>>>13)|0)+(h8>>>26)|0,h8&=67108863,R=Math.imul(o0,ZJ),F=Math.imul(o0,YJ),F=F+Math.imul(JJ,ZJ)|0,E=Math.imul(JJ,YJ),R=R+Math.imul(b0,zJ)|0,F=F+Math.imul(b0,jJ)|0,F=F+Math.imul(R0,zJ)|0,E=E+Math.imul(R0,jJ)|0,R=R+Math.imul(u0,VJ)|0,F=F+Math.imul(u0,GJ)|0,F=F+Math.imul(c0,VJ)|0,E=E+Math.imul(c0,GJ)|0,R=R+Math.imul(l0,FJ)|0,F=F+Math.imul(l0,XJ)|0,F=F+Math.imul(a0,FJ)|0,E=E+Math.imul(a0,XJ)|0,R=R+Math.imul(N0,UJ)|0,F=F+Math.imul(N0,DJ)|0,F=F+Math.imul(s0,UJ)|0,E=E+Math.imul(s0,DJ)|0,R=R+Math.imul(Y0,qJ)|0,F=F+Math.imul(Y0,vJ)|0,F=F+Math.imul(q0,qJ)|0,E=E+Math.imul(q0,vJ)|0,R=R+Math.imul(D0,CJ)|0,F=F+Math.imul(D0,RJ)|0,F=F+Math.imul(Q0,CJ)|0,E=E+Math.imul(Q0,RJ)|0,R=R+Math.imul(l,BJ)|0,F=F+Math.imul(l,MJ)|0,F=F+Math.imul(p,BJ)|0,E=E+Math.imul(p,MJ)|0;var E8=(S+R|0)+((F&8191)<<13)|0;S=(E+(F>>>13)|0)+(E8>>>26)|0,E8&=67108863,R=Math.imul($J,ZJ),F=Math.imul($J,YJ),F=F+Math.imul(HJ,ZJ)|0,E=Math.imul(HJ,YJ),R=R+Math.imul(o0,zJ)|0,F=F+Math.imul(o0,jJ)|0,F=F+Math.imul(JJ,zJ)|0,E=E+Math.imul(JJ,jJ)|0,R=R+Math.imul(b0,VJ)|0,F=F+Math.imul(b0,GJ)|0,F=F+Math.imul(R0,VJ)|0,E=E+Math.imul(R0,GJ)|0,R=R+Math.imul(u0,FJ)|0,F=F+Math.imul(u0,XJ)|0,F=F+Math.imul(c0,FJ)|0,E=E+Math.imul(c0,XJ)|0,R=R+Math.imul(l0,UJ)|0,F=F+Math.imul(l0,DJ)|0,F=F+Math.imul(a0,UJ)|0,E=E+Math.imul(a0,DJ)|0,R=R+Math.imul(N0,qJ)|0,F=F+Math.imul(N0,vJ)|0,F=F+Math.imul(s0,qJ)|0,E=E+Math.imul(s0,vJ)|0,R=R+Math.imul(Y0,CJ)|0,F=F+Math.imul(Y0,RJ)|0,F=F+Math.imul(q0,CJ)|0,E=E+Math.imul(q0,RJ)|0,R=R+Math.imul(D0,BJ)|0,F=F+Math.imul(D0,MJ)|0,F=F+Math.imul(Q0,BJ)|0,E=E+Math.imul(Q0,MJ)|0,R=R+Math.imul(l,OJ)|0,F=F+Math.imul(l,LJ)|0,F=F+Math.imul(p,OJ)|0,E=E+Math.imul(p,LJ)|0;var S8=(S+R|0)+((F&8191)<<13)|0;S=(E+(F>>>13)|0)+(S8>>>26)|0,S8&=67108863,R=Math.imul(QJ,ZJ),F=Math.imul(QJ,YJ),F=F+Math.imul(WJ,ZJ)|0,E=Math.imul(WJ,YJ),R=R+Math.imul($J,zJ)|0,F=F+Math.imul($J,jJ)|0,F=F+Math.imul(HJ,zJ)|0,E=E+Math.imul(HJ,jJ)|0,R=R+Math.imul(o0,VJ)|0,F=F+Math.imul(o0,GJ)|0,F=F+Math.imul(JJ,VJ)|0,E=E+Math.imul(JJ,GJ)|0,R=R+Math.imul(b0,FJ)|0,F=F+Math.imul(b0,XJ)|0,F=F+Math.imul(R0,FJ)|0,E=E+Math.imul(R0,XJ)|0,R=R+Math.imul(u0,UJ)|0,F=F+Math.imul(u0,DJ)|0,F=F+Math.imul(c0,UJ)|0,E=E+Math.imul(c0,DJ)|0,R=R+Math.imul(l0,qJ)|0,F=F+Math.imul(l0,vJ)|0,F=F+Math.imul(a0,qJ)|0,E=E+Math.imul(a0,vJ)|0,R=R+Math.imul(N0,CJ)|0,F=F+Math.imul(N0,RJ)|0,F=F+Math.imul(s0,CJ)|0,E=E+Math.imul(s0,RJ)|0,R=R+Math.imul(Y0,BJ)|0,F=F+Math.imul(Y0,MJ)|0,F=F+Math.imul(q0,BJ)|0,E=E+Math.imul(q0,MJ)|0,R=R+Math.imul(D0,OJ)|0,F=F+Math.imul(D0,LJ)|0,F=F+Math.imul(Q0,OJ)|0,E=E+Math.imul(Q0,LJ)|0,R=R+Math.imul(l,KJ)|0,F=F+Math.imul(l,hJ)|0,F=F+Math.imul(p,KJ)|0,E=E+Math.imul(p,hJ)|0;var w8=(S+R|0)+((F&8191)<<13)|0;S=(E+(F>>>13)|0)+(w8>>>26)|0,w8&=67108863,R=Math.imul(QJ,zJ),F=Math.imul(QJ,jJ),F=F+Math.imul(WJ,zJ)|0,E=Math.imul(WJ,jJ),R=R+Math.imul($J,VJ)|0,F=F+Math.imul($J,GJ)|0,F=F+Math.imul(HJ,VJ)|0,E=E+Math.imul(HJ,GJ)|0,R=R+Math.imul(o0,FJ)|0,F=F+Math.imul(o0,XJ)|0,F=F+Math.imul(JJ,FJ)|0,E=E+Math.imul(JJ,XJ)|0,R=R+Math.imul(b0,UJ)|0,F=F+Math.imul(b0,DJ)|0,F=F+Math.imul(R0,UJ)|0,E=E+Math.imul(R0,DJ)|0,R=R+Math.imul(u0,qJ)|0,F=F+Math.imul(u0,vJ)|0,F=F+Math.imul(c0,qJ)|0,E=E+Math.imul(c0,vJ)|0,R=R+Math.imul(l0,CJ)|0,F=F+Math.imul(l0,RJ)|0,F=F+Math.imul(a0,CJ)|0,E=E+Math.imul(a0,RJ)|0,R=R+Math.imul(N0,BJ)|0,F=F+Math.imul(N0,MJ)|0,F=F+Math.imul(s0,BJ)|0,E=E+Math.imul(s0,MJ)|0,R=R+Math.imul(Y0,OJ)|0,F=F+Math.imul(Y0,LJ)|0,F=F+Math.imul(q0,OJ)|0,E=E+Math.imul(q0,LJ)|0,R=R+Math.imul(D0,KJ)|0,F=F+Math.imul(D0,hJ)|0,F=F+Math.imul(Q0,KJ)|0,E=E+Math.imul(Q0,hJ)|0;var b8=(S+R|0)+((F&8191)<<13)|0;S=(E+(F>>>13)|0)+(b8>>>26)|0,b8&=67108863,R=Math.imul(QJ,VJ),F=Math.imul(QJ,GJ),F=F+Math.imul(WJ,VJ)|0,E=Math.imul(WJ,GJ),R=R+Math.imul($J,FJ)|0,F=F+Math.imul($J,XJ)|0,F=F+Math.imul(HJ,FJ)|0,E=E+Math.imul(HJ,XJ)|0,R=R+Math.imul(o0,UJ)|0,F=F+Math.imul(o0,DJ)|0,F=F+Math.imul(JJ,UJ)|0,E=E+Math.imul(JJ,DJ)|0,R=R+Math.imul(b0,qJ)|0,F=F+Math.imul(b0,vJ)|0,F=F+Math.imul(R0,qJ)|0,E=E+Math.imul(R0,vJ)|0,R=R+Math.imul(u0,CJ)|0,F=F+Math.imul(u0,RJ)|0,F=F+Math.imul(c0,CJ)|0,E=E+Math.imul(c0,RJ)|0,R=R+Math.imul(l0,BJ)|0,F=F+Math.imul(l0,MJ)|0,F=F+Math.imul(a0,BJ)|0,E=E+Math.imul(a0,MJ)|0,R=R+Math.imul(N0,OJ)|0,F=F+Math.imul(N0,LJ)|0,F=F+Math.imul(s0,OJ)|0,E=E+Math.imul(s0,LJ)|0,R=R+Math.imul(Y0,KJ)|0,F=F+Math.imul(Y0,hJ)|0,F=F+Math.imul(q0,KJ)|0,E=E+Math.imul(q0,hJ)|0;var _8=(S+R|0)+((F&8191)<<13)|0;S=(E+(F>>>13)|0)+(_8>>>26)|0,_8&=67108863,R=Math.imul(QJ,FJ),F=Math.imul(QJ,XJ),F=F+Math.imul(WJ,FJ)|0,E=Math.imul(WJ,XJ),R=R+Math.imul($J,UJ)|0,F=F+Math.imul($J,DJ)|0,F=F+Math.imul(HJ,UJ)|0,E=E+Math.imul(HJ,DJ)|0,R=R+Math.imul(o0,qJ)|0,F=F+Math.imul(o0,vJ)|0,F=F+Math.imul(JJ,qJ)|0,E=E+Math.imul(JJ,vJ)|0,R=R+Math.imul(b0,CJ)|0,F=F+Math.imul(b0,RJ)|0,F=F+Math.imul(R0,CJ)|0,E=E+Math.imul(R0,RJ)|0,R=R+Math.imul(u0,BJ)|0,F=F+Math.imul(u0,MJ)|0,F=F+Math.imul(c0,BJ)|0,E=E+Math.imul(c0,MJ)|0,R=R+Math.imul(l0,OJ)|0,F=F+Math.imul(l0,LJ)|0,F=F+Math.imul(a0,OJ)|0,E=E+Math.imul(a0,LJ)|0,R=R+Math.imul(N0,KJ)|0,F=F+Math.imul(N0,hJ)|0,F=F+Math.imul(s0,KJ)|0,E=E+Math.imul(s0,hJ)|0;var P8=(S+R|0)+((F&8191)<<13)|0;S=(E+(F>>>13)|0)+(P8>>>26)|0,P8&=67108863,R=Math.imul(QJ,UJ),F=Math.imul(QJ,DJ),F=F+Math.imul(WJ,UJ)|0,E=Math.imul(WJ,DJ),R=R+Math.imul($J,qJ)|0,F=F+Math.imul($J,vJ)|0,F=F+Math.imul(HJ,qJ)|0,E=E+Math.imul(HJ,vJ)|0,R=R+Math.imul(o0,CJ)|0,F=F+Math.imul(o0,RJ)|0,F=F+Math.imul(JJ,CJ)|0,E=E+Math.imul(JJ,RJ)|0,R=R+Math.imul(b0,BJ)|0,F=F+Math.imul(b0,MJ)|0,F=F+Math.imul(R0,BJ)|0,E=E+Math.imul(R0,MJ)|0,R=R+Math.imul(u0,OJ)|0,F=F+Math.imul(u0,LJ)|0,F=F+Math.imul(c0,OJ)|0,E=E+Math.imul(c0,LJ)|0,R=R+Math.imul(l0,KJ)|0,F=F+Math.imul(l0,hJ)|0,F=F+Math.imul(a0,KJ)|0,E=E+Math.imul(a0,hJ)|0;var N8=(S+R|0)+((F&8191)<<13)|0;S=(E+(F>>>13)|0)+(N8>>>26)|0,N8&=67108863,R=Math.imul(QJ,qJ),F=Math.imul(QJ,vJ),F=F+Math.imul(WJ,qJ)|0,E=Math.imul(WJ,vJ),R=R+Math.imul($J,CJ)|0,F=F+Math.imul($J,RJ)|0,F=F+Math.imul(HJ,CJ)|0,E=E+Math.imul(HJ,RJ)|0,R=R+Math.imul(o0,BJ)|0,F=F+Math.imul(o0,MJ)|0,F=F+Math.imul(JJ,BJ)|0,E=E+Math.imul(JJ,MJ)|0,R=R+Math.imul(b0,OJ)|0,F=F+Math.imul(b0,LJ)|0,F=F+Math.imul(R0,OJ)|0,E=E+Math.imul(R0,LJ)|0,R=R+Math.imul(u0,KJ)|0,F=F+Math.imul(u0,hJ)|0,F=F+Math.imul(c0,KJ)|0,E=E+Math.imul(c0,hJ)|0;var g8=(S+R|0)+((F&8191)<<13)|0;S=(E+(F>>>13)|0)+(g8>>>26)|0,g8&=67108863,R=Math.imul(QJ,CJ),F=Math.imul(QJ,RJ),F=F+Math.imul(WJ,CJ)|0,E=Math.imul(WJ,RJ),R=R+Math.imul($J,BJ)|0,F=F+Math.imul($J,MJ)|0,F=F+Math.imul(HJ,BJ)|0,E=E+Math.imul(HJ,MJ)|0,R=R+Math.imul(o0,OJ)|0,F=F+Math.imul(o0,LJ)|0,F=F+Math.imul(JJ,OJ)|0,E=E+Math.imul(JJ,LJ)|0,R=R+Math.imul(b0,KJ)|0,F=F+Math.imul(b0,hJ)|0,F=F+Math.imul(R0,KJ)|0,E=E+Math.imul(R0,hJ)|0;var k8=(S+R|0)+((F&8191)<<13)|0;S=(E+(F>>>13)|0)+(k8>>>26)|0,k8&=67108863,R=Math.imul(QJ,BJ),F=Math.imul(QJ,MJ),F=F+Math.imul(WJ,BJ)|0,E=Math.imul(WJ,MJ),R=R+Math.imul($J,OJ)|0,F=F+Math.imul($J,LJ)|0,F=F+Math.imul(HJ,OJ)|0,E=E+Math.imul(HJ,LJ)|0,R=R+Math.imul(o0,KJ)|0,F=F+Math.imul(o0,hJ)|0,F=F+Math.imul(JJ,KJ)|0,E=E+Math.imul(JJ,hJ)|0;var x8=(S+R|0)+((F&8191)<<13)|0;S=(E+(F>>>13)|0)+(x8>>>26)|0,x8&=67108863,R=Math.imul(QJ,OJ),F=Math.imul(QJ,LJ),F=F+Math.imul(WJ,OJ)|0,E=Math.imul(WJ,LJ),R=R+Math.imul($J,KJ)|0,F=F+Math.imul($J,hJ)|0,F=F+Math.imul(HJ,KJ)|0,E=E+Math.imul(HJ,hJ)|0;var A8=(S+R|0)+((F&8191)<<13)|0;S=(E+(F>>>13)|0)+(A8>>>26)|0,A8&=67108863,R=Math.imul(QJ,KJ),F=Math.imul(QJ,hJ),F=F+Math.imul(WJ,KJ)|0,E=Math.imul(WJ,hJ);var T8=(S+R|0)+((F&8191)<<13)|0;if(S=(E+(F>>>13)|0)+(T8>>>26)|0,T8&=67108863,L[0]=R8,L[1]=B8,L[2]=M8,L[3]=O8,L[4]=L8,L[5]=K8,L[6]=h8,L[7]=E8,L[8]=S8,L[9]=w8,L[10]=b8,L[11]=_8,L[12]=P8,L[13]=N8,L[14]=g8,L[15]=k8,L[16]=x8,L[17]=A8,L[18]=T8,S!==0)L[19]=S,X.length++;return X};if(!Math.imul)b=h;function N(_,G,v){v.negative=G.negative^_.negative,v.length=_.length+G.length;var X=0,D=0;for(var M=0;M<v.length-1;M++){var L=D;D=0;var S=X&67108863,R=Math.min(M,G.length-1);for(var F=Math.max(0,M-_.length+1);F<=R;F++){var E=M-F,f=_.words[E]|0,l=G.words[F]|0,p=f*l,i=p&67108863;L=L+(p/67108864|0)|0,i=i+S|0,S=i&67108863,L=L+(i>>>26)|0,D+=L>>>26,L&=67108863}v.words[M]=S,X=L,L=D}if(X!==0)v.words[M]=X;else v.length--;return v._strip()}function x(_,G,v){return N(_,G,v)}W.prototype.mulTo=function _(G,v){var X,D=this.length+G.length;if(this.length===10&&G.length===10)X=b(this,G,v);else if(D<63)X=h(this,G,v);else if(D<1024)X=N(this,G,v);else X=x(this,G,v);return X};function k(_,G){this.x=_,this.y=G}k.prototype.makeRBT=function _(G){var v=new Array(G),X=W.prototype._countBits(G)-1;for(var D=0;D<G;D++)v[D]=this.revBin(D,X,G);return v},k.prototype.revBin=function _(G,v,X){if(G===0||G===X-1)return G;var D=0;for(var M=0;M<v;M++)D|=(G&1)<<v-M-1,G>>=1;return D},k.prototype.permute=function _(G,v,X,D,M,L){for(var S=0;S<L;S++)D[S]=v[G[S]],M[S]=X[G[S]]},k.prototype.transform=function _(G,v,X,D,M,L){this.permute(L,G,v,X,D,M);for(var S=1;S<M;S<<=1){var R=S<<1,F=Math.cos(2*Math.PI/R),E=Math.sin(2*Math.PI/R);for(var f=0;f<M;f+=R){var l=F,p=E;for(var i=0;i<S;i++){var D0=X[f+i],Q0=D[f+i],fJ=X[f+i+S],Y0=D[f+i+S],q0=l*fJ-p*Y0;if(Y0=l*Y0+p*fJ,fJ=q0,X[f+i]=D0+fJ,D[f+i]=Q0+Y0,X[f+i+S]=D0-fJ,D[f+i+S]=Q0-Y0,i!==R)q0=F*l-E*p,p=F*p+E*l,l=q0}}}},k.prototype.guessLen13b=function _(G,v){var X=Math.max(v,G)|1,D=X&1,M=0;for(X=X/2|0;X;X=X>>>1)M++;return 1<<M+1+D},k.prototype.conjugate=function _(G,v,X){if(X<=1)return;for(var D=0;D<X/2;D++){var M=G[D];G[D]=G[X-D-1],G[X-D-1]=M,M=v[D],v[D]=-v[X-D-1],v[X-D-1]=-M}},k.prototype.normalize13b=function _(G,v){var X=0;for(var D=0;D<v/2;D++){var M=Math.round(G[2*D+1]/v)*8192+Math.round(G[2*D]/v)+X;if(G[D]=M&67108863,M<67108864)X=0;else X=M/67108864|0}return G},k.prototype.convert13b=function _(G,v,X,D){var M=0;for(var L=0;L<v;L++)M=M+(G[L]|0),X[2*L]=M&8191,M=M>>>13,X[2*L+1]=M&8191,M=M>>>13;for(L=2*v;L<D;++L)X[L]=0;H(M===0),H((M&~8191)===0)},k.prototype.stub=function _(G){var v=new Array(G);for(var X=0;X<G;X++)v[X]=0;return v},k.prototype.mulp=function _(G,v,X){var D=2*this.guessLen13b(G.length,v.length),M=this.makeRBT(D),L=this.stub(D),S=new Array(D),R=new Array(D),F=new Array(D),E=new Array(D),f=new Array(D),l=new Array(D),p=X.words;p.length=D,this.convert13b(G.words,G.length,S,D),this.convert13b(v.words,v.length,E,D),this.transform(S,L,R,F,D,M),this.transform(E,L,f,l,D,M);for(var i=0;i<D;i++){var D0=R[i]*f[i]-F[i]*l[i];F[i]=R[i]*l[i]+F[i]*f[i],R[i]=D0}return this.conjugate(R,F,D),this.transform(R,F,p,L,D,M),this.conjugate(p,L,D),this.normalize13b(p,D),X.negative=G.negative^v.negative,X.length=G.length+v.length,X._strip()},W.prototype.mul=function _(G){var v=new W(null);return v.words=new Array(this.length+G.length),this.mulTo(G,v)},W.prototype.mulf=function _(G){var v=new W(null);return v.words=new Array(this.length+G.length),x(this,G,v)},W.prototype.imul=function _(G){return this.clone().mulTo(G,this)},W.prototype.imuln=function _(G){var v=G<0;if(v)G=-G;H(typeof G==="number"),H(G<67108864);var X=0;for(var D=0;D<this.length;D++){var M=(this.words[D]|0)*G,L=(M&67108863)+(X&67108863);X>>=26,X+=M/67108864|0,X+=L>>>26,this.words[D]=L&67108863}if(X!==0)this.words[D]=X,this.length++;return v?this.ineg():this},W.prototype.muln=function _(G){return this.clone().imuln(G)},W.prototype.sqr=function _(){return this.mul(this)},W.prototype.isqr=function _(){return this.imul(this.clone())},W.prototype.pow=function _(G){var v=O(G);if(v.length===0)return new W(1);var X=this;for(var D=0;D<v.length;D++,X=X.sqr())if(v[D]!==0)break;if(++D<v.length)for(var M=X.sqr();D<v.length;D++,M=M.sqr()){if(v[D]===0)continue;X=X.mul(M)}return X},W.prototype.iushln=function _(G){H(typeof G==="number"&&G>=0);var v=G%26,X=(G-v)/26,D=67108863>>>26-v<<26-v,M;if(v!==0){var L=0;for(M=0;M<this.length;M++){var S=this.words[M]&D,R=(this.words[M]|0)-S<<v;this.words[M]=R|L,L=S>>>26-v}if(L)this.words[M]=L,this.length++}if(X!==0){for(M=this.length-1;M>=0;M--)this.words[M+X]=this.words[M];for(M=0;M<X;M++)this.words[M]=0;this.length+=X}return this._strip()},W.prototype.ishln=function _(G){return H(this.negative===0),this.iushln(G)},W.prototype.iushrn=function _(G,v,X){H(typeof G==="number"&&G>=0);var D;if(v)D=(v-v%26)/26;else D=0;var M=G%26,L=Math.min((G-M)/26,this.length),S=67108863^67108863>>>M<<M,R=X;if(D-=L,D=Math.max(0,D),R){for(var F=0;F<L;F++)R.words[F]=this.words[F];R.length=L}if(L===0);else if(this.length>L){this.length-=L;for(F=0;F<this.length;F++)this.words[F]=this.words[F+L]}else this.words[0]=0,this.length=1;var E=0;for(F=this.length-1;F>=0&&(E!==0||F>=D);F--){var f=this.words[F]|0;this.words[F]=E<<26-M|f>>>M,E=f&S}if(R&&E!==0)R.words[R.length++]=E;if(this.length===0)this.words[0]=0,this.length=1;return this._strip()},W.prototype.ishrn=function _(G,v,X){return H(this.negative===0),this.iushrn(G,v,X)},W.prototype.shln=function _(G){return this.clone().ishln(G)},W.prototype.ushln=function _(G){return this.clone().iushln(G)},W.prototype.shrn=function _(G){return this.clone().ishrn(G)},W.prototype.ushrn=function _(G){return this.clone().iushrn(G)},W.prototype.testn=function _(G){H(typeof G==="number"&&G>=0);var v=G%26,X=(G-v)/26,D=1<<v;if(this.length<=X)return!1;var M=this.words[X];return!!(M&D)},W.prototype.imaskn=function _(G){H(typeof G==="number"&&G>=0);var v=G%26,X=(G-v)/26;if(H(this.negative===0,"imaskn works only with positive numbers"),this.length<=X)return this;if(v!==0)X++;if(this.length=Math.min(X,this.length),v!==0){var D=67108863^67108863>>>v<<v;this.words[this.length-1]&=D}return this._strip()},W.prototype.maskn=function _(G){return this.clone().imaskn(G)},W.prototype.iaddn=function _(G){if(H(typeof G==="number"),H(G<67108864),G<0)return this.isubn(-G);if(this.negative!==0){if(this.length===1&&(this.words[0]|0)<=G)return this.words[0]=G-(this.words[0]|0),this.negative=0,this;return this.negative=0,this.isubn(G),this.negative=1,this}return this._iaddn(G)},W.prototype._iaddn=function _(G){this.words[0]+=G;for(var v=0;v<this.length&&this.words[v]>=67108864;v++)if(this.words[v]-=67108864,v===this.length-1)this.words[v+1]=1;else this.words[v+1]++;return this.length=Math.max(this.length,v+1),this},W.prototype.isubn=function _(G){if(H(typeof G==="number"),H(G<67108864),G<0)return this.iaddn(-G);if(this.negative!==0)return this.negative=0,this.iaddn(G),this.negative=1,this;if(this.words[0]-=G,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var v=0;v<this.length&&this.words[v]<0;v++)this.words[v]+=67108864,this.words[v+1]-=1;return this._strip()},W.prototype.addn=function _(G){return this.clone().iaddn(G)},W.prototype.subn=function _(G){return this.clone().isubn(G)},W.prototype.iabs=function _(){return this.negative=0,this},W.prototype.abs=function _(){return this.clone().iabs()},W.prototype._ishlnsubmul=function _(G,v,X){var D=G.length+X,M;this._expand(D);var L,S=0;for(M=0;M<G.length;M++){L=(this.words[M+X]|0)+S;var R=(G.words[M]|0)*v;L-=R&67108863,S=(L>>26)-(R/67108864|0),this.words[M+X]=L&67108863}for(;M<this.length-X;M++)L=(this.words[M+X]|0)+S,S=L>>26,this.words[M+X]=L&67108863;if(S===0)return this._strip();H(S===-1),S=0;for(M=0;M<this.length;M++)L=-(this.words[M]|0)+S,S=L>>26,this.words[M]=L&67108863;return this.negative=1,this._strip()},W.prototype._wordDiv=function _(G,v){var X=this.length-G.length,D=this.clone(),M=G,L=M.words[M.length-1]|0,S=this._countBits(L);if(X=26-S,X!==0)M=M.ushln(X),D.iushln(X),L=M.words[M.length-1]|0;var R=D.length-M.length,F;if(v!=="mod"){F=new W(null),F.length=R+1,F.words=new Array(F.length);for(var E=0;E<F.length;E++)F.words[E]=0}var f=D.clone()._ishlnsubmul(M,1,R);if(f.negative===0){if(D=f,F)F.words[R]=1}for(var l=R-1;l>=0;l--){var p=(D.words[M.length+l]|0)*67108864+(D.words[M.length+l-1]|0);p=Math.min(p/L|0,67108863),D._ishlnsubmul(M,p,l);while(D.negative!==0)if(p--,D.negative=0,D._ishlnsubmul(M,1,l),!D.isZero())D.negative^=1;if(F)F.words[l]=p}if(F)F._strip();if(D._strip(),v!=="div"&&X!==0)D.iushrn(X);return{div:F||null,mod:D}},W.prototype.divmod=function _(G,v,X){if(H(!G.isZero()),this.isZero())return{div:new W(0),mod:new W(0)};var D,M,L;if(this.negative!==0&&G.negative===0){if(L=this.neg().divmod(G,v),v!=="mod")D=L.div.neg();if(v!=="div"){if(M=L.mod.neg(),X&&M.negative!==0)M.iadd(G)}return{div:D,mod:M}}if(this.negative===0&&G.negative!==0){if(L=this.divmod(G.neg(),v),v!=="mod")D=L.div.neg();return{div:D,mod:L.mod}}if((this.negative&G.negative)!==0){if(L=this.neg().divmod(G.neg(),v),v!=="div"){if(M=L.mod.neg(),X&&M.negative!==0)M.isub(G)}return{div:L.div,mod:M}}if(G.length>this.length||this.cmp(G)<0)return{div:new W(0),mod:this};if(G.length===1){if(v==="div")return{div:this.divn(G.words[0]),mod:null};if(v==="mod")return{div:null,mod:new W(this.modrn(G.words[0]))};return{div:this.divn(G.words[0]),mod:new W(this.modrn(G.words[0]))}}return this._wordDiv(G,v)},W.prototype.div=function _(G){return this.divmod(G,"div",!1).div},W.prototype.mod=function _(G){return this.divmod(G,"mod",!1).mod},W.prototype.umod=function _(G){return this.divmod(G,"mod",!0).mod},W.prototype.divRound=function _(G){var v=this.divmod(G);if(v.mod.isZero())return v.div;var X=v.div.negative!==0?v.mod.isub(G):v.mod,D=G.ushrn(1),M=G.andln(1),L=X.cmp(D);if(L<0||M===1&&L===0)return v.div;return v.div.negative!==0?v.div.isubn(1):v.div.iaddn(1)},W.prototype.modrn=function _(G){var v=G<0;if(v)G=-G;H(G<=67108863);var X=(1<<26)%G,D=0;for(var M=this.length-1;M>=0;M--)D=(X*D+(this.words[M]|0))%G;return v?-D:D},W.prototype.modn=function _(G){return this.modrn(G)},W.prototype.idivn=function _(G){var v=G<0;if(v)G=-G;H(G<=67108863);var X=0;for(var D=this.length-1;D>=0;D--){var M=(this.words[D]|0)+X*67108864;this.words[D]=M/G|0,X=M%G}return this._strip(),v?this.ineg():this},W.prototype.divn=function _(G){return this.clone().idivn(G)},W.prototype.egcd=function _(G){H(G.negative===0),H(!G.isZero());var v=this,X=G.clone();if(v.negative!==0)v=v.umod(G);else v=v.clone();var D=new W(1),M=new W(0),L=new W(0),S=new W(1),R=0;while(v.isEven()&&X.isEven())v.iushrn(1),X.iushrn(1),++R;var F=X.clone(),E=v.clone();while(!v.isZero()){for(var f=0,l=1;(v.words[0]&l)===0&&f<26;++f,l<<=1);if(f>0){v.iushrn(f);while(f-- >0){if(D.isOdd()||M.isOdd())D.iadd(F),M.isub(E);D.iushrn(1),M.iushrn(1)}}for(var p=0,i=1;(X.words[0]&i)===0&&p<26;++p,i<<=1);if(p>0){X.iushrn(p);while(p-- >0){if(L.isOdd()||S.isOdd())L.iadd(F),S.isub(E);L.iushrn(1),S.iushrn(1)}}if(v.cmp(X)>=0)v.isub(X),D.isub(L),M.isub(S);else X.isub(v),L.isub(D),S.isub(M)}return{a:L,b:S,gcd:X.iushln(R)}},W.prototype._invmp=function _(G){H(G.negative===0),H(!G.isZero());var v=this,X=G.clone();if(v.negative!==0)v=v.umod(G);else v=v.clone();var D=new W(1),M=new W(0),L=X.clone();while(v.cmpn(1)>0&&X.cmpn(1)>0){for(var S=0,R=1;(v.words[0]&R)===0&&S<26;++S,R<<=1);if(S>0){v.iushrn(S);while(S-- >0){if(D.isOdd())D.iadd(L);D.iushrn(1)}}for(var F=0,E=1;(X.words[0]&E)===0&&F<26;++F,E<<=1);if(F>0){X.iushrn(F);while(F-- >0){if(M.isOdd())M.iadd(L);M.iushrn(1)}}if(v.cmp(X)>=0)v.isub(X),D.isub(M);else X.isub(v),M.isub(D)}var f;if(v.cmpn(1)===0)f=D;else f=M;if(f.cmpn(0)<0)f.iadd(G);return f},W.prototype.gcd=function _(G){if(this.isZero())return G.abs();if(G.isZero())return this.abs();var v=this.clone(),X=G.clone();v.negative=0,X.negative=0;for(var D=0;v.isEven()&&X.isEven();D++)v.iushrn(1),X.iushrn(1);do{while(v.isEven())v.iushrn(1);while(X.isEven())X.iushrn(1);var M=v.cmp(X);if(M<0){var L=v;v=X,X=L}else if(M===0||X.cmpn(1)===0)break;v.isub(X)}while(!0);return X.iushln(D)},W.prototype.invm=function _(G){return this.egcd(G).a.umod(G)},W.prototype.isEven=function _(){return(this.words[0]&1)===0},W.prototype.isOdd=function _(){return(this.words[0]&1)===1},W.prototype.andln=function _(G){return this.words[0]&G},W.prototype.bincn=function _(G){H(typeof G==="number");var v=G%26,X=(G-v)/26,D=1<<v;if(this.length<=X)return this._expand(X+1),this.words[X]|=D,this;var M=D;for(var L=X;M!==0&&L<this.length;L++){var S=this.words[L]|0;S+=M,M=S>>>26,S&=67108863,this.words[L]=S}if(M!==0)this.words[L]=M,this.length++;return this},W.prototype.isZero=function _(){return this.length===1&&this.words[0]===0},W.prototype.cmpn=function _(G){var v=G<0;if(this.negative!==0&&!v)return-1;if(this.negative===0&&v)return 1;this._strip();var X;if(this.length>1)X=1;else{if(v)G=-G;H(G<=67108863,"Number is too big");var D=this.words[0]|0;X=D===G?0:D<G?-1:1}if(this.negative!==0)return-X|0;return X},W.prototype.cmp=function _(G){if(this.negative!==0&&G.negative===0)return-1;if(this.negative===0&&G.negative!==0)return 1;var v=this.ucmp(G);if(this.negative!==0)return-v|0;return v},W.prototype.ucmp=function _(G){if(this.length>G.length)return 1;if(this.length<G.length)return-1;var v=0;for(var X=this.length-1;X>=0;X--){var D=this.words[X]|0,M=G.words[X]|0;if(D===M)continue;if(D<M)v=-1;else if(D>M)v=1;break}return v},W.prototype.gtn=function _(G){return this.cmpn(G)===1},W.prototype.gt=function _(G){return this.cmp(G)===1},W.prototype.gten=function _(G){return this.cmpn(G)>=0},W.prototype.gte=function _(G){return this.cmp(G)>=0},W.prototype.ltn=function _(G){return this.cmpn(G)===-1},W.prototype.lt=function _(G){return this.cmp(G)===-1},W.prototype.lten=function _(G){return this.cmpn(G)<=0},W.prototype.lte=function _(G){return this.cmp(G)<=0},W.prototype.eqn=function _(G){return this.cmpn(G)===0},W.prototype.eq=function _(G){return this.cmp(G)===0},W.red=function _(G){return new n(G)},W.prototype.toRed=function _(G){return H(!this.red,"Already a number in reduction context"),H(this.negative===0,"red works only with positives"),G.convertTo(this)._forceRed(G)},W.prototype.fromRed=function _(){return H(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},W.prototype._forceRed=function _(G){return this.red=G,this},W.prototype.forceRed=function _(G){return H(!this.red,"Already a number in reduction context"),this._forceRed(G)},W.prototype.redAdd=function _(G){return H(this.red,"redAdd works only with red numbers"),this.red.add(this,G)},W.prototype.redIAdd=function _(G){return H(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,G)},W.prototype.redSub=function _(G){return H(this.red,"redSub works only with red numbers"),this.red.sub(this,G)},W.prototype.redISub=function _(G){return H(this.red,"redISub works only with red numbers"),this.red.isub(this,G)},W.prototype.redShl=function _(G){return H(this.red,"redShl works only with red numbers"),this.red.shl(this,G)},W.prototype.redMul=function _(G){return H(this.red,"redMul works only with red numbers"),this.red._verify2(this,G),this.red.mul(this,G)},W.prototype.redIMul=function _(G){return H(this.red,"redMul works only with red numbers"),this.red._verify2(this,G),this.red.imul(this,G)},W.prototype.redSqr=function _(){return H(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},W.prototype.redISqr=function _(){return H(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},W.prototype.redSqrt=function _(){return H(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},W.prototype.redInvm=function _(){return H(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},W.prototype.redNeg=function _(){return H(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},W.prototype.redPow=function _(G){return H(this.red&&!G.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,G)};var g={k256:null,p224:null,p192:null,p25519:null};function A(_,G){this.name=_,this.p=new W(G,16),this.n=this.p.bitLength(),this.k=new W(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}A.prototype._tmp=function _(){var G=new W(null);return G.words=new Array(Math.ceil(this.n/13)),G},A.prototype.ireduce=function _(G){var v=G,X;do this.split(v,this.tmp),v=this.imulK(v),v=v.iadd(this.tmp),X=v.bitLength();while(X>this.n);var D=X<this.n?-1:v.ucmp(this.p);if(D===0)v.words[0]=0,v.length=1;else if(D>0)v.isub(this.p);else if(v.strip!==void 0)v.strip();else v._strip();return v},A.prototype.split=function _(G,v){G.iushrn(this.n,0,v)},A.prototype.imulK=function _(G){return G.imul(this.k)};function I(){A.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}Q(I,A),I.prototype.split=function _(G,v){var X=4194303,D=Math.min(G.length,9);for(var M=0;M<D;M++)v.words[M]=G.words[M];if(v.length=D,G.length<=9){G.words[0]=0,G.length=1;return}var L=G.words[9];v.words[v.length++]=L&X;for(M=10;M<G.length;M++){var S=G.words[M]|0;G.words[M-10]=(S&X)<<4|L>>>22,L=S}if(L>>>=22,G.words[M-10]=L,L===0&&G.length>10)G.length-=10;else G.length-=9},I.prototype.imulK=function _(G){G.words[G.length]=0,G.words[G.length+1]=0,G.length+=2;var v=0;for(var X=0;X<G.length;X++){var D=G.words[X]|0;v+=D*977,G.words[X]=v&67108863,v=D*64+(v/67108864|0)}if(G.words[G.length-1]===0){if(G.length--,G.words[G.length-1]===0)G.length--}return G};function T(){A.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}Q(T,A);function u(){A.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}Q(u,A);function a(){A.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}Q(a,A),a.prototype.imulK=function _(G){var v=0;for(var X=0;X<G.length;X++){var D=(G.words[X]|0)*19+v,M=D&67108863;D>>>=26,G.words[X]=M,v=D}if(v!==0)G.words[G.length++]=v;return G},W._prime=function _(G){if(g[G])return g[G];var v;if(G==="k256")v=new I;else if(G==="p224")v=new T;else if(G==="p192")v=new u;else if(G==="p25519")v=new a;else throw new Error("Unknown prime "+G);return g[G]=v,v};function n(_){if(typeof _==="string"){var G=W._prime(_);this.m=G.p,this.prime=G}else H(_.gtn(1),"modulus must be greater than 1"),this.m=_,this.prime=null}n.prototype._verify1=function _(G){H(G.negative===0,"red works only with positives"),H(G.red,"red works only with red numbers")},n.prototype._verify2=function _(G,v){H((G.negative|v.negative)===0,"red works only with positives"),H(G.red&&G.red===v.red,"red works only with red numbers")},n.prototype.imod=function _(G){if(this.prime)return this.prime.ireduce(G)._forceRed(this);return V(G,G.umod(this.m)._forceRed(this)),G},n.prototype.neg=function _(G){if(G.isZero())return G.clone();return this.m.sub(G)._forceRed(this)},n.prototype.add=function _(G,v){this._verify2(G,v);var X=G.add(v);if(X.cmp(this.m)>=0)X.isub(this.m);return X._forceRed(this)},n.prototype.iadd=function _(G,v){this._verify2(G,v);var X=G.iadd(v);if(X.cmp(this.m)>=0)X.isub(this.m);return X},n.prototype.sub=function _(G,v){this._verify2(G,v);var X=G.sub(v);if(X.cmpn(0)<0)X.iadd(this.m);return X._forceRed(this)},n.prototype.isub=function _(G,v){this._verify2(G,v);var X=G.isub(v);if(X.cmpn(0)<0)X.iadd(this.m);return X},n.prototype.shl=function _(G,v){return this._verify1(G),this.imod(G.ushln(v))},n.prototype.imul=function _(G,v){return this._verify2(G,v),this.imod(G.imul(v))},n.prototype.mul=function _(G,v){return this._verify2(G,v),this.imod(G.mul(v))},n.prototype.isqr=function _(G){return this.imul(G,G.clone())},n.prototype.sqr=function _(G){return this.mul(G,G)},n.prototype.sqrt=function _(G){if(G.isZero())return G.clone();var v=this.m.andln(3);if(H(v%2===1),v===3){var X=this.m.add(new W(1)).iushrn(2);return this.pow(G,X)}var D=this.m.subn(1),M=0;while(!D.isZero()&&D.andln(1)===0)M++,D.iushrn(1);H(!D.isZero());var L=new W(1).toRed(this),S=L.redNeg(),R=this.m.subn(1).iushrn(1),F=this.m.bitLength();F=new W(2*F*F).toRed(this);while(this.pow(F,R).cmp(S)!==0)F.redIAdd(S);var E=this.pow(F,D),f=this.pow(G,D.addn(1).iushrn(1)),l=this.pow(G,D),p=M;while(l.cmp(L)!==0){var i=l;for(var D0=0;i.cmp(L)!==0;D0++)i=i.redSqr();H(D0<p);var Q0=this.pow(E,new W(1).iushln(p-D0-1));f=f.redMul(Q0),E=Q0.redSqr(),l=l.redMul(E),p=D0}return f},n.prototype.invm=function _(G){var v=G._invmp(this.m);if(v.negative!==0)return v.negative=0,this.imod(v).redNeg();else return this.imod(v)},n.prototype.pow=function _(G,v){if(v.isZero())return new W(1).toRed(this);if(v.cmpn(1)===0)return G.clone();var X=4,D=new Array(1<<X);D[0]=new W(1).toRed(this),D[1]=G;for(var M=2;M<D.length;M++)D[M]=this.mul(D[M-1],G);var L=D[0],S=0,R=0,F=v.bitLength()%26;if(F===0)F=26;for(M=v.length-1;M>=0;M--){var E=v.words[M];for(var f=F-1;f>=0;f--){var l=E>>f&1;if(L!==D[0])L=this.sqr(L);if(l===0&&S===0){R=0;continue}if(S<<=1,S|=l,R++,R!==X&&(M!==0||f!==0))continue;L=this.mul(L,D[S]),R=0,S=0}F=26}return L},n.prototype.convertTo=function _(G){var v=G.umod(this.m);return v===G?v.clone():v},n.prototype.convertFrom=function _(G){var v=G.clone();return v.red=null,v},W.mont=function _(G){return new Z0(G)};function Z0(_){if(n.call(this,_),this.shift=this.m.bitLength(),this.shift%26!==0)this.shift+=26-this.shift%26;this.r=new W(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}Q(Z0,n),Z0.prototype.convertTo=function _(G){return this.imod(G.ushln(this.shift))},Z0.prototype.convertFrom=function _(G){var v=this.imod(G.mul(this.rinv));return v.red=null,v},Z0.prototype.imul=function _(G,v){if(G.isZero()||v.isZero())return G.words[0]=0,G.length=1,G;var X=G.imul(v),D=X.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=X.isub(D).iushrn(this.shift),L=M;if(M.cmp(this.m)>=0)L=M.isub(this.m);else if(M.cmpn(0)<0)L=M.iadd(this.m);return L._forceRed(this)},Z0.prototype.mul=function _(G,v){if(G.isZero()||v.isZero())return new W(0)._forceRed(this);var X=G.mul(v),D=X.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=X.isub(D).iushrn(this.shift),L=M;if(M.cmp(this.m)>=0)L=M.isub(this.m);else if(M.cmpn(0)<0)L=M.iadd(this.m);return L._forceRed(this)},Z0.prototype.invm=function _(G){var v=this.imod(G._invmp(this.m).mul(this.r2));return v._forceRed(this)}})(typeof U6==="undefined"||U6,zZ)});var EZ=t$((hZ,iQ)=>{/*! decimal.js-light v2.5.1 https://github.com/MikeMcl/decimal.js-light/LICENCE */(function(J){var $=1e9,H={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Q=!0,W="[DecimalError] ",Z=W+"Invalid argument: ",Y=W+"Exponent out of range: ",z=Math.floor,j=Math.pow,V=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,U,C=1e7,q=7,K=9007199254740991,w=z(K/q),O={};O.absoluteValue=O.abs=function(){var X=new this.constructor(this);if(X.s)X.s=1;return X},O.comparedTo=O.cmp=function(X){var D,M,L,S,R=this;if(X=new R.constructor(X),R.s!==X.s)return R.s||-X.s;if(R.e!==X.e)return R.e>X.e^R.s<0?1:-1;L=R.d.length,S=X.d.length;for(D=0,M=L<S?L:S;D<M;++D)if(R.d[D]!==X.d[D])return R.d[D]>X.d[D]^R.s<0?1:-1;return L===S?0:L>S^R.s<0?1:-1},O.decimalPlaces=O.dp=function(){var X=this,D=X.d.length-1,M=(D-X.e)*q;if(D=X.d[D],D)for(;D%10==0;D/=10)M--;return M<0?0:M},O.dividedBy=O.div=function(X){return x(this,new this.constructor(X))},O.dividedToIntegerBy=O.idiv=function(X){var D=this,M=D.constructor;return a(x(D,new M(X),0,1),M.precision)},O.equals=O.eq=function(X){return!this.cmp(X)},O.exponent=function(){return g(this)},O.greaterThan=O.gt=function(X){return this.cmp(X)>0},O.greaterThanOrEqualTo=O.gte=function(X){return this.cmp(X)>=0},O.isInteger=O.isint=function(){return this.e>this.d.length-2},O.isNegative=O.isneg=function(){return this.s<0},O.isPositive=O.ispos=function(){return this.s>0},O.isZero=function(){return this.s===0},O.lessThan=O.lt=function(X){return this.cmp(X)<0},O.lessThanOrEqualTo=O.lte=function(X){return this.cmp(X)<1},O.logarithm=O.log=function(X){var D,M=this,L=M.constructor,S=L.precision,R=S+5;if(X===void 0)X=new L(10);else if(X=new L(X),X.s<1||X.eq(U))throw Error(W+"NaN");if(M.s<1)throw Error(W+(M.s?"NaN":"-Infinity"));if(M.eq(U))return new L(0);return Q=!1,D=x(T(M,R),T(X,R),R),Q=!0,a(D,S)},O.minus=O.sub=function(X){var D=this;return X=new D.constructor(X),D.s==X.s?n(D,X):h(D,(X.s=-X.s,X))},O.modulo=O.mod=function(X){var D,M=this,L=M.constructor,S=L.precision;if(X=new L(X),!X.s)throw Error(W+"NaN");if(!M.s)return a(new L(M),S);return Q=!1,D=x(M,X,0,1).times(X),Q=!0,M.minus(D)},O.naturalExponential=O.exp=function(){return k(this)},O.naturalLogarithm=O.ln=function(){return T(this)},O.negated=O.neg=function(){var X=new this.constructor(this);return X.s=-X.s||0,X},O.plus=O.add=function(X){var D=this;return X=new D.constructor(X),D.s==X.s?h(D,X):n(D,(X.s=-X.s,X))},O.precision=O.sd=function(X){var D,M,L,S=this;if(X!==void 0&&X!==!!X&&X!==1&&X!==0)throw Error(Z+X);if(D=g(S)+1,L=S.d.length-1,M=L*q+1,L=S.d[L],L){for(;L%10==0;L/=10)M--;for(L=S.d[0];L>=10;L/=10)M++}return X&&D>M?D:M},O.squareRoot=O.sqrt=function(){var X,D,M,L,S,R,F,E=this,f=E.constructor;if(E.s<1){if(!E.s)return new f(0);throw Error(W+"NaN")}if(X=g(E),Q=!1,S=Math.sqrt(+E),S==0||S==Infinity){if(D=N(E.d),(D.length+X)%2==0)D+="0";if(S=Math.sqrt(D),X=z((X+1)/2)-(X<0||X%2),S==Infinity)D="5e"+X;else D=S.toExponential(),D=D.slice(0,D.indexOf("e")+1)+X;L=new f(D)}else L=new f(S.toString());M=f.precision,S=F=M+3;for(;;)if(R=L,L=R.plus(x(E,R,F+2)).times(0.5),N(R.d).slice(0,F)===(D=N(L.d)).slice(0,F)){if(D=D.slice(F-3,F+1),S==F&&D=="4999"){if(a(R,M+1,0),R.times(R).eq(E)){L=R;break}}else if(D!="9999")break;F+=4}return Q=!0,a(L,M)},O.times=O.mul=function(X){var D,M,L,S,R,F,E,f,l,p=this,i=p.constructor,D0=p.d,Q0=(X=new i(X)).d;if(!p.s||!X.s)return new i(0);if(X.s*=p.s,M=p.e+X.e,f=D0.length,l=Q0.length,f<l)R=D0,D0=Q0,Q0=R,F=f,f=l,l=F;R=[],F=f+l;for(L=F;L--;)R.push(0);for(L=l;--L>=0;){D=0;for(S=f+L;S>L;)E=R[S]+Q0[L]*D0[S-L-1]+D,R[S--]=E%C|0,D=E/C|0;R[S]=(R[S]+D)%C|0}for(;!R[--F];)R.pop();if(D)++M;else R.shift();return X.d=R,X.e=M,Q?a(X,i.precision):X},O.toDecimalPlaces=O.todp=function(X,D){var M=this,L=M.constructor;if(M=new L(M),X===void 0)return M;if(b(X,0,$),D===void 0)D=L.rounding;else b(D,0,8);return a(M,X+g(M)+1,D)},O.toExponential=function(X,D){var M,L=this,S=L.constructor;if(X===void 0)M=Z0(L,!0);else{if(b(X,0,$),D===void 0)D=S.rounding;else b(D,0,8);L=a(new S(L),X+1,D),M=Z0(L,!0,X+1)}return M},O.toFixed=function(X,D){var M,L,S=this,R=S.constructor;if(X===void 0)return Z0(S);if(b(X,0,$),D===void 0)D=R.rounding;else b(D,0,8);return L=a(new R(S),X+g(S)+1,D),M=Z0(L.abs(),!1,X+g(L)+1),S.isneg()&&!S.isZero()?"-"+M:M},O.toInteger=O.toint=function(){var X=this,D=X.constructor;return a(new D(X),g(X)+1,D.rounding)},O.toNumber=function(){return+this},O.toPower=O.pow=function(X){var D,M,L,S,R,F,E=this,f=E.constructor,l=12,p=+(X=new f(X));if(!X.s)return new f(U);if(E=new f(E),!E.s){if(X.s<1)throw Error(W+"Infinity");return E}if(E.eq(U))return E;if(L=f.precision,X.eq(U))return a(E,L);if(D=X.e,M=X.d.length-1,F=D>=M,R=E.s,!F){if(R<0)throw Error(W+"NaN")}else if((M=p<0?-p:p)<=K){S=new f(U),D=Math.ceil(L/q+4),Q=!1;for(;;){if(M%2)S=S.times(E),_(S.d,D);if(M=z(M/2),M===0)break;E=E.times(E),_(E.d,D)}return Q=!0,X.s<0?new f(U).div(S):a(S,L)}return R=R<0&&X.d[Math.max(D,M)]&1?-1:1,E.s=1,Q=!1,S=X.times(T(E,L+l)),Q=!0,S=k(S),S.s=R,S},O.toPrecision=function(X,D){var M,L,S=this,R=S.constructor;if(X===void 0)M=g(S),L=Z0(S,M<=R.toExpNeg||M>=R.toExpPos);else{if(b(X,1,$),D===void 0)D=R.rounding;else b(D,0,8);S=a(new R(S),X,D),M=g(S),L=Z0(S,X<=M||M<=R.toExpNeg,X)}return L},O.toSignificantDigits=O.tosd=function(X,D){var M=this,L=M.constructor;if(X===void 0)X=L.precision,D=L.rounding;else if(b(X,1,$),D===void 0)D=L.rounding;else b(D,0,8);return a(new L(M),X,D)},O.toString=O.valueOf=O.val=O.toJSON=function(){var X=this,D=g(X),M=X.constructor;return Z0(X,D<=M.toExpNeg||D>=M.toExpPos)};function h(X,D){var M,L,S,R,F,E,f,l,p=X.constructor,i=p.precision;if(!X.s||!D.s){if(!D.s)D=new p(X);return Q?a(D,i):D}if(f=X.d,l=D.d,F=X.e,S=D.e,f=f.slice(),R=F-S,R){if(R<0)L=f,R=-R,E=l.length;else L=l,S=F,E=f.length;if(F=Math.ceil(i/q),E=F>E?F+1:E+1,R>E)R=E,L.length=1;L.reverse();for(;R--;)L.push(0);L.reverse()}if(E=f.length,R=l.length,E-R<0)R=E,L=l,l=f,f=L;for(M=0;R;)M=(f[--R]=f[R]+l[R]+M)/C|0,f[R]%=C;if(M)f.unshift(M),++S;for(E=f.length;f[--E]==0;)f.pop();return D.d=f,D.e=S,Q?a(D,i):D}function b(X,D,M){if(X!==~~X||X<D||X>M)throw Error(Z+X)}function N(X){var D,M,L,S=X.length-1,R="",F=X[0];if(S>0){R+=F;for(D=1;D<S;D++){if(L=X[D]+"",M=q-L.length,M)R+=I(M);R+=L}if(F=X[D],L=F+"",M=q-L.length,M)R+=I(M)}else if(F===0)return"0";for(;F%10===0;)F/=10;return R+F}var x=function(){function X(L,S){var R,F=0,E=L.length;for(L=L.slice();E--;)R=L[E]*S+F,L[E]=R%C|0,F=R/C|0;if(F)L.unshift(F);return L}function D(L,S,R,F){var E,f;if(R!=F)f=R>F?1:-1;else for(E=f=0;E<R;E++)if(L[E]!=S[E]){f=L[E]>S[E]?1:-1;break}return f}function M(L,S,R){var F=0;for(;R--;)L[R]-=F,F=L[R]<S[R]?1:0,L[R]=F*C+L[R]-S[R];for(;!L[0]&&L.length>1;)L.shift()}return function(L,S,R,F){var E,f,l,p,i,D0,Q0,fJ,Y0,q0,n$,N0,s0,e$,l0,a0,iJ,u0,c0=L.constructor,UQ=L.s==S.s?1:-1,b0=L.d,R0=S.d;if(!L.s)return new c0(L);if(!S.s)throw Error(W+"Division by zero");f=L.e-S.e,iJ=R0.length,l0=b0.length,Q0=new c0(UQ),fJ=Q0.d=[];for(l=0;R0[l]==(b0[l]||0);)++l;if(R0[l]>(b0[l]||0))--f;if(R==null)N0=R=c0.precision;else if(F)N0=R+(g(L)-g(S))+1;else N0=R;if(N0<0)return new c0(0);if(N0=N0/q+2|0,l=0,iJ==1){p=0,R0=R0[0],N0++;for(;(l<l0||p)&&N0--;l++)s0=p*C+(b0[l]||0),fJ[l]=s0/R0|0,p=s0%R0|0}else{if(p=C/(R0[0]+1)|0,p>1)R0=X(R0,p),b0=X(b0,p),iJ=R0.length,l0=b0.length;e$=iJ,Y0=b0.slice(0,iJ),q0=Y0.length;for(;q0<iJ;)Y0[q0++]=0;if(u0=R0.slice(),u0.unshift(0),a0=R0[0],R0[1]>=C/2)++a0;do{if(p=0,E=D(R0,Y0,iJ,q0),E<0){if(n$=Y0[0],iJ!=q0)n$=n$*C+(Y0[1]||0);if(p=n$/a0|0,p>1){if(p>=C)p=C-1;if(i=X(R0,p),D0=i.length,q0=Y0.length,E=D(i,Y0,D0,q0),E==1)p--,M(i,iJ<D0?u0:R0,D0)}else{if(p==0)E=p=1;i=R0.slice()}if(D0=i.length,D0<q0)i.unshift(0);if(M(Y0,i,q0),E==-1){if(q0=Y0.length,E=D(R0,Y0,iJ,q0),E<1)p++,M(Y0,iJ<q0?u0:R0,q0)}q0=Y0.length}else if(E===0)p++,Y0=[0];if(fJ[l++]=p,E&&Y0[0])Y0[q0++]=b0[e$]||0;else Y0=[b0[e$]],q0=1}while((e$++<l0||Y0[0]!==void 0)&&N0--)}if(!fJ[0])fJ.shift();return Q0.e=f,a(Q0,F?R+g(Q0)+1:R)}}();function k(X,D){var M,L,S,R,F,E,f=0,l=0,p=X.constructor,i=p.precision;if(g(X)>16)throw Error(Y+g(X));if(!X.s)return new p(U);if(D==null)Q=!1,E=i;else E=D;F=new p(0.03125);while(X.abs().gte(0.1))X=X.times(F),l+=5;L=Math.log(j(2,l))/Math.LN10*2+5|0,E+=L,M=S=R=new p(U),p.precision=E;for(;;){if(S=a(S.times(X),E),M=M.times(++f),F=R.plus(x(S,M,E)),N(F.d).slice(0,E)===N(R.d).slice(0,E)){while(l--)R=a(R.times(R),E);return p.precision=i,D==null?(Q=!0,a(R,i)):R}R=F}}function g(X){var D=X.e*q,M=X.d[0];for(;M>=10;M/=10)D++;return D}function A(X,D,M){if(D>X.LN10.sd()){if(Q=!0,M)X.precision=M;throw Error(W+"LN10 precision limit exceeded")}return a(new X(X.LN10),D)}function I(X){var D="";for(;X--;)D+="0";return D}function T(X,D){var M,L,S,R,F,E,f,l,p,i=1,D0=10,Q0=X,fJ=Q0.d,Y0=Q0.constructor,q0=Y0.precision;if(Q0.s<1)throw Error(W+(Q0.s?"NaN":"-Infinity"));if(Q0.eq(U))return new Y0(0);if(D==null)Q=!1,l=q0;else l=D;if(Q0.eq(10)){if(D==null)Q=!0;return A(Y0,l)}if(l+=D0,Y0.precision=l,M=N(fJ),L=M.charAt(0),R=g(Q0),Math.abs(R)<1500000000000000){while(L<7&&L!=1||L==1&&M.charAt(1)>3)Q0=Q0.times(X),M=N(Q0.d),L=M.charAt(0),i++;if(R=g(Q0),L>1)Q0=new Y0("0."+M),R++;else Q0=new Y0(L+"."+M.slice(1))}else return f=A(Y0,l+2,q0).times(R+""),Q0=T(new Y0(L+"."+M.slice(1)),l-D0).plus(f),Y0.precision=q0,D==null?(Q=!0,a(Q0,q0)):Q0;E=F=Q0=x(Q0.minus(U),Q0.plus(U),l),p=a(Q0.times(Q0),l),S=3;for(;;){if(F=a(F.times(p),l),f=E.plus(x(F,new Y0(S),l)),N(f.d).slice(0,l)===N(E.d).slice(0,l)){if(E=E.times(2),R!==0)E=E.plus(A(Y0,l+2,q0).times(R+""));return E=x(E,new Y0(i),l),Y0.precision=q0,D==null?(Q=!0,a(E,q0)):E}E=f,S+=2}}function u(X,D){var M,L,S;if((M=D.indexOf("."))>-1)D=D.replace(".","");if((L=D.search(/e/i))>0){if(M<0)M=L;M+=+D.slice(L+1),D=D.substring(0,L)}else if(M<0)M=D.length;for(L=0;D.charCodeAt(L)===48;)++L;for(S=D.length;D.charCodeAt(S-1)===48;)--S;if(D=D.slice(L,S),D){if(S-=L,M=M-L-1,X.e=z(M/q),X.d=[],L=(M+1)%q,M<0)L+=q;if(L<S){if(L)X.d.push(+D.slice(0,L));for(S-=q;L<S;)X.d.push(+D.slice(L,L+=q));D=D.slice(L),L=q-D.length}else L-=S;for(;L--;)D+="0";if(X.d.push(+D),Q&&(X.e>w||X.e<-w))throw Error(Y+M)}else X.s=0,X.e=0,X.d=[0];return X}function a(X,D,M){var L,S,R,F,E,f,l,p,i=X.d;for(F=1,R=i[0];R>=10;R/=10)F++;if(L=D-F,L<0)L+=q,S=D,l=i[p=0];else{if(p=Math.ceil((L+1)/q),R=i.length,p>=R)return X;l=R=i[p];for(F=1;R>=10;R/=10)F++;L%=q,S=L-q+F}if(M!==void 0)R=j(10,F-S-1),E=l/R%10|0,f=D<0||i[p+1]!==void 0||l%R,f=M<4?(E||f)&&(M==0||M==(X.s<0?3:2)):E>5||E==5&&(M==4||f||M==6&&(L>0?S>0?l/j(10,F-S):0:i[p-1])%10&1||M==(X.s<0?8:7));if(D<1||!i[0]){if(f)R=g(X),i.length=1,D=D-R-1,i[0]=j(10,(q-D%q)%q),X.e=z(-D/q)||0;else i.length=1,i[0]=X.e=X.s=0;return X}if(L==0)i.length=p,R=1,p--;else i.length=p+1,R=j(10,q-L),i[p]=S>0?(l/j(10,F-S)%j(10,S)|0)*R:0;if(f)for(;;)if(p==0){if((i[0]+=R)==C)i[0]=1,++X.e;break}else{if(i[p]+=R,i[p]!=C)break;i[p--]=0,R=1}for(L=i.length;i[--L]===0;)i.pop();if(Q&&(X.e>w||X.e<-w))throw Error(Y+g(X));return X}function n(X,D){var M,L,S,R,F,E,f,l,p,i,D0=X.constructor,Q0=D0.precision;if(!X.s||!D.s){if(D.s)D.s=-D.s;else D=new D0(X);return Q?a(D,Q0):D}if(f=X.d,i=D.d,L=D.e,l=X.e,f=f.slice(),F=l-L,F){if(p=F<0,p)M=f,F=-F,E=i.length;else M=i,L=l,E=f.length;if(S=Math.max(Math.ceil(Q0/q),E)+2,F>S)F=S,M.length=1;M.reverse();for(S=F;S--;)M.push(0);M.reverse()}else{if(S=f.length,E=i.length,p=S<E,p)E=S;for(S=0;S<E;S++)if(f[S]!=i[S]){p=f[S]<i[S];break}F=0}if(p)M=f,f=i,i=M,D.s=-D.s;E=f.length;for(S=i.length-E;S>0;--S)f[E++]=0;for(S=i.length;S>F;){if(f[--S]<i[S]){for(R=S;R&&f[--R]===0;)f[R]=C-1;--f[R],f[S]+=C}f[S]-=i[S]}for(;f[--E]===0;)f.pop();for(;f[0]===0;f.shift())--L;if(!f[0])return new D0(0);return D.d=f,D.e=L,Q?a(D,Q0):D}function Z0(X,D,M){var L,S=g(X),R=N(X.d),F=R.length;if(D){if(M&&(L=M-F)>0)R=R.charAt(0)+"."+R.slice(1)+I(L);else if(F>1)R=R.charAt(0)+"."+R.slice(1);R=R+(S<0?"e":"e+")+S}else if(S<0){if(R="0."+I(-S-1)+R,M&&(L=M-F)>0)R+=I(L)}else if(S>=F){if(R+=I(S+1-F),M&&(L=M-S-1)>0)R=R+"."+I(L)}else{if((L=S+1)<F)R=R.slice(0,L)+"."+R.slice(L);if(M&&(L=M-F)>0){if(S+1===F)R+=".";R+=I(L)}}return X.s<0?"-"+R:R}function _(X,D){if(X.length>D)return X.length=D,!0}function G(X){var D,M,L;function S(R){var F=this;if(!(F instanceof S))return new S(R);if(F.constructor=S,R instanceof S){F.s=R.s,F.e=R.e,F.d=(R=R.d)?R.slice():R;return}if(typeof R==="number"){if(R*0!==0)throw Error(Z+R);if(R>0)F.s=1;else if(R<0)R=-R,F.s=-1;else{F.s=0,F.e=0,F.d=[0];return}if(R===~~R&&R<1e7){F.e=0,F.d=[R];return}return u(F,R.toString())}else if(typeof R!=="string")throw Error(Z+R);if(R.charCodeAt(0)===45)R=R.slice(1),F.s=-1;else F.s=1;if(V.test(R))u(F,R);else throw Error(Z+R)}if(S.prototype=O,S.ROUND_UP=0,S.ROUND_DOWN=1,S.ROUND_CEIL=2,S.ROUND_FLOOR=3,S.ROUND_HALF_UP=4,S.ROUND_HALF_DOWN=5,S.ROUND_HALF_EVEN=6,S.ROUND_HALF_CEIL=7,S.ROUND_HALF_FLOOR=8,S.clone=G,S.config=S.set=v,X===void 0)X={};if(X){L=["precision","rounding","toExpNeg","toExpPos","LN10"];for(D=0;D<L.length;)if(!X.hasOwnProperty(M=L[D++]))X[M]=this[M]}return S.config(X),S}function v(X){if(!X||typeof X!=="object")throw Error(W+"Object expected");var D,M,L,S=["precision",1,$,"rounding",0,8,"toExpNeg",(-Infinity),0,"toExpPos",0,Infinity];for(D=0;D<S.length;D+=3)if((L=X[M=S[D]])!==void 0)if(z(L)===L&&L>=S[D+1]&&L<=S[D+2])this[M]=L;else throw Error(Z+M+": "+L);if((L=X[M="LN10"])!==void 0)if(L==Math.LN10)this[M]=new this(L);else throw Error(Z+M+": "+L);return this}if(H=G(H),H.default=H.Decimal=H,U=new H(1),typeof define=="function"&&define.amd)define(function(){return H});else if(typeof iQ!="undefined"&&hZ)iQ.exports=H;else{if(!J)J=typeof self!="undefined"&&self&&self.self==self?self:Function("return this")();J.Decimal=H}})(hZ)});var SZ=t$((NG,rQ)=>{var _z=function(J){return J.prototype.toFormat=function $(H,Q,W){if(!this.e&&this.e!==0)return this.toString();var Z,Y,z,j,V,U,C,q,K,w,O,h,b,N,x,k=this.format||{},g=this.constructor.format||{};if(H!=V)if(typeof H=="object")W=H,H=V;else if(Q!=V){if(typeof Q=="object")W=Q,Q=V;else if(typeof W!="object")W={}}else W={};else W={};if(Z=this.toFixed(H,Q).split("."),q=Z[0],K=Z[1],C=this.s<0?q.slice(1):q,U=C.length,w=W.decimalSeparator,w==V){if(w=k.decimalSeparator,w==V){if(w=g.decimalSeparator,w==V)w="."}}if(O=W.groupSeparator,O==V){if(O=k.groupSeparator,O==V)O=g.groupSeparator}if(O){if(h=W.groupSize,h==V){if(h=k.groupSize,h==V){if(h=g.groupSize,h==V)h=0}}if(b=W.secondaryGroupSize,b==V){if(b=k.secondaryGroupSize,b==V){if(b=g.secondaryGroupSize,b==V)b=0}}if(b)Y=+b,z=+h,U-=z;else Y=+h,z=+b;if(Y>0&&U>0){j=U%Y||Y,q=C.substr(0,j);for(;j<U;j+=Y)q+=O+C.substr(j,Y);if(z>0)q+=O+C.slice(j);if(this.s<0)q="-"+q}}if(K){if(N=W.fractionGroupSeparator,N==V){if(N=k.fractionGroupSeparator,N==V)N=g.fractionGroupSeparator}if(N){if(x=W.fractionGroupSize,x==V){if(x=k.fractionGroupSize,x==V){if(x=g.fractionGroupSize,x==V)x=0}}if(x=+x,x)K=K.replace(new RegExp("\\d{"+x+"}\\B","g"),"$&"+N)}return q+w+K}else return q},J.format={decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:"",fractionGroupSize:0},J};if(typeof rQ!=="undefined"&&NG)rQ.exports=_z});import{PublicKey as dH} from"@solana/web3.js";var m=new dH("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),W$=new dH("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb"),tJ=new dH("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),kj=new dH("So11111111111111111111111111111111111111112"),xj=new dH("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");var JH=(J)=>{const $=J.decode.bind(J),H=J.encode.bind(J);return{decode:$,encode:H}};var W6=E0(pJ(),1),f$=E0(PW(),1);var EQ=(J)=>($)=>{const H=W6.blob(J,$),{encode:Q,decode:W}=JH(H),Z=H;return Z.decode=(Y,z)=>{const j=W(Y,z);return f$.toBigIntLE(Buffer.from(j))},Z.encode=(Y,z,j)=>{const V=f$.toBufferLE(Y,J);return Q(V,z,j)},Z},SQ=(J)=>($)=>{const H=W6.blob(J,$),{encode:Q,decode:W}=JH(H),Z=H;return Z.decode=(Y,z)=>{const j=W(Y,z);return f$.toBigIntBE(Buffer.from(j))},Z.encode=(Y,z,j)=>{const V=f$.toBufferBE(Y,J);return Q(V,z,j)},Z},lJ=EQ(8),lj=SQ(8),uj=EQ(16),cj=SQ(16),sj=EQ(24),aj=SQ(24),ij=EQ(32),rj=SQ(32);var NW=E0(pJ(),1);var wQ=(J)=>{const $=NW.u8(J),{encode:H,decode:Q}=JH($),W=$;return W.decode=(Z,Y)=>{return!!Q(Z,Y)},W.encode=(Z,Y,z)=>{const j=Number(Z);return H(j,Y,z)},W};var gW=E0(pJ(),1);import{PublicKey as A4} from"@solana/web3.js";var d0=(J)=>{const $=gW.blob(32,J),{encode:H,decode:Q}=JH($),W=$;return W.decode=(Z,Y)=>{const z=Q(Z,Y);return new A4(z)},W.encode=(Z,Y,z)=>{const j=Z.toBuffer();return H(j,Y,z)},W};class $H extends Error{constructor(J){super(J)}}class HH extends $H{constructor(){super(...arguments);this.name="TokenAccountNotFoundError"}}class Z6 extends $H{constructor(){super(...arguments);this.name="TokenInvalidAccountError"}}class QH extends $H{constructor(){super(...arguments);this.name="TokenInvalidAccountOwnerError"}}class y$ extends $H{constructor(){super(...arguments);this.name="TokenInvalidAccountSizeError"}}class Y6 extends $H{constructor(){super(...arguments);this.name="TokenInvalidMintError"}}class z6 extends $H{constructor(){super(...arguments);this.name="TokenOwnerOffCurveError"}}var rJ;(function(J){J[J.InitializeMint=0]="InitializeMint",J[J.InitializeAccount=1]="InitializeAccount",J[J.InitializeMultisig=2]="InitializeMultisig",J[J.Transfer=3]="Transfer",J[J.Approve=4]="Approve",J[J.Revoke=5]="Revoke",J[J.SetAuthority=6]="SetAuthority",J[J.MintTo=7]="MintTo",J[J.Burn=8]="Burn",J[J.CloseAccount=9]="CloseAccount",J[J.FreezeAccount=10]="FreezeAccount",J[J.ThawAccount=11]="ThawAccount",J[J.TransferChecked=12]="TransferChecked",J[J.ApproveChecked=13]="ApproveChecked",J[J.MintToChecked=14]="MintToChecked",J[J.BurnChecked=15]="BurnChecked",J[J.InitializeAccount2=16]="InitializeAccount2",J[J.SyncNative=17]="SyncNative",J[J.InitializeAccount3=18]="InitializeAccount3",J[J.InitializeMultisig2=19]="InitializeMultisig2",J[J.InitializeMint2=20]="InitializeMint2",J[J.GetAccountDataSize=21]="GetAccountDataSize",J[J.InitializeImmutableOwner=22]="InitializeImmutableOwner",J[J.AmountToUiAmount=23]="AmountToUiAmount",J[J.UiAmountToAmount=24]="UiAmountToAmount",J[J.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",J[J.TransferFeeExtension=26]="TransferFeeExtension",J[J.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",J[J.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",J[J.Reallocate=29]="Reallocate",J[J.MemoTransferExtension=30]="MemoTransferExtension",J[J.CreateNativeMint=31]="CreateNativeMint",J[J.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",J[J.InterestBearingMintExtension=33]="InterestBearingMintExtension",J[J.CpiGuardExtension=34]="CpiGuardExtension",J[J.InitializePermanentDelegate=35]="InitializePermanentDelegate",J[J.TransferHookExtension=36]="TransferHookExtension",J[J.MetadataPointerExtension=39]="MetadataPointerExtension"})(rJ||(rJ={}));import{PublicKey as T4} from"@solana/web3.js";function OH(J,$,H){if(H.length){J.push({pubkey:$,isSigner:!1,isWritable:!1});for(let Q of H)J.push({pubkey:Q instanceof T4?Q:Q.publicKey,isSigner:!0,isWritable:!1})}else J.push({pubkey:$,isSigner:!0,isWritable:!1});return J}var bQ=E0(pJ(),1);import{TransactionInstruction as f4} from"@solana/web3.js";function _Q(J,$,H,Q=[],W=m){const Z=OH([{pubkey:J,isSigner:!1,isWritable:!0},{pubkey:$,isSigner:!1,isWritable:!0}],H,Q),Y=Buffer.alloc(kW.span);return kW.encode({instruction:rJ.CloseAccount},Y),new f4({keys:Z,programId:W,data:Y})}var kW=bQ.struct([bQ.u8("instruction")]);var I$=E0(pJ(),1);var LH;(function(J){J[J.Uninitialized=0]="Uninitialized",J[J.Mint=1]="Mint",J[J.Account=2]="Account"})(LH||(LH={}));var PQ=1;var lH=E0(pJ(),1);var y4=lH.struct([lH.u8("m"),lH.u8("n"),wQ("isInitialized"),d0("signer1"),d0("signer2"),d0("signer3"),d0("signer4"),d0("signer5"),d0("signer6"),d0("signer7"),d0("signer8"),d0("signer9"),d0("signer10"),d0("signer11")]),NQ=y4.span;async function xW(J,$,H,Q=m){const W=await J.getAccountInfo($,H);return I4($,W,Q)}function I4(J,$,H=m){if(!$)throw new HH;if(!$.owner.equals(H))throw new QH;if($.data.length<b$)throw new y$;const Q=_$.decode($.data.slice(0,b$));let W=Buffer.alloc(0);if($.data.length>b$){if($.data.length===NQ)throw new y$;if($.data[b$]!=LH.Account)throw new Z6;W=$.data.slice(b$+PQ)}return{address:J,mint:Q.mint,owner:Q.owner,amount:Q.amount,delegate:Q.delegateOption?Q.delegate:null,delegatedAmount:Q.delegatedAmount,isInitialized:Q.state!==gQ.Uninitialized,isFrozen:Q.state===gQ.Frozen,isNative:!!Q.isNativeOption,rentExemptReserve:Q.isNativeOption?Q.isNative:null,closeAuthority:Q.closeAuthorityOption?Q.closeAuthority:null,tlvData:W}}var gQ;(function(J){J[J.Uninitialized=0]="Uninitialized",J[J.Initialized=1]="Initialized",J[J.Frozen=2]="Frozen"})(gQ||(gQ={}));var _$=I$.struct([d0("mint"),d0("owner"),lJ("amount"),I$.u32("delegateOption"),d0("delegate"),I$.u8("state"),I$.u32("isNativeOption"),lJ("isNative"),lJ("delegatedAmount"),I$.u32("closeAuthorityOption"),d0("closeAuthority")]),b$=_$.span;var WH=E0(pJ(),1);import{PublicKey as AW} from"@solana/web3.js";function fW(J,$,H=m){if(!$)throw new HH;if(!$.owner.equals(H))throw new QH;if($.data.length<j6)throw new y$;const Q=TW.decode($.data.slice(0,j6));let W=Buffer.alloc(0);if($.data.length>j6){if($.data.length<=b$)throw new y$;if($.data.length===NQ)throw new y$;if($.data[b$]!=LH.Mint)throw new Y6;W=$.data.slice(b$+PQ)}return{address:J,mintAuthority:Q.mintAuthorityOption?Q.mintAuthority:null,supply:Q.supply,decimals:Q.decimals,isInitialized:Q.isInitialized,freezeAuthority:Q.freezeAuthorityOption?Q.freezeAuthority:null,tlvData:W}}function kQ(J,$,H=!1,Q=m,W=tJ){if(!H&&!AW.isOnCurve($.toBuffer()))throw new z6;const[Z]=AW.findProgramAddressSync([$.toBuffer(),Q.toBuffer(),J.toBuffer()],W);return Z}var TW=WH.struct([WH.u32("mintAuthorityOption"),d0("mintAuthority"),lJ("supply"),WH.u8("decimals"),wQ("isInitialized"),WH.u32("freezeAuthorityOption"),d0("freezeAuthority")]),j6=TW.span;var KH=E0(pJ(),1);function yW(J){return KH.struct([lJ("epoch"),lJ("maximumFee"),KH.u16("transferFeeBasisPoints")],J)}function mW(J){const $=dW(xQ.TransferFeeConfig,J.tlvData);if($!==null)return IW.decode($);else return null}var m4=1e4,P2=BigInt(m4),IW=KH.struct([d0("transferFeeConfigAuthority"),d0("withdrawWithheldAuthority"),lJ("withheldAmount"),yW("olderTransferFee"),yW("newerTransferFee")]),N2=IW.span,d4=KH.struct([lJ("withheldAmount")]),g2=d4.span;var pW=function(J){return J+lW+p4};function dW(J,$){let H=0;while(pW(H)<=$.length){const Q=$.readUInt16LE(H),W=$.readUInt16LE(H+lW),Z=pW(H);if(Q==J)return $.slice(Z,Z+W);H=Z+W}return null}var xQ;(function(J){J[J.Uninitialized=0]="Uninitialized",J[J.TransferFeeConfig=1]="TransferFeeConfig",J[J.TransferFeeAmount=2]="TransferFeeAmount",J[J.MintCloseAuthority=3]="MintCloseAuthority",J[J.ConfidentialTransferMint=4]="ConfidentialTransferMint",J[J.ConfidentialTransferAccount=5]="ConfidentialTransferAccount",J[J.DefaultAccountState=6]="DefaultAccountState",J[J.ImmutableOwner=7]="ImmutableOwner",J[J.MemoTransfer=8]="MemoTransfer",J[J.NonTransferable=9]="NonTransferable",J[J.InterestBearingConfig=10]="InterestBearingConfig",J[J.CpiGuard=11]="CpiGuard",J[J.PermanentDelegate=12]="PermanentDelegate",J[J.NonTransferableAccount=13]="NonTransferableAccount",J[J.TransferHook=14]="TransferHook",J[J.TransferHookAccount=15]="TransferHookAccount",J[J.MetadataPointer=18]="MetadataPointer",J[J.TokenMetadata=19]="TokenMetadata"})(xQ||(xQ={}));var lW=2,p4=2;var AQ=E0(pJ(),1);import{SYSVAR_RENT_PUBKEY as l4,TransactionInstruction as u4} from"@solana/web3.js";function cW(J,$,H,Q=m){const W=[{pubkey:J,isSigner:!1,isWritable:!0},{pubkey:$,isSigner:!1,isWritable:!1},{pubkey:H,isSigner:!1,isWritable:!1},{pubkey:l4,isSigner:!1,isWritable:!1}],Z=Buffer.alloc(uW.span);return uW.encode({instruction:rJ.InitializeAccount},Z),new u4({keys:W,programId:Q,data:Z})}var uW=AQ.struct([AQ.u8("instruction")]);import{SystemProgram as c4,TransactionInstruction as s4} from"@solana/web3.js";function TQ(J,$,H,Q,W=m,Z=tJ){return a4(J,$,H,Q,Buffer.alloc(0),W,Z)}var a4=function(J,$,H,Q,W,Z=m,Y=tJ){const z=[{pubkey:J,isSigner:!0,isWritable:!0},{pubkey:$,isSigner:!1,isWritable:!0},{pubkey:H,isSigner:!1,isWritable:!1},{pubkey:Q,isSigner:!1,isWritable:!1},{pubkey:c4.programId,isSigner:!1,isWritable:!1},{pubkey:Z,isSigner:!1,isWritable:!1}];return new s4({keys:z,programId:Y,data:W})};var fQ=E0(pJ(),1);import{TransactionInstruction as i4} from"@solana/web3.js";function aW(J,$=m){const H=[{pubkey:J,isSigner:!1,isWritable:!0}],Q=Buffer.alloc(sW.span);return sW.encode({instruction:rJ.SyncNative},Q),new i4({keys:H,programId:$,data:Q})}var sW=fQ.struct([fQ.u8("instruction")]);var yQ=E0(pJ(),1);import{TransactionInstruction as r4} from"@solana/web3.js";function rW(J,$,H,Q,W=[],Z=m){const Y=OH([{pubkey:J,isSigner:!1,isWritable:!0},{pubkey:$,isSigner:!1,isWritable:!0}],H,W),z=Buffer.alloc(iW.span);return iW.encode({instruction:rJ.MintTo,amount:BigInt(Q)},z),new r4({keys:Y,programId:Z,data:z})}var iW=yQ.struct([yQ.u8("instruction"),lJ("amount")]);var IQ=E0(pJ(),1);import{TransactionInstruction as n4} from"@solana/web3.js";function eW(J,$,H,Q,W=[],Z=m){const Y=OH([{pubkey:J,isSigner:!1,isWritable:!0},{pubkey:$,isSigner:!1,isWritable:!0}],H,W),z=Buffer.alloc(nW.span);return nW.encode({instruction:rJ.Transfer,amount:BigInt(Q)},z),new n4({keys:Y,programId:Z,data:z})}var nW=IQ.struct([IQ.u8("instruction"),lJ("amount")]);var hH=E0(pJ(),1);import{PublicKey as e4,SYSVAR_RENT_PUBKEY as t4,TransactionInstruction as o4} from"@solana/web3.js";function oW(J,$,H,Q,W=m){const Z=[{pubkey:J,isSigner:!1,isWritable:!0},{pubkey:t4,isSigner:!1,isWritable:!1}],Y=Buffer.alloc(tW.span);return tW.encode({instruction:rJ.InitializeMint,decimals:$,mintAuthority:H,freezeAuthorityOption:Q?1:0,freezeAuthority:Q||new e4(0)},Y),new o4({keys:Z,programId:W,data:Y})}var tW=hH.struct([hH.u8("instruction"),hH.u8("decimals"),d0("mintAuthority"),hH.u8("freezeAuthorityOption"),d0("freezeAuthority")]);var Jz=function(J){return J instanceof Uint8Array||J!=null&&typeof J==="object"&&J.constructor.name==="Uint8Array"},$z=function(J,...$){if(!Jz(J))throw new Error("Expected Uint8Array");if($.length>0&&!$.includes(J.length))throw new Error(`Expected Uint8Array of length ${$}, not of length=${J.length}`)};var V6=function(J,$=!0){if(J.destroyed)throw new Error("Hash instance has been destroyed");if($&&J.finished)throw new Error("Hash#digest() has already been called")},JZ=function(J,$){$z(J);const H=$.outputLen;if(J.length<H)throw new Error(`digestInto() expects output buffer of length at least ${H}`)};var Hz=function(J){return J instanceof Uint8Array||J!=null&&typeof J==="object"&&J.constructor.name==="Uint8Array"};function Wz(J){if(typeof J!=="string")throw new Error(`utf8ToBytes expected string, got ${typeof J}`);return new Uint8Array((new TextEncoder()).encode(J))}function G6(J){if(typeof J==="string")J=Wz(J);if(!Hz(J))throw new Error(`expected Uint8Array, got ${typeof J}`);return J}function $Z(J){const $=(Q)=>J().update(G6(Q)).digest(),H=J();return $.outputLen=H.outputLen,$.blockLen=H.blockLen,$.create=()=>J(),$}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */var mQ=(J)=>new DataView(J.buffer,J.byteOffset,J.byteLength),j$=(J,$)=>J<<32-$|J>>>$,Qz=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Qz)throw new Error("Non little-endian hardware is not supported");class F6{clone(){return this._cloneInto()}}var GV={}.toString;var Zz=function(J,$,H,Q){if(typeof J.setBigUint64==="function")return J.setBigUint64($,H,Q);const W=BigInt(32),Z=BigInt(4294967295),Y=Number(H>>W&Z),z=Number(H&Z),j=Q?4:0,V=Q?0:4;J.setUint32($+j,Y,Q),J.setUint32($+V,z,Q)};class X6 extends F6{constructor(J,$,H,Q){super();this.blockLen=J,this.outputLen=$,this.padOffset=H,this.isLE=Q,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(J),this.view=mQ(this.buffer)}update(J){V6(this);const{view:$,buffer:H,blockLen:Q}=this;J=G6(J);const W=J.length;for(let Z=0;Z<W;){const Y=Math.min(Q-this.pos,W-Z);if(Y===Q){const z=mQ(J);for(;Q<=W-Z;Z+=Q)this.process(z,Z);continue}if(H.set(J.subarray(Z,Z+Y),this.pos),this.pos+=Y,Z+=Y,this.pos===Q)this.process($,0),this.pos=0}return this.length+=J.length,this.roundClean(),this}digestInto(J){V6(this),JZ(J,this),this.finished=!0;const{buffer:$,view:H,blockLen:Q,isLE:W}=this;let{pos:Z}=this;if($[Z++]=128,this.buffer.subarray(Z).fill(0),this.padOffset>Q-Z)this.process(H,0),Z=0;for(let U=Z;U<Q;U++)$[U]=0;Zz(H,Q-8,BigInt(this.length*8),W),this.process(H,0);const Y=mQ(J),z=this.outputLen;if(z%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const j=z/4,V=this.get();if(j>V.length)throw new Error("_sha2: outputLen bigger than state");for(let U=0;U<j;U++)Y.setUint32(4*U,V[U],W)}digest(){const{buffer:J,outputLen:$}=this;this.digestInto(J);const H=J.slice(0,$);return this.destroy(),H}_cloneInto(J){J||(J=new this.constructor),J.set(...this.get());const{blockLen:$,buffer:H,length:Q,finished:W,destroyed:Z,pos:Y}=this;if(J.length=Q,J.pos=Y,J.finished=W,J.destroyed=Z,Q%$)J.buffer.set(H);return J}}var Yz=(J,$,H)=>J&$^~J&H,zz=(J,$,H)=>J&$^J&H^$&H,jz=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),m$=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),d$=new Uint32Array(64);class HZ extends X6{constructor(){super(64,32,8,!1);this.A=m$[0]|0,this.B=m$[1]|0,this.C=m$[2]|0,this.D=m$[3]|0,this.E=m$[4]|0,this.F=m$[5]|0,this.G=m$[6]|0,this.H=m$[7]|0}get(){const{A:J,B:$,C:H,D:Q,E:W,F:Z,G:Y,H:z}=this;return[J,$,H,Q,W,Z,Y,z]}set(J,$,H,Q,W,Z,Y,z){this.A=J|0,this.B=$|0,this.C=H|0,this.D=Q|0,this.E=W|0,this.F=Z|0,this.G=Y|0,this.H=z|0}process(J,$){for(let U=0;U<16;U++,$+=4)d$[U]=J.getUint32($,!1);for(let U=16;U<64;U++){const C=d$[U-15],q=d$[U-2],K=j$(C,7)^j$(C,18)^C>>>3,w=j$(q,17)^j$(q,19)^q>>>10;d$[U]=w+d$[U-7]+K+d$[U-16]|0}let{A:H,B:Q,C:W,D:Z,E:Y,F:z,G:j,H:V}=this;for(let U=0;U<64;U++){const C=j$(Y,6)^j$(Y,11)^j$(Y,25),q=V+C+Yz(Y,z,j)+jz[U]+d$[U]|0,w=(j$(H,2)^j$(H,13)^j$(H,22))+zz(H,Q,W)|0;V=j,j=z,z=Y,Y=Z+q|0,Z=W,W=Q,Q=H,H=q+w|0}H=H+this.A|0,Q=Q+this.B|0,W=W+this.C|0,Z=Z+this.D|0,Y=Y+this.E|0,z=z+this.F|0,j=j+this.G|0,V=V+this.H|0,this.set(H,Q,W,Z,Y,z,j,V)}roundClean(){d$.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}var QZ=$Z(()=>new HZ);import{Keypair as dz,PublicKey as pz,SystemProgram as lz} from"@solana/web3.js";var YZ=function(){function J($){var H=this;if(!(H instanceof J))return $===q$?YZ():new J($);if($ instanceof J)H.s=$.s,H.e=$.e,H.c=$.c.slice();else{if(typeof $!=="string"){if(J.strict===!0&&typeof $!=="bigint")throw TypeError(YH+"value");$=$===0&&1/$<0?"-0":String($)}vz(H,$)}H.constructor=J}return J.prototype=x0,J.DP=Vz,J.RM=Gz,J.NE=Fz,J.PE=Xz,J.strict=Uz,J.roundDown=0,J.roundHalfUp=1,J.roundHalfEven=2,J.roundUp=3,J},vz=function(J,$){var H,Q,W;if(!qz.test($))throw Error(YH+"number");if(J.s=$.charAt(0)=="-"?($=$.slice(1),-1):1,(H=$.indexOf("."))>-1)$=$.replace(".","");if((Q=$.search(/e/i))>0){if(H<0)H=Q;H+=+$.slice(Q+1),$=$.substring(0,Q)}else if(H<0)H=$.length;W=$.length;for(Q=0;Q<W&&$.charAt(Q)=="0";)++Q;if(Q==W)J.c=[J.e=0];else{for(;W>0&&$.charAt(--W)=="0";);J.e=H-Q-1,J.c=[];for(H=0;Q<=W;)J.c[H++]=+$.charAt(Q++)}return J},zH=function(J,$,H,Q){var W=J.c;if(H===q$)H=J.constructor.RM;if(H!==0&&H!==1&&H!==2&&H!==3)throw Error(Dz);if($<1)if(Q=H===3&&(Q||!!W[0])||$===0&&(H===1&&W[0]>=5||H===2&&(W[0]>5||W[0]===5&&(Q||W[1]!==q$))),W.length=1,Q)J.e=J.e-$+1,W[0]=1;else W[0]=J.e=0;else if($<W.length){if(Q=H===1&&W[$]>=5||H===2&&(W[$]>5||W[$]===5&&(Q||W[$+1]!==q$||W[$-1]&1))||H===3&&(Q||!!W[0]),W.length=$,Q){for(;++W[--$]>9;)if(W[$]=0,$===0){++J.e,W.unshift(1);break}}for($=W.length;!W[--$];)W.pop()}return J},EH=function(J,$,H){var Q=J.e,W=J.c.join(""),Z=W.length;if($)W=W.charAt(0)+(Z>1?"."+W.slice(1):"")+(Q<0?"e":"e+")+Q;else if(Q<0){for(;++Q;)W="0"+W;W="0."+W}else if(Q>0){if(++Q>Z)for(Q-=Z;Q--;)W+="0";else if(Q<Z)W=W.slice(0,Q)+"."+W.slice(Q)}else if(Z>1)W=W.charAt(0)+"."+W.slice(1);return J.s<0&&H?"-"+W:W},Vz=20,Gz=1,ZH=1e6,WZ=1e6,Fz=-7,Xz=21,Uz=!1,uH="[big.js] ",YH=uH+"Invalid ",dQ=YH+"decimal places",Dz=YH+"rounding mode",ZZ=uH+"Division by zero",x0={},q$=void 0,qz=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;x0.abs=function(){var J=new this.constructor(this);return J.s=1,J};x0.cmp=function(J){var $,H=this,Q=H.c,W=(J=new H.constructor(J)).c,Z=H.s,Y=J.s,z=H.e,j=J.e;if(!Q[0]||!W[0])return!Q[0]?!W[0]?0:-Y:Z;if(Z!=Y)return Z;if($=Z<0,z!=j)return z>j^$?1:-1;Y=(z=Q.length)<(j=W.length)?z:j;for(Z=-1;++Z<Y;)if(Q[Z]!=W[Z])return Q[Z]>W[Z]^$?1:-1;return z==j?0:z>j^$?1:-1};x0.div=function(J){var $=this,H=$.constructor,Q=$.c,W=(J=new H(J)).c,Z=$.s==J.s?1:-1,Y=H.DP;if(Y!==~~Y||Y<0||Y>ZH)throw Error(dQ);if(!W[0])throw Error(ZZ);if(!Q[0])return J.s=Z,J.c=[J.e=0],J;var z,j,V,U,C,q=W.slice(),K=z=W.length,w=Q.length,O=Q.slice(0,z),h=O.length,b=J,N=b.c=[],x=0,k=Y+(b.e=$.e-J.e)+1;b.s=Z,Z=k<0?0:k,q.unshift(0);for(;h++<z;)O.push(0);do{for(V=0;V<10;V++){if(z!=(h=O.length))U=z>h?1:-1;else for(C=-1,U=0;++C<z;)if(W[C]!=O[C]){U=W[C]>O[C]?1:-1;break}if(U<0){for(j=h==z?W:q;h;){if(O[--h]<j[h]){C=h;for(;C&&!O[--C];)O[C]=9;--O[C],O[h]+=10}O[h]-=j[h]}for(;!O[0];)O.shift()}else break}if(N[x++]=U?V:++V,O[0]&&U)O[h]=Q[K]||0;else O=[Q[K]]}while((K++<w||O[0]!==q$)&&Z--);if(!N[0]&&x!=1)N.shift(),b.e--,k--;if(x>k)zH(b,k,H.RM,O[0]!==q$);return b};x0.eq=function(J){return this.cmp(J)===0};x0.gt=function(J){return this.cmp(J)>0};x0.gte=function(J){return this.cmp(J)>-1};x0.lt=function(J){return this.cmp(J)<0};x0.lte=function(J){return this.cmp(J)<1};x0.minus=x0.sub=function(J){var $,H,Q,W,Z=this,Y=Z.constructor,z=Z.s,j=(J=new Y(J)).s;if(z!=j)return J.s=-j,Z.plus(J);var V=Z.c.slice(),U=Z.e,C=J.c,q=J.e;if(!V[0]||!C[0]){if(C[0])J.s=-j;else if(V[0])J=new Y(Z);else J.s=1;return J}if(z=U-q){if(W=z<0)z=-z,Q=V;else q=U,Q=C;Q.reverse();for(j=z;j--;)Q.push(0);Q.reverse()}else{H=((W=V.length<C.length)?V:C).length;for(z=j=0;j<H;j++)if(V[j]!=C[j]){W=V[j]<C[j];break}}if(W)Q=V,V=C,C=Q,J.s=-J.s;if((j=(H=C.length)-($=V.length))>0)for(;j--;)V[$++]=0;for(j=$;H>z;){if(V[--H]<C[H]){for($=H;$&&!V[--$];)V[$]=9;--V[$],V[H]+=10}V[H]-=C[H]}for(;V[--j]===0;)V.pop();for(;V[0]===0;)V.shift(),--q;if(!V[0])J.s=1,V=[q=0];return J.c=V,J.e=q,J};x0.mod=function(J){var $,H=this,Q=H.constructor,W=H.s,Z=(J=new Q(J)).s;if(!J.c[0])throw Error(ZZ);if(H.s=J.s=1,$=J.cmp(H)==1,H.s=W,J.s=Z,$)return new Q(H);return W=Q.DP,Z=Q.RM,Q.DP=Q.RM=0,H=H.div(J),Q.DP=W,Q.RM=Z,this.minus(H.times(J))};x0.neg=function(){var J=new this.constructor(this);return J.s=-J.s,J};x0.plus=x0.add=function(J){var $,H,Q,W=this,Z=W.constructor;if(J=new Z(J),W.s!=J.s)return J.s=-J.s,W.minus(J);var{e:Y,c:z}=W,j=J.e,V=J.c;if(!z[0]||!V[0]){if(!V[0])if(z[0])J=new Z(W);else J.s=W.s;return J}if(z=z.slice(),$=Y-j){if($>0)j=Y,Q=V;else $=-$,Q=z;Q.reverse();for(;$--;)Q.push(0);Q.reverse()}if(z.length-V.length<0)Q=V,V=z,z=Q;$=V.length;for(H=0;$;z[$]%=10)H=(z[--$]=z[$]+V[$]+H)/10|0;if(H)z.unshift(H),++j;for($=z.length;z[--$]===0;)z.pop();return J.c=z,J.e=j,J};x0.pow=function(J){var $=this,H=new $.constructor("1"),Q=H,W=J<0;if(J!==~~J||J<-WZ||J>WZ)throw Error(YH+"exponent");if(W)J=-J;for(;;){if(J&1)Q=Q.times($);if(J>>=1,!J)break;$=$.times($)}return W?H.div(Q):Q};x0.prec=function(J,$){if(J!==~~J||J<1||J>ZH)throw Error(YH+"precision");return zH(new this.constructor(this),J,$)};x0.round=function(J,$){if(J===q$)J=0;else if(J!==~~J||J<-ZH||J>ZH)throw Error(dQ);return zH(new this.constructor(this),J+this.e+1,$)};x0.sqrt=function(){var J,$,H,Q=this,W=Q.constructor,Z=Q.s,Y=Q.e,z=new W("0.5");if(!Q.c[0])return new W(Q);if(Z<0)throw Error(uH+"No square root");if(Z=Math.sqrt(Q+""),Z===0||Z===Infinity){if($=Q.c.join(""),!($.length+Y&1))$+="0";Z=Math.sqrt($),Y=((Y+1)/2|0)-(Y<0||Y&1),J=new W((Z==Infinity?"5e":(Z=Z.toExponential()).slice(0,Z.indexOf("e")+1))+Y)}else J=new W(Z+"");Y=J.e+(W.DP+=4);do H=J,J=z.times(H.plus(Q.div(H)));while(H.c.slice(0,Y).join("")!==J.c.slice(0,Y).join(""));return zH(J,(W.DP-=4)+J.e+1,W.RM)};x0.times=x0.mul=function(J){var $,H=this,Q=H.constructor,W=H.c,Z=(J=new Q(J)).c,Y=W.length,z=Z.length,j=H.e,V=J.e;if(J.s=H.s==J.s?1:-1,!W[0]||!Z[0])return J.c=[J.e=0],J;if(J.e=j+V,Y<z)$=W,W=Z,Z=$,V=Y,Y=z,z=V;for($=new Array(V=Y+z);V--;)$[V]=0;for(j=z;j--;){z=0;for(V=Y+j;V>j;)z=$[V]+Z[j]*W[V-j-1]+z,$[V--]=z%10,z=z/10|0;$[V]=z}if(z)++J.e;else $.shift();for(j=$.length;!$[--j];)$.pop();return J.c=$,J};x0.toExponential=function(J,$){var H=this,Q=H.c[0];if(J!==q$){if(J!==~~J||J<0||J>ZH)throw Error(dQ);H=zH(new H.constructor(H),++J,$);for(;H.c.length<J;)H.c.push(0)}return EH(H,!0,!!Q)};x0.toFixed=function(J,$){var H=this,Q=H.c[0];if(J!==q$){if(J!==~~J||J<0||J>ZH)throw Error(dQ);H=zH(new H.constructor(H),J+H.e+1,$);for(J=J+H.e+1;H.c.length<J;)H.c.push(0)}return EH(H,!1,!!Q)};x0[Symbol.for("nodejs.util.inspect.custom")]=x0.toJSON=x0.toString=function(){var J=this,$=J.constructor;return EH(J,J.e<=$.NE||J.e>=$.PE,!!J.c[0])};x0.toNumber=function(){var J=Number(EH(this,!0,!0));if(this.constructor.strict===!0&&!this.eq(J.toString()))throw Error(uH+"Imprecise conversion");return J};x0.toPrecision=function(J,$){var H=this,Q=H.constructor,W=H.c[0];if(J!==q$){if(J!==~~J||J<1||J>ZH)throw Error(YH+"precision");H=zH(new Q(H),J,$);for(;H.c.length<J;)H.c.push(0)}return EH(H,J<=H.e||H.e<=Q.NE||H.e>=Q.PE,!!W)};x0.valueOf=function(){var J=this,$=J.constructor;if($.strict===!0)throw Error(uH+"valueOf disallowed");return EH(J,J.e<=$.NE||J.e>=$.PE,!0)};var Cz=YZ(),pQ=Cz;var eH=E0(EJ(),1);var qZ=E0(EJ(),1);import{PublicKey as Oz} from"@solana/web3.js";import{PublicKey as jH,SystemProgram as Mz} from"@solana/web3.js";import{PublicKey as Rz} from"@solana/web3.js";var D6="1.1.0-beta.6";var Bz=function(){try{const J=[];if(["NFD","NFC","NFKD","NFKC"].forEach(($)=>{try{if("test".normalize($)!=="test")throw new Error("bad normalize")}catch(H){J.push($)}}),J.length)throw new Error("missing "+J.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(J){if(J instanceof Error)return J.message}return""},UZ=function(J,$=!1){let H=J;try{if(J instanceof Uint8Array){let Q="";for(let W=0;W<J.length;W++)Q+=XZ[J[W]>>4],Q+=XZ[J[W]&15];H=`Uint8Array(0x${Q})`}else if(J instanceof Rz)H=`PublicKey(${J.toBase58()})`;else if(J instanceof Object&&!$){const Q={};Object.entries(J).forEach(([W,Z])=>{Q[W]=UZ(Z,!0)}),H=JSON.stringify(Q)}else if(!$)H=JSON.stringify(J)}catch(Q){H=JSON.stringify(J.toString())}return H},jZ=!1,VZ=!1,lQ={debug:1,default:2,info:2,warning:3,error:4,off:5},GZ={},q6,FZ=Bz(),v6;(function(J){J.DEBUG="DEBUG",J.INFO="INFO",J.WARNING="WARNING",J.ERROR="ERROR",J.OFF="OFF"})(v6||(v6={}));var C6;(function(J){J.UNKNOWN_ERROR="UNKNOWN_ERROR",J.NOT_IMPLEMENTED="NOT_IMPLEMENTED",J.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",J.NETWORK_ERROR="NETWORK_ERROR",J.RPC_ERROR="RPC_ERROR",J.TIMEOUT="TIMEOUT",J.BUFFER_OVERRUN="BUFFER_OVERRUN",J.NUMERIC_FAULT="NUMERIC_FAULT",J.MISSING_NEW="MISSING_NEW",J.INVALID_ARGUMENT="INVALID_ARGUMENT",J.MISSING_ARGUMENT="MISSING_ARGUMENT",J.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",J.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS"})(C6||(C6={}));var XZ="0123456789abcdef";class U0{constructor(J){this.version=D6,this.moduleName=J}_log(J,$){const H=J.toLowerCase();if(lQ[H]==null)this.throwArgumentError("invalid log level name","logLevel",J);if((GZ[this.moduleName]||lQ.default)>lQ[H])return;console.log(...$)}debug(...J){this._log(U0.levels.DEBUG,["[DEBUG]",...J])}info(...J){this._log(U0.levels.INFO,["[INFO]",...J])}warn(...J){this._log(U0.levels.WARNING,["[WARN]",...J])}makeError(J,$,H){if(VZ)return this.makeError("censored error",$,{});if(!$)$=U0.errors.UNKNOWN_ERROR;if(!H)H={};const Q=[];Object.entries(H).forEach(([Y,z])=>{Q.push(`${Y}=${UZ(z)})`)}),Q.push(`code=${$}`),Q.push(`module=${this.moduleName}`),Q.push(`version=${this.version}`);const W=J;if(Q.length)J+=" ("+Q.join(", ")+")";const Z=new Error(J);return Z.reason=W,Z.code=$,Object.entries(H).forEach(([Y,z])=>{Z[Y]=z}),Z}throwError(J,$,H){throw this.makeError(J,$,H)}throwArgumentError(J,$,H){return this.throwError(J,U0.errors.INVALID_ARGUMENT,{argument:$,value:H})}assert(J,$,H,Q){if(J)return;this.throwError($,H,Q)}assertArgument(J,$,H,Q){if(J)return;this.throwArgumentError($,H,Q)}checkNormalize(J){if(J==null)J="platform missing String.prototype.normalize";if(FZ)this.throwError("platform missing String.prototype.normalize",U0.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:FZ})}checkSafeUint53(J,$){if(typeof J!=="number")return;if($==null)$="value not safe";if(J<0||J>=9007199254740991)this.throwError($,U0.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:J});if(J%1)this.throwError($,U0.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:J})}checkArgumentCount(J,$,H){if(H)H=": "+H;else H="";if(J<$)this.throwError("missing argument"+H,U0.errors.MISSING_ARGUMENT,{count:J,expectedCount:$});if(J>$)this.throwError("too many arguments"+H,U0.errors.UNEXPECTED_ARGUMENT,{count:J,expectedCount:$})}checkNew(J,$){if(J===Object||J==null)this.throwError("missing new",U0.errors.MISSING_NEW,{name:$.name})}checkAbstract(J,$){if(J===$)this.throwError("cannot instantiate abstract class "+JSON.stringify($.name)+" directly; use a sub-class",U0.errors.UNSUPPORTED_OPERATION,{name:J.name,operation:"new"});else if(J===Object||J==null)this.throwError("missing new",U0.errors.MISSING_NEW,{name:$.name})}static globalLogger(){if(!q6)q6=new U0(D6);return q6}static setCensorship(J,$){if(!J&&$)this.globalLogger().throwError("cannot permanently disable censorship",U0.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"});if(jZ){if(!J)return;this.globalLogger().throwError("error censorship permanent",U0.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}VZ=!!J,jZ=!!$}static setLogLevel(J,$){const H=lQ[$.toLowerCase()];if(H==null){U0.globalLogger().warn("invalid log level - "+$);return}GZ[J]=H}static from(J){return new U0(J)}}U0.errors=C6;U0.levels=v6;import{SYSVAR_CLOCK_PUBKEY as sH,SYSVAR_RENT_PUBKEY as P$} from"@solana/web3.js";function VH(J){if(J instanceof jH)return J;if(typeof J==="string")try{return new jH(J)}catch{return DZ.throwArgumentError("invalid public key","publicKey",J)}return DZ.throwArgumentError("invalid public key","publicKey",J)}function h0(J,$){const[H,Q]=jH.findProgramAddressSync(J,$);return{publicKey:H,nonce:Q}}function y(J,$){return{pubkey:J,isWritable:!0,isSigner:$}}function d(J,$){return{pubkey:J,isWritable:!1,isSigner:$}}var DZ=U0.from("common/pubkey"),t0=Mz.programId,cH=new jH("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),v$=new jH("SysvarRent111111111111111111111111111111111"),SH=new jH("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),uQ=new jH("Sysvar1nstructions1111111111111111111111111");var Lz=function(J){return typeof J==="object"&&J!==null&&![O0,Oz,y0,qZ.BN,Y$,r0,PJ,uJ].some(($)=>typeof $==="object"&&J instanceof $)};function wH(J){return typeof J==="string"?VH(J):Array.isArray(J)?J.map(($)=>wH($)):Lz(J)?Object.fromEntries(Object.entries(J).map(([$,H])=>[$,wH(H)])):J}var Kz=E0(EJ(),1);import{PublicKey as kV} from"@solana/web3.js";function R6(J,$=1,H=[]){const Q=[...J];if($<=0)return H;while(Q.length)H.push(Q.splice(0,$));return H}import{AddressLookupTableAccount as RZ,Keypair as hz,PublicKey as aH,Transaction as B6,TransactionMessage as Ez} from"@solana/web3.js";import{ComputeBudgetProgram as vZ} from"@solana/web3.js";function CZ(J){const $=[],H=[];if(J.microLamports)$.push(vZ.setComputeUnitPrice({microLamports:J.microLamports})),H.push($0.setComputeUnitPrice);if(J.units)$.push(vZ.setComputeUnitLimit({units:J.units})),H.push($0.setComputeUnitLimit);return{address:{},innerTransaction:{instructions:$,signers:[],instructionTypes:H}}}async function J$(J,$,H){const{batchRequest:Q,commitment:W}={...{batchRequest:!1},...H},Z=R6($,100);let Y=new Array(Z.length).fill([]);if(Q){const z=Z.map((U)=>{return{methodName:"getMultipleAccounts",args:J._buildArgs([U.map((q)=>q.toBase58())],W,"base64")}}),j=R6(z,10);Y=(await(await Promise.all(j.map(async(U)=>await J._rpcBatchRequest(U)))).flat()).map((U)=>{if(U.error)return z$.throwError("failed to get info for multiple accounts",U0.errors.RPC_ERROR,{message:U.error.message});return U.result.value.map((C)=>{if(C){const{data:q,executable:K,lamports:w,owner:O,rentEpoch:h}=C;if(q.length!==2&&q[1]!=="base64")return z$.throwError("info must be base64 encoded",U0.errors.RPC_ERROR);return{data:Buffer.from(q[0],"base64"),executable:K,lamports:w,owner:new aH(O),rentEpoch:h}}else return null})})}else try{Y=await Promise.all(Z.map((z)=>J.getMultipleAccountsInfo(z,W)))}catch(z){if(z instanceof Error)return z$.throwError("failed to get info for multiple accounts",U0.errors.RPC_ERROR,{message:z.message})}return Y.flat()}async function FH(J,$,H){const Q=await J$(J,$.map((W)=>W.pubkey),H);return $.map((W,Z)=>({...W,accountInfo:Q[Z]}))}function BZ(J,$){if(J.length<1)return z$.throwArgumentError("no instructions provided","instructions",J);if($.length<1)return z$.throwArgumentError("no signers provided","signers",$);const H=new B6({recentBlockhash:"11111111111111111111111111111111",feePayer:$[0]});H.add(...J);try{return Buffer.from(H.serialize({verifySignatures:!1})).toString("base64").length<MZ}catch(Q){return!1}}async function M6(J,$,H,Q=!0){const W=new aH("RaydiumSimuLateTransaction11111111111111111"),Z=[];let Y=new B6;Y.feePayer=W;for(let V of $){if(!BZ([...Y.instructions,V],[W]))Z.push(Y),Y=new B6,Y.feePayer=W;Y.add(V)}if(Y.instructions.length>0)Z.push(Y);let z=[];try{if(z=await Sz(J,Z,Q),z.find((V)=>V.err!==null))throw Error("rpc simulateTransaction error")}catch(V){if(V instanceof Error)return z$.throwError("failed to simulate for instructions",U0.errors.RPC_ERROR,{message:V.message})}const j=[];for(let V of z)if(z$.debug("simulate result:",V),V.logs){const U=V.logs.filter((C)=>C&&C.includes(H));z$.debug("filteredLog:",j),z$.assertArgument(U.length!==0,"simulate log not match keyword","keyword",H),j.push(...U)}return j}function O6(J,$){const H=J.match(/{["\w:,]+}/g);if(!H||H.length!==1)return z$.throwArgumentError("simulate log fail to match json","keyword",$);return H[0]}function C$(J,$){const Q=new RegExp(`"${$}":(\\d+)`,"g").exec(J);if(!Q||Q.length!==2)return z$.throwArgumentError("simulate log fail to match key","key",$);return Q[1]}async function Sz(J,$,H){let Q=[];if(H){const W=await J.getLatestBlockhash(),Z=[];for(let V of $){V.recentBlockhash=W.blockhash,V.lastValidBlockHeight=W.lastValidBlockHeight;const C=V._compile().serialize(),K=V._serialize(C).toString("base64");Z.push(K)}const Y=Z.map((V)=>{return{methodName:"simulateTransaction",args:J._buildArgs([V],void 0,"base64")}}),z=[],j=20;for(let V=0;V<Math.ceil(Y.length/j);V++)z.push(Y.slice(V*j,(V+1)*j));Q=await(await Promise.all(z.map(async(V)=>{return(await J._rpcBatchRequest(V)).map((C)=>C.result.value)}))).flat()}else try{Q=await Promise.all($.map(async(W)=>await(await J.simulateTransaction(W)).value))}catch(W){if(W instanceof Error)return z$.throwError("failed to get info for multiple accounts",U0.errors.RPC_ERROR,{message:W.message})}return Q}async function L0({connection:J,makeTxVersion:$,innerTransaction:H,lookupTableCache:Q,computeBudgetConfig:W,payer:Z}){const Y=Q??{},z=[...new Set(H.map((K)=>(K.lookupTableAddress??[]).map((w)=>w.toString())).flat())],j=[];for(let K of z)if(Y[K]===void 0)j.push(new aH(K));const V=await OZ({connection:J,address:j});for(let[K,w]of Object.entries(V))Y[K]=w;const U=W?CZ(W).innerTransaction:void 0,C=[];let q=[];for(let K of H){if(K.instructions.length===0)continue;const w=[...q,K],O=U?[U,...w]:w;if(q.length<12&&(cQ({makeTxVersion:$,innerIns:O,payer:Z,lookupTableAddressAccount:Y})||cQ({makeTxVersion:$,innerIns:w,payer:Z,lookupTableAddressAccount:Y})))q.push(K);else{if(q.length===0)throw Error(" item ins too big ");let h=void 0;if($===GH.V0){h={};for(let b of[...new Set(q.map((N)=>N.lookupTableAddress??[]).flat().map((N)=>N.toString()))])if(Y[b]!==void 0)h[b]=Y[b]}if(cQ({makeTxVersion:$,innerIns:U?[U,...q]:q,payer:Z,lookupTableAddressAccount:Y})){const b=U?[U,...q]:q;C.push({instructionTypes:b.map((N)=>N.instructionTypes).flat(),instructions:b.map((N)=>N.instructions).flat(),signers:q.map((N)=>N.signers).flat(),lookupTableAddress:h})}else C.push({instructionTypes:q.map((b)=>b.instructionTypes).flat(),instructions:q.map((b)=>b.instructions).flat(),signers:q.map((b)=>b.signers).flat(),lookupTableAddress:h});q=[K]}}if(q.length>0){let K=void 0;if($===GH.V0){K={};for(let w of[...new Set(q.map((O)=>O.lookupTableAddress??[]).flat().map((O)=>O.toString()))])if(Y[w]!==void 0)K[w]=Y[w]}if(cQ({makeTxVersion:$,innerIns:U?[U,...q]:q,payer:Z,lookupTableAddressAccount:Y})){const w=U?[U,...q]:q;C.push({instructionTypes:w.map((O)=>O.instructionTypes).flat(),instructions:w.map((O)=>O.instructions).flat(),signers:q.map((O)=>O.signers).flat(),lookupTableAddress:K})}else C.push({instructionTypes:q.map((w)=>w.instructionTypes).flat(),instructions:q.map((w)=>w.instructions).flat(),signers:q.map((w)=>w.signers).flat(),lookupTableAddress:K})}return C}var cQ=function({makeTxVersion:J,innerIns:$,payer:H,lookupTableAddressAccount:Q}){const W=$.map((V)=>V.instructions).flat(),Z=[...new Set($.map((V)=>V.signers).flat().map((V)=>V.publicKey.toString()))].map((V)=>new aH(V)),Y=$.map((V)=>V.lookupTableAddress??[]).flat().map((V)=>V.toString()),z={},j=Q??{};for(let V of Y)if(j[V]!==void 0)z[V]=j[V];return J===GH.V0?bz({instructions:W,payer:H,lookupTableAddressAccount:z}):wz({instructions:W,payer:H,signers:Z})},wz=function({instructions:J,payer:$,signers:H}){return BZ(J,[$,...H])},bz=function({instructions:J,payer:$,lookupTableAddressAccount:H}){const W=new Ez({payerKey:$,recentBlockhash:hz.generate().publicKey.toString(),instructions:J}).compileToV0Message(Object.values(H??{}));try{return Buffer.from(W.serialize()).toString("base64").length<MZ}catch(Z){return!1}};async function OZ({connection:J,address:$}){const H=await J$(J,[...new Set($.map((W)=>W.toString()))].map((W)=>new aH(W))),Q={};for(let W=0;W<$.length;W++){const Z=H[W],Y=$[W];if(!Z)continue;Q[Y.toString()]=new RZ({key:Y,state:RZ.deserialize(Z.data)})}return Q}var z$=U0.from("common/web3"),MZ=1644;var iH=E0(EJ(),1);var R$=E0(EJ(),1),nJ;(function(J){J[J.ROUND_DOWN=0]="ROUND_DOWN",J[J.ROUND_HALF_UP=1]="ROUND_HALF_UP",J[J.ROUND_UP=2]="ROUND_UP"})(nJ||(nJ={}));var J0=new R$.default(0),k0=new R$.default(1),JG=new R$.default(2),$G=new R$.default(3),HG=new R$.default(5),XH=new R$.default(10),LZ=new R$.default(100),QG=new R$.default(1000),WG=new R$.default(1e4);function H0(J){if(J instanceof iH.default)return J;if(typeof J==="string"){if(J.match(/^-?[0-9]+$/))return new iH.default(J);return sQ.throwArgumentError("invalid BigNumberish string","value",J)}if(typeof J==="number"){if(J%1)return sQ.throwArgumentError("BigNumberish number underflow","value",J);if(J>=KZ||J<=-KZ)return sQ.throwArgumentError("BigNumberish number overflow","value",J);return new iH.default(String(J))}if(typeof J==="bigint")return new iH.default(J.toString());return sQ.throwArgumentError("invalid BigNumberish value","value",J)}function L6(J){return XH.pow(H0(J))}function aQ(J,$){const H=J.divmod($);if(H.mod.isZero())return H.div;return H.div.isNeg()?H.div.isubn(1):H.div.iaddn(1)}var sQ=U0.from("entity/bignumber"),KZ=9007199254740991;var bH={symbol:"SOL",name:"Solana",decimals:9},SJ={symbol:"WSOL",name:"Wrapped SOL",mint:"So11111111111111111111111111111111111111112",decimals:9,extensions:{coingeckoId:"solana"}};var FG={WSOL:{...SJ}};var B={WSOL:{...SJ},BTC:{symbol:"BTC",name:"Bitcoin",mint:"9n4nbM75f5Ui33ZbPYXn59EwSgE8CGsHtAeTH5YFeJ9E",decimals:6,extensions:{coingeckoId:"bitcoin"}},ETH:{symbol:"ETH",name:"Ethereum",mint:"2FPyTwcZLUg1MDrwsyoP4D6s1tM7hAkHYRjkNb5w6Pxk",decimals:6,extensions:{coingeckoId:"ethereum"}},USDT:{symbol:"USDT",name:"Tether",mint:"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB",decimals:6,extensions:{coingeckoId:"tether"}},WUSDT:{symbol:"WUSDT",name:"Wrapped USDT",mint:"BQcdHdAQW1hczDbBi9hiegXAR7A98Q9jx3X3iBBBDiq4",decimals:6,extensions:{coingeckoId:"tether"}},USDC:{symbol:"USDC",name:"USD Coin",mint:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",decimals:6,extensions:{coingeckoId:"usd-coin"}},WUSDC:{symbol:"WUSDC",name:"Wrapped USDC",mint:"BXXkv6z8ykpG1yuvUDPgh732wzVHB69RnB9YgSYh3itW",decimals:6,extensions:{coingeckoId:"usd-coin"}},YFI:{symbol:"YFI",name:"YFI",mint:"3JSf5tPeuscJGtaCp5giEiDhv51gQ4v3zWg8DGgyLfAB",decimals:6,extensions:{coingeckoId:"yearn-finance"}},LINK:{symbol:"LINK",name:"Chainlink",mint:"CWE8jPTUYhdCTZYWPTe1o5DFqfdjzWKc9WKz6rSjQUdG",decimals:6,extensions:{coingeckoId:"chainlink"}},XRP:{symbol:"XRP",name:"XRP",mint:"Ga2AXHpfAF6mv2ekZwcsJFqu7wB4NV331qNH7fW9Nst8",decimals:6,extensions:{coingeckoId:"ripple"}},SUSHI:{symbol:"SUSHI",name:"SUSHI",mint:"AR1Mtgh7zAtxuxGd2XPovXPVjcSdY3i4rQYisNadjfKy",decimals:6,extensions:{coingeckoId:"sushi"}},ALEPH:{symbol:"ALEPH",name:"ALEPH",mint:"CsZ5LZkDS7h9TDKjrbL7VAwQZ9nsRu8vJLhRYfmGaN8K",decimals:6,extensions:{coingeckoId:"aleph"}},SXP:{symbol:"SXP",name:"SXP",mint:"SF3oTvfWzEP3DTwGSvUXRrGTvr75pdZNnBLAH9bzMuX",decimals:6,extensions:{coingeckoId:"swipe"}},HGET:{symbol:"HGET",name:"HGET",mint:"BtZQfWqDGbk9Wf2rXEiWyQBdBY1etnUUn6zEphvVS7yN",decimals:6,extensions:{coingeckoId:"hedget"}},CREAM:{symbol:"CREAM",name:"CREAM",mint:"5Fu5UUgbjpUvdBveb3a1JTNirL8rXtiYeSMWvKjtUNQv",decimals:6,extensions:{coingeckoId:"cream-2"}},UNI:{symbol:"UNI",name:"UNI",mint:"DEhAasscXF4kEGxFgJ3bq4PpVGp5wyUxMRvn6TzGVHaw",decimals:6,extensions:{coingeckoId:"uniswap"}},SRM:{symbol:"SRM",name:"Serum",mint:"SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt",decimals:6,extensions:{coingeckoId:"serum"}},FTT:{symbol:"FTT",name:"FTX Token",mint:"AGFEad2et2ZJif9jaGpdMixQqvW5i81aBdvKe7PHNfz3",decimals:6,extensions:{coingeckoId:"ftx-token"}},MSRM:{symbol:"MSRM",name:"MegaSerum",mint:"MSRMcoVyrFxnSgo5uXwone5SKcGhT1KEJMFEkMEWf9L",decimals:0,extensions:{coingeckoId:"megaserum"}},TOMO:{symbol:"TOMO",name:"TOMO",mint:"GXMvfY2jpQctDqZ9RoU3oWPhufKiCcFEfchvYumtX7jd",decimals:6,extensions:{coingeckoId:"tomochain"}},KARMA:{symbol:"KARMA",name:"KARMA",mint:"EcqExpGNFBve2i1cMJUTR4bPXj4ZoqmDD2rTkeCcaTFX",decimals:4,extensions:{coingeckoId:"karma-dao"}},LUA:{symbol:"LUA",name:"LUA",mint:"EqWCKXfs3x47uVosDpTRgFniThL9Y8iCztJaapxbEaVX",decimals:6,extensions:{coingeckoId:"lua-token"}},MATH:{symbol:"MATH",name:"MATH",mint:"GeDS162t9yGJuLEHPWXXGrb1zwkzinCgRwnT8vHYjKza",decimals:6,extensions:{coingeckoId:"math"}},KEEP:{symbol:"KEEP",name:"KEEP",mint:"GUohe4DJUA5FKPWo3joiPgsB7yzer7LpDmt1Vhzy3Zht",decimals:6,extensions:{coingeckoId:"keep-network"}},SWAG:{symbol:"SWAG",name:"SWAG",mint:"9F9fNTT6qwjsu4X4yWYKZpsbw5qT7o6yR2i57JF2jagy",decimals:6,extensions:{coingeckoId:"swag-finance"}},FIDA:{symbol:"FIDA",name:"Bonfida",mint:"EchesyfXePKdLtoiZSL8pBe8Myagyy8ZRqsACNCFGnvp",decimals:6,extensions:{coingeckoId:"bonfida"}},KIN:{symbol:"KIN",name:"Kin",mint:"kinXdEcpDQeHPEuQnqmUgtYykqKGVFq6CeVX5iAHJq6",decimals:5,extensions:{coingeckoId:"kin"}},MAPS:{symbol:"MAPS",name:"MAPS",mint:"MAPS41MDahZ9QdKXhVa4dWB9RuyfV4XqhyAZ8XcYepb",decimals:6,extensions:{coingeckoId:"maps"}},OXY:{symbol:"OXY",name:"Oxygen",mint:"z3dn17yLaGMKffVogeFHQ9zWVcXgqgf3PQnDsNs2g6M",decimals:6,extensions:{coingeckoId:"oxygen"}},RAY:{symbol:"RAY",name:"Raydium",mint:"4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R",decimals:6,extensions:{coingeckoId:"raydium"}},xCOPE:{symbol:"xCOPE",name:"xCOPE",mint:"3K6rftdAaQYMPunrtNRHgnK2UAtjm2JwyT2oCiTDouYE",decimals:0,extensions:{coingeckoId:"cope"}},COPE:{symbol:"COPE",name:"Cope",mint:"8HGyAAB1yoM1ttS7pXjHMa3dukTFGQggnFFH3hJZgzQh",decimals:6,extensions:{coingeckoId:"cope"}},STEP:{symbol:"STEP",name:"Step Finance",mint:"StepAscQoEioFxxWGnh2sLBDFp9d8rvKz2Yp39iDpyT",decimals:9,extensions:{coingeckoId:"step-finance"}},MEDIA:{symbol:"MEDIA",name:"Media Network",mint:"ETAtLmCmsoiEEKfNrHKJ2kYy3MoABhU6NQvpSfij5tDs",decimals:6,extensions:{coingeckoId:"media-network"}},ROPE:{symbol:"ROPE",name:"Rope Token",mint:"8PMHT4swUMtBzgHnh5U564N5sjPSiUz2cjEQzFnnP1Fo",decimals:9,extensions:{coingeckoId:"rope-token"}},MER:{symbol:"MER",name:"Mercurial",mint:"MERt85fc5boKw3BW1eYdxonEuJNvXbiMbs6hvheau5K",decimals:6,extensions:{coingeckoId:"mercurial"}},TULIP:{symbol:"TULIP",name:"Tulip Protocol",mint:"TuLipcqtGVXP9XR62wM8WWCm6a9vhLs7T1uoWBk6FDs",decimals:6,extensions:{coingeckoId:"solfarm"}},SNY:{symbol:"SNY",name:"SNY",mint:"4dmKkXNHdgYsXqBHCuMikNQWwVomZURhYvkkX5c4pQ7y",decimals:6,extensions:{coingeckoId:"synthetify-token"}},SLRS:{symbol:"SLRS",name:"SLRS",mint:"SLRSSpSLUTP7okbCUBYStWCo1vUgyt775faPqz8HUMr",decimals:6,extensions:{coingeckoId:"solrise-finance"}},WOO:{symbol:"WOO",name:"WOO Network",mint:"E5rk3nmgLUuKUiS94gg4bpWwWwyjCMtddsAXkTFLtHEy",decimals:6,extensions:{coingeckoId:"woo-network"}},BOP:{symbol:"BOP",name:"Boring Protocol",mint:"BLwTnYKqf7u4qjgZrrsKeNs2EzWkMLqVCu6j8iHyrNA3",decimals:8,extensions:{coingeckoId:"boring-protocol"}},SAMO:{symbol:"SAMO",name:"Samoyedcoin",mint:"7xKXtg2CW87d97TXJSDpbD5jBkheTqA83TZRuJosgAsU",decimals:9,extensions:{coingeckoId:"samoyedcoin"}},renBTC:{symbol:"renBTC",name:"renBTC",mint:"CDJWUqTcYTVAKXAVXoQZFes5JUFc7owSeq7eMQcDSbo5",decimals:8,extensions:{coingeckoId:"renbtc"}},renDOGE:{symbol:"renDOGE",name:"renDOGE",mint:"ArUkYE2XDKzqy77PRRGjo4wREWwqk6RXTfM9NeqzPvjU",decimals:8,extensions:{coingeckoId:"rendoge"}},LIKE:{symbol:"LIKE",name:"Only1",mint:"3bRTivrVsitbmCTGtqwp7hxXPsybkjn4XLNtPsHqa3zR",decimals:9,extensions:{coingeckoId:"only1"}},DXL:{symbol:"DXL",name:"Dexlab",mint:"GsNzxJfFn6zQdJGeYsupJWzUAm57Ba7335mfhWvFiE9Z",decimals:6,extensions:{coingeckoId:"dexlab"}},mSOL:{symbol:"mSOL",name:"Marinade staked SOL",mint:"mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So",decimals:9,extensions:{coingeckoId:"msol"}},PAI:{symbol:"PAI",name:"Parrot USD",mint:"Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS",decimals:6,extensions:{coingeckoId:"parrot-usd"}},PORT:{symbol:"PORT",name:"Port Finance",mint:"PoRTjZMPXb9T7dyU7tpLEZRQj7e6ssfAE62j2oQuc6y",decimals:6,extensions:{coingeckoId:"port-finance"}},MNGO:{symbol:"MNGO",name:"Mango",mint:"MangoCzJ36AjZyKwVj3VnYU4GTonjfVEnJmvvWaxLac",decimals:6,extensions:{coingeckoId:"mango-markets"}},CRP:{symbol:"CRP",name:"CropperFinance",mint:"DubwWZNWiNGMMeeQHPnMATNj77YZPZSAz2WVR5WjLJqz",decimals:9,extensions:{coingeckoId:"cropperfinance"}},ATLAS:{symbol:"ATLAS",name:"Star Atlas",mint:"ATLASXmbPQxBUYbxPsV97usA3fPQYEqzQBUHgiFCUsXx",decimals:8,extensions:{coingeckoId:"star-atlas"}},POLIS:{symbol:"POLIS",name:"Star Atlas DAO",mint:"poLisWXnNRwC6oBu1vHiuKQzFjGL4XDSu4g9qjz9qVk",decimals:8,extensions:{coingeckoId:"star-atlas-dao"}},GRAPE:{symbol:"GRAPE",name:"Grape Protocol",mint:"8upjSpvjcdpuzhfR1zriwg5NXkwDruejqNE9WNbPRtyA",decimals:6,extensions:{coingeckoId:"grape-2"}},GENE:{symbol:"GENE",name:"Genopets",mint:"GENEtH5amGSi8kHAtQoezp1XEXwZJ8vcuePYnXdKrMYz",decimals:9,extensions:{coingeckoId:"genopets"}},DFL:{symbol:"DFL",name:"DeFi Land",mint:"DFL1zNkaGPWm1BqAVqRjCZvHmwTFrEaJtbzJWgseoNJh",decimals:9,extensions:{coingeckoId:"defi-land"}},CHEEMS:{symbol:"CHEEMS",name:"Cheems",mint:"3FoUAsGDbvTD6YZ4wVKJgTB76onJUKz7GPEBNiR5b8wc",decimals:4,extensions:{coingeckoId:"cheems"}},stSOL:{symbol:"stSOL",name:"Lido Staked SOL",mint:"7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj",decimals:9,extensions:{coingeckoId:"lido-staked-sol"}},LARIX:{symbol:"LARIX",name:"Larix",mint:"Lrxqnh6ZHKbGy3dcrCED43nsoLkM1LTzU2jRfWe8qUC",decimals:6,extensions:{coingeckoId:"larix"}},RIN:{symbol:"RIN",name:"Aldrin",mint:"E5ndSkaB17Dm7CsD22dvcjfrYSDLCxFcMd6z8ddCk5wp",decimals:9,extensions:{coingeckoId:"aldrin"}},APEX:{symbol:"APEX",name:"ApeXit Finance",mint:"51tMb3zBKDiQhNwGqpgwbavaGH54mk8fXFzxTc1xnasg",decimals:9,extensions:{coingeckoId:"apexit-finance"}},MNDE:{symbol:"MNDE",name:"Marinade",mint:"MNDEFzGvMt87ueuHvVU9VcTqsAP5b3fTGPsHuuPA5ey",decimals:9,extensions:{coingeckoId:"marinade"}},LIQ:{symbol:"LIQ",name:"LIQ Protocol",mint:"4wjPQJ6PrkC4dHhYghwJzGBVP78DkBzA2U3kHoFNBuhj",decimals:6,extensions:{coingeckoId:"liq-protocol"}},WAG:{symbol:"WAG",name:"Waggle Network",mint:"5tN42n9vMi6ubp67Uy4NnmM5DMZYN8aS8GeB3bEDHr6E",decimals:9,extensions:{coingeckoId:"waggle-network"}},wLDO:{symbol:"wLDO",name:"wLDO",mint:"HZRCwxP2Vq9PCpPXooayhJ2bxTpo5xfpQrwB1svh332p",decimals:8,extensions:{}},SLIM:{symbol:"SLIM",name:"Solanium",mint:"xxxxa1sKNGwFtw2kFn8XauW9xq8hBZ5kVtcSesTT9fW",decimals:6,extensions:{coingeckoId:"solanium"}},PRT:{symbol:"PRT",name:"Parrot Protocol",mint:"PRT88RkA4Kg5z7pKnezeNH4mafTvtQdfFgpQTGRjz44",decimals:6,extensions:{coingeckoId:"parrot-protocol"}},SBR:{symbol:"SBR",name:"SBR",mint:"Saber2gLauYim4Mvftnrasomsv6NvAuncvMEZwcLpD1",decimals:6,extensions:{}},FAB:{symbol:"FAB",name:"Fabric",mint:"EdAhkbj5nF9sRM7XN7ewuW8C9XEUMs8P7cnoQ57SYE96",decimals:9,extensions:{coingeckoId:"fabric"}},ABR:{symbol:"ABR",name:"Allbridge",mint:"a11bdAAuV8iB2fu7X6AxAvDTo1QZ8FXB3kk5eecdasp",decimals:9,extensions:{coingeckoId:"allbridge"}},IVN:{symbol:"IVN",name:"Investin",mint:"iVNcrNE9BRZBC9Aqf753iZiZfbszeAVUoikgT9yvr2a",decimals:6,extensions:{coingeckoId:"investin"}},CYS:{symbol:"CYS",name:"Cyclos",mint:"BRLsMczKuaR5w9vSubF4j8HwEGGprVAyyVgS4EX7DKEg",decimals:6,extensions:{coingeckoId:"cyclos"}},FRKT:{symbol:"FRKT",name:"FRAKT Token",mint:"ErGB9xa24Szxbk1M28u2Tx8rKPqzL6BroNkkzk5rG4zj",decimals:8,extensions:{coingeckoId:"frakt-token"}},AURY:{symbol:"AURY",name:"Aurory",mint:"AURYydfxJib1ZkTir1Jn1J9ECYUtjb6rKQVmtYaixWPP",decimals:9,extensions:{coingeckoId:"aurory"}},SYP:{symbol:"SYP",name:"Sypool",mint:"FnKE9n6aGjQoNWRBZXy4RW6LZVao7qwBonUbiD7edUmZ",decimals:9,extensions:{coingeckoId:"sypool"}},WOOF:{symbol:"WOOF",name:"WOOF",mint:"9nEqaUcb16sQ3Tn1psbkWqyhPdLmfHWjKGymREjsAgTE",decimals:6,extensions:{coingeckoId:"woof-token"}},ORCA:{symbol:"ORCA",name:"Orca",mint:"orcaEKTdK7LKz57vaAYr9QeNsVEPfiu6QeMU1kektZE",decimals:6,extensions:{coingeckoId:"orca"}},SLND:{symbol:"SLND",name:"Solend",mint:"SLNDpmoWTVADgEdndyvWzroNL7zSi1dF9PC3xHGtPwp",decimals:6,extensions:{coingeckoId:"solend"}},weWETH:{symbol:"weWETH",name:"weWETH",mint:"7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs",decimals:8,extensions:{}},weUNI:{symbol:"weUNI",name:"weUNI",mint:"8FU95xFJhUUkyyCLU13HSzDLs7oC4QZdXQHL6SCeab36",decimals:8,extensions:{}},weSUSHI:{symbol:"weSUSHI",name:"weSUSHI",mint:"ChVzxWRmrTeSgwd3Ui3UumcN8KX7VK3WaD4KGeSKpypj",decimals:8,extensions:{}},GOFX:{symbol:"GOFX",name:"GooseFX",mint:"GFX1ZjR2P15tmrSwow6FjyDYcEkoFb4p4gJCpLBjaxHD",decimals:9,extensions:{coingeckoId:"goosefx"}},IN:{symbol:"IN",name:"Invictus",mint:"inL8PMVd6iiW3RCBJnr5AsrRN6nqr4BTrcNuQWQSkvY",decimals:9,extensions:{coingeckoId:"invictus"}},weDYDX:{symbol:"weDYDX",name:"weDYDX",mint:"4Hx6Bj56eGyw8EJrrheM6LBQAvVYRikYCWsALeTrwyRU",decimals:8,extensions:{}},STARS:{symbol:"STARS",name:"StarLaunch",mint:"HCgybxq5Upy8Mccihrp7EsmwwFqYZtrHrsmsKwtGXLgW",decimals:6,extensions:{coingeckoId:"starlaunch"}},weAXS:{symbol:"weAXS",name:"weAXS",mint:"HysWcbHiYY9888pHbaqhwLYZQeZrcQMXKQWRqS7zcPK5",decimals:8,extensions:{}},weSHIB:{symbol:"weSHIB",name:"weSHIB",mint:"CiKu4eHsVrc1eueVQeHn7qhXTcVu95gSQmBpX4utjL9z",decimals:8,extensions:{}},OXS:{symbol:"OXS",name:"Oxbull Solana",mint:"4TGxgCSJQx2GQk9oHZ8dC5m3JNXTYZHjXumKAW3vLnNx",decimals:9,extensions:{coingeckoId:"oxbull-solana"}},CWAR:{symbol:"CWAR",name:"Cryowar",mint:"HfYFjMKNZygfMC8LsQ8LtpPsPxEJoXJx4M6tqi75Hajo",decimals:9,extensions:{coingeckoId:"cryowar-token"}},UPS:{symbol:"UPS",name:"UPFI Network",mint:"EwJN2GqUGXXzYmoAciwuABtorHczTA5LqbukKXV1viH7",decimals:6,extensions:{coingeckoId:"upfi-network"}},weSAND:{symbol:"weSAND",name:"weSAND",mint:"49c7WuCZkQgc3M4qH8WuEUNXfgwupZf1xqWkDQ7gjRGt",decimals:8,extensions:{}},weMANA:{symbol:"weMANA",name:"weMANA",mint:"7dgHoN8wBZCc5wbnQ2C47TDnBMAxG4Q5L3KjP67z8kNi",decimals:8,extensions:{}},CAVE:{symbol:"CAVE",name:"Crypto Cavemen",mint:"4SZjjNABoqhbd4hnapbvoEPEqT8mnNkfbEoAwALf1V8t",decimals:6,extensions:{coingeckoId:"cave"}},JSOL:{symbol:"JSOL",name:"JPool",mint:"7Q2afV64in6N6SeZsAAB81TJzwDoD6zpqmHkzi9Dcavn",decimals:9,extensions:{coingeckoId:"jpool"}},APT:{symbol:"APT",name:"Apricot",mint:"APTtJyaRX5yGTsJU522N4VYWg3vCvSb65eam5GrPT5Rt",decimals:6,extensions:{coingeckoId:"apricot"}},SONAR:{symbol:"SONAR",name:"SonarWatch",mint:"sonarX4VtVkQemriJeLm6CKeW3GDMyiBnnAEMw1MRAE",decimals:9,extensions:{coingeckoId:"sonarwatch"}},SHILL:{symbol:"SHILL",name:"SHILL Token",mint:"6cVgJUqo4nmvQpbgrDZwyfd6RwWw5bfnCamS3M9N1fd",decimals:6,extensions:{coingeckoId:"shill-token"}},TTT:{symbol:"TTT",name:"TabTrader",mint:"FNFKRV3V8DtA3gVJN6UshMiLGYA8izxFwkNWmJbFjmRj",decimals:6,extensions:{coingeckoId:"tabtrader"}},BOKU:{symbol:"BOKU",name:"Boryoku Dragonz",mint:"CN7qFa5iYkHz99PTctvT4xXUHnxwjQ5MHxCuTJtPN5uS",decimals:9,extensions:{coingeckoId:"boku"}},MIMO:{symbol:"MIMO",name:"Million Monke",mint:"9TE7ebz1dsFo1uQ2T4oYAKSm39Y6fWuHrd6Uk6XaiD16",decimals:9,extensions:{coingeckoId:"million-monke"}},wbWBNB:{symbol:"wbWBNB",name:"wbWBNB",mint:"9gP2kCy3wA1ctvYWQk75guqXuHfrEomqydHLtcTCqiLa",decimals:8,extensions:{}},wePEOPLE:{symbol:"wePEOPLE",name:"wePEOPLE",mint:"CobcsUrt3p91FwvULYKorQejgsm5HoQdv5T8RUZ6PnLA",decimals:8,extensions:{}},XTAG:{symbol:"XTAG",name:"xHashtag",mint:"5gs8nf4wojB5EXgDUWNLwXpknzgV2YWDhveAeBZpVLbp",decimals:6,extensions:{coingeckoId:"xhashtag"}},KKO:{symbol:"KKO",name:"Kineko",mint:"kiNeKo77w1WBEzFFCXrTDRWGRWGP8yHvKC9rX6dqjQh",decimals:9,extensions:{coingeckoId:"kineko"}},VI:{symbol:"VI",name:"Vybit",mint:"7zBWymxbZt7PVHQzfi3i85frc1YRiQc23K7bh3gos8ZC",decimals:9,extensions:{coingeckoId:"vybit"}},SOLC:{symbol:"SOLC",name:"Solcubator",mint:"Bx1fDtvTN6NvE4kjdPHQXtmGSg582bZx9fGy4DQNMmAT",decimals:9,extensions:{coingeckoId:"solcubator"}},STR:{symbol:"STR",name:"Solster",mint:"9zoqdwEBKWEi9G5Ze8BSkdmppxGgVv1Kw4LuigDiNr9m",decimals:9,extensions:{coingeckoId:"solster"}},SPWN:{symbol:"SPWN",name:"Bitspawn",mint:"5U9QqCPhqXAJcEv9uyzFJd5zhN93vuPk1aNNkXnUfPnt",decimals:9,extensions:{coingeckoId:"bitspawn"}},ISOLA:{symbol:"ISOLA",name:"Intersola",mint:"333iHoRM2Awhf9uVZtSyTfU8AekdGrgQePZsKMFPgKmS",decimals:6,extensions:{coingeckoId:"intersola"}},RUN:{symbol:"RUN",name:"Run",mint:"6F9XriABHfWhit6zmMUYAQBSy6XK5VF1cHXuW5LDpRtC",decimals:9,extensions:{coingeckoId:"run"}},REAL:{symbol:"REAL",name:"Realy Metaverse",mint:"AD27ov5fVU2XzwsbvnFvb1JpCBaCB5dRXrczV9CqSVGb",decimals:9,extensions:{coingeckoId:"realy-metaverse"}},CRWNY:{symbol:"CRWNY",name:"CRWNY",mint:"CRWNYkqdgvhGGae9CKfNka58j6QQkaD5bLhKXvUYqnc1",decimals:6,extensions:{}},BLOCK:{symbol:"BLOCK",name:"Blockasset",mint:"NFTUkR4u7wKxy9QLaX2TGvd9oZSWoMo4jqSJqdMb7Nk",decimals:6,extensions:{coingeckoId:"blockasset"}},SOLAR:{symbol:"SOLAR",name:"Solar",mint:"2wmKXX1xsxLfrvjEPrt2UHiqj8Gbzwxvffr9qmNjsw8g",decimals:9,extensions:{coingeckoId:"solar"}},BASIS:{symbol:"BASIS",name:"basis.markets",mint:"Basis9oJw9j8cw53oMV7iqsgo6ihi9ALw4QR31rcjUJa",decimals:6,extensions:{coingeckoId:"basis-markets"}},SOLX:{symbol:"SOLX",name:"Soldex",mint:"CH74tuRLTYcxG7qNJCsV9rghfLXJCQJbsu7i52a8F1Gn",decimals:9,extensions:{coingeckoId:"soldex"}},CHICKS:{symbol:"CHICKS",name:"SolChicks Token",mint:"cxxShYRVcepDudXhe7U62QHvw8uBJoKFifmzggGKVC2",decimals:9,extensions:{coingeckoId:"solchicks-token"}},GST:{symbol:"GST",name:"GST",mint:"AFbX8oGjGpmVFywbVouvhQSRmiW2aR1mohfahi4Y2AdB",decimals:9,extensions:{coingeckoId:"gst"}},MBS:{symbol:"MBS",name:"MonkeyBall",mint:"Fm9rHUTF5v3hwMLbStjZXqNBBoZyGriQaFM6sTFz3K8A",decimals:6,extensions:{coingeckoId:"monkeyball"}},PRISM:{symbol:"PRISM",name:"Prism",mint:"PRSMNsEPqhGVCH1TtWiJqPjJyh2cKrLostPZTNy1o5x",decimals:6,extensions:{coingeckoId:"prism"}},MEAN:{symbol:"MEAN",name:"Meanfi",mint:"MEANeD3XDdUmNMsRGjASkSWdC8prLYsoRJ61pPeHctD",decimals:6,extensions:{coingeckoId:"meanfi"}},TINY:{symbol:"TINY",name:"Tiny Colony",mint:"HKfs24UEDQpHS5hUyKYkHd9q7GY5UQ679q2bokeL2whu",decimals:6,extensions:{coingeckoId:"tiny-colony"}},SHDW:{symbol:"SHDW",name:"GenesysGo Shadow",mint:"SHDWyBxihqiCj6YekG2GUr7wqKLeLAMK1gHZck9pL6y",decimals:9,extensions:{coingeckoId:"genesysgo-shadow"}},SCY:{symbol:"SCY",name:"Synchrony",mint:"SCYfrGCw8aDiqdgcpdGjV6jp4UVVQLuphxTDLNWu36f",decimals:9,extensions:{coingeckoId:"synchrony"}},SLC:{symbol:"SLC",name:"Solice",mint:"METAmTMXwdb8gYzyCPfXXFmZZw4rUsXX58PNsDg7zjL",decimals:6,extensions:{coingeckoId:"solice"}}},t={FIDA_RAY_V4:{symbol:"FIDA-RAY",name:"FIDA-RAY V4 LP",mint:"DsBuznXRTmzvEdb36Dx3aVLVo1XmH7r1PRZUFugLPTFv",base:B.FIDA,quote:B.RAY,decimals:B.FIDA.decimals,version:4},OXY_RAY_V4:{symbol:"OXY-RAY",name:"OXY-RAY V4 LP",mint:"FwaX9W7iThTZH5MFeasxdLpxTVxRcM7ZHieTCnYog8Yb",base:B.OXY,quote:B.RAY,decimals:B.OXY.decimals,version:4},MAPS_RAY_V4:{symbol:"MAPS-RAY",name:"MAPS-RAY V4 LP",mint:"CcKK8srfVdTSsFGV3VLBb2YDbzF4T4NM2C3UEjC39RLP",base:B.MAPS,quote:B.RAY,decimals:B.MAPS.decimals,version:4},KIN_RAY_V4:{symbol:"KIN-RAY",name:"KIN-RAY V4 LP",mint:"CHT8sft3h3gpLYbCcZ9o27mT5s3Z6VifBVbUiDvprHPW",base:B.KIN,quote:B.RAY,decimals:6,version:4},RAY_USDT_V4:{symbol:"RAY-USDT",name:"RAY-USDT V4 LP",mint:"C3sT1R3nsw4AVdepvLTLKr5Gvszr7jufyBWUCvy4TUvT",base:B.RAY,quote:B.USDT,decimals:B.RAY.decimals,version:4},SOL_USDC_V4:{symbol:"SOL-USDC",name:"SOL-USDC V4 LP",mint:"8HoQnePLqPj4M7PUDzfw8e3Ymdwgc7NLGnaTUapubyvu",base:B.WSOL,quote:B.USDC,decimals:B.WSOL.decimals,version:4},YFI_USDC_V4:{symbol:"YFI-USDC",name:"YFI-USDC V4 LP",mint:"865j7iMmRRycSYUXzJ33ZcvLiX9JHvaLidasCyUyKaRE",base:B.YFI,quote:B.USDC,decimals:B.YFI.decimals,version:4},SRM_USDC_V4:{symbol:"SRM-USDC",name:"SRM-USDC V4 LP",mint:"9XnZd82j34KxNLgQfz29jGbYdxsYznTWRpvZE3SRE7JG",base:B.SRM,quote:B.USDC,decimals:B.SRM.decimals,version:4},FTT_USDC_V4:{symbol:"FTT-USDC",name:"FTT-USDC V4 LP",mint:"75dCoKfUHLUuZ4qEh46ovsxfgWhB4icc3SintzWRedT9",base:B.FTT,quote:B.USDC,decimals:B.FTT.decimals,version:4},BTC_USDC_V4:{symbol:"BTC-USDC",name:"BTC-USDC V4 LP",mint:"2hMdRdVWZqetQsaHG8kQjdZinEMBz75vsoWTCob1ijXu",base:B.BTC,quote:B.USDC,decimals:B.BTC.decimals,version:4},SUSHI_USDC_V4:{symbol:"SUSHI-USDC",name:"SUSHI-USDC V4 LP",mint:"2QVjeR9d2PbSf8em8NE8zWd8RYHjFtucDUdDgdbDD2h2",base:B.SUSHI,quote:B.USDC,decimals:B.SUSHI.decimals,version:4},TOMO_USDC_V4:{symbol:"TOMO-USDC",name:"TOMO-USDC V4 LP",mint:"CHyUpQFeW456zcr5XEh4RZiibH8Dzocs6Wbgz9aWpXnQ",base:B.TOMO,quote:B.USDC,decimals:B.TOMO.decimals,version:4},LINK_USDC_V4:{symbol:"LINK-USDC",name:"LINK-USDC V4 LP",mint:"BqjoYjqKrXtfBKXeaWeAT5sYCy7wsAYf3XjgDWsHSBRs",base:B.LINK,quote:B.USDC,decimals:B.LINK.decimals,version:4},ETH_USDC_V4:{symbol:"ETH-USDC",name:"ETH-USDC V4 LP",mint:"13PoKid6cZop4sj2GfoBeujnGfthUbTERdE5tpLCDLEY",base:B.ETH,quote:B.USDC,decimals:B.ETH.decimals,version:4},xCOPE_USDC_V4:{symbol:"xCOPE-USDC",name:"xCOPE-USDC V4 LP",mint:"2Vyyeuyd15Gp8aH6uKE72c4hxc8TVSLibxDP9vzspQWG",base:B.xCOPE,quote:B.USDC,decimals:B.xCOPE.decimals,version:4},SOL_USDT_V4:{symbol:"SOL-USDT",name:"SOL-USDT V4 LP",mint:"Epm4KfTj4DMrvqn6Bwg2Tr2N8vhQuNbuK8bESFp4k33K",base:B.WSOL,quote:B.USDT,decimals:B.WSOL.decimals,version:4},YFI_USDT_V4:{symbol:"YFI-USDT",name:"YFI-USDT V4 LP",mint:"FA1i7fej1pAbQbnY8NbyYUsTrWcasTyipKreDgy1Mgku",base:B.YFI,quote:B.USDT,decimals:B.YFI.decimals,version:4},SRM_USDT_V4:{symbol:"SRM-USDT",name:"SRM-USDT V4 LP",mint:"HYSAu42BFejBS77jZAZdNAWa3iVcbSRJSzp3wtqCbWwv",base:B.SRM,quote:B.USDT,decimals:B.SRM.decimals,version:4},FTT_USDT_V4:{symbol:"FTT-USDT",name:"FTT-USDT V4 LP",mint:"2cTCiUnect5Lap2sk19xLby7aajNDYseFhC9Pigou11z",base:B.FTT,quote:B.USDT,decimals:B.FTT.decimals,version:4},BTC_USDT_V4:{symbol:"BTC-USDT",name:"BTC-USDT V4 LP",mint:"DgGuvR9GSHimopo3Gc7gfkbKamLKrdyzWkq5yqA6LqYS",base:B.BTC,quote:B.USDT,decimals:B.BTC.decimals,version:4},SUSHI_USDT_V4:{symbol:"SUSHI-USDT",name:"SUSHI-USDT V4 LP",mint:"Ba26poEYDy6P2o95AJUsewXgZ8DM9BCsmnU9hmC9i4Ki",base:B.SUSHI,quote:B.USDT,decimals:B.SUSHI.decimals,version:4},TOMO_USDT_V4:{symbol:"TOMO-USDT",name:"TOMO-USDT V4 LP",mint:"D3iGro1vn6PWJXo9QAPj3dfta6dKkHHnmiiym2EfsAmi",base:B.TOMO,quote:B.USDT,decimals:B.TOMO.decimals,version:4},LINK_USDT_V4:{symbol:"LINK-USDT",name:"LINK-USDT V4 LP",mint:"Dr12Sgt9gkY8WU5tRkgZf1TkVWJbvjYuPAhR3aDCwiiX",base:B.LINK,quote:B.USDT,decimals:B.LINK.decimals,version:4},ETH_USDT_V4:{symbol:"ETH-USDT",name:"ETH-USDT V4 LP",mint:"nPrB78ETY8661fUgohpuVusNCZnedYCgghzRJzxWnVb",base:B.ETH,quote:B.USDT,decimals:B.ETH.decimals,version:4},YFI_SRM_V4:{symbol:"YFI-SRM",name:"YFI-SRM V4 LP",mint:"EGJht91R7dKpCj8wzALkjmNdUUUcQgodqWCYweyKcRcV",base:B.YFI,quote:B.SRM,decimals:B.YFI.decimals,version:4},FTT_SRM_V4:{symbol:"FTT-SRM",name:"FTT-SRM V4 LP",mint:"AsDuPg9MgPtt3jfoyctUCUgsvwqAN6RZPftqoeiPDefM",base:B.FTT,quote:B.SRM,decimals:B.FTT.decimals,version:4},BTC_SRM_V4:{symbol:"BTC-SRM",name:"BTC-SRM V4 LP",mint:"AGHQxXb3GSzeiLTcLtXMS2D5GGDZxsB2fZYZxSB5weqB",base:B.BTC,quote:B.SRM,decimals:B.BTC.decimals,version:4},SUSHI_SRM_V4:{symbol:"SUSHI-SRM",name:"SUSHI-SRM V4 LP",mint:"3HYhUnUdV67j1vn8fu7ExuVGy5dJozHEyWvqEstDbWwE",base:B.SUSHI,quote:B.SRM,decimals:B.SUSHI.decimals,version:4},TOMO_SRM_V4:{symbol:"TOMO-SRM",name:"TOMO-SRM V4 LP",mint:"GgH9RnKrQpaMQeqmdbMvs5oo1A24hERQ9wuY2pSkeG7x",base:B.TOMO,quote:B.SRM,decimals:B.TOMO.decimals,version:4},LINK_SRM_V4:{symbol:"LINK-SRM",name:"LINK-SRM V4 LP",mint:"GXN6yJv12o18skTmJXaeFXZVY1iqR18CHsmCT8VVCmDD",base:B.LINK,quote:B.SRM,decimals:B.LINK.decimals,version:4},ETH_SRM_V4:{symbol:"ETH-SRM",name:"ETH-SRM V4 LP",mint:"9VoY3VERETuc2FoadMSYYizF26mJinY514ZpEzkHMtwG",base:B.ETH,quote:B.SRM,decimals:B.ETH.decimals,version:4},SRM_SOL_V4:{symbol:"SRM-SOL",name:"SRM-SOL V4 LP",mint:"AKJHspCwDhABucCxNLXUSfEzb7Ny62RqFtC9uNjJi4fq",base:B.SRM,quote:B.WSOL,decimals:B.SRM.decimals,version:4},STEP_USDC_V4:{symbol:"STEP-USDC",name:"STEP-USDC V4 LP",mint:"3k8BDobgihmk72jVmXYLE168bxxQUhqqyESW4dQVktqC",base:B.STEP,quote:B.USDC,decimals:B.STEP.decimals,version:4},MEDIA_USDC_V4:{symbol:"MEDIA-USDC",name:"MEDIA-USDC V4 LP",mint:"A5zanvgtioZGiJMdEyaKN4XQmJsp1p7uVxaq2696REvQ",base:B.MEDIA,quote:B.USDC,decimals:B.MEDIA.decimals,version:4},ROPE_USDC_V4:{symbol:"ROPE-USDC",name:"ROPE-USDC V4 LP",mint:"Cq4HyW5xia37tKejPF2XfZeXQoPYW6KfbPvxvw5eRoUE",base:B.ROPE,quote:B.USDC,decimals:B.ROPE.decimals,version:4},MER_USDC_V4:{symbol:"MER-USDC",name:"MER-USDC V4 LP",mint:"3H9NxvaZoxMZZDZcbBDdWMKbrfNj7PCF5sbRwDr7SdDW",base:B.MER,quote:B.USDC,decimals:B.MER.decimals,version:4},COPE_USDC_V4:{symbol:"COPE-USDC",name:"COPE-USDC V4 LP",mint:"Cz1kUvHw98imKkrqqu95GQB9h1frY8RikxPojMwWKGXf",base:B.COPE,quote:B.USDC,decimals:B.COPE.decimals,version:4},ALEPH_USDC_V4:{symbol:"ALEPH-USDC",name:"ALEPH-USDC V4 LP",mint:"iUDasAP2nXm5wvTukAHEKSdSXn8vQkRtaiShs9ceGB7",base:B.ALEPH,quote:B.USDC,decimals:B.ALEPH.decimals,version:4},TULIP_USDC_V4:{symbol:"TULIP-USDC",name:"TULIP-USDC V4 LP",mint:"2doeZGLJyACtaG9DCUyqMLtswesfje1hjNA11hMdj6YU",base:B.TULIP,quote:B.USDC,decimals:B.TULIP.decimals,version:4},WOO_USDC_V4:{symbol:"WOO-USDC",name:"WOO-USDC V4 LP",mint:"7cu42ao8Jgrd5A3y3bNQsCxq5poyGZNmTydkGfJYQfzh",base:B.WOO,quote:B.USDC,decimals:B.WOO.decimals,version:4},SNY_USDC_V4:{symbol:"SNY-USDC",name:"SNY-USDC V4 LP",mint:"G8qcfeFqxwbCqpxv5LpLWxUCd1PyMB5nWb5e5YyxLMKg",base:B.SNY,quote:B.USDC,decimals:B.SNY.decimals,version:4},BOP_RAY_V4:{symbol:"BOP-RAY",name:"BOP-RAY V4 LP",mint:"9nQPYJvysyfnXhQ6nkK5V7sZG26hmDgusfdNQijRk5LD",base:B.BOP,quote:B.RAY,decimals:B.BOP.decimals,version:4},SLRS_USDC_V4:{symbol:"SLRS-USDC",name:"SLRS-USDC V4 LP",mint:"2Xxbm1hdv5wPeen5ponDSMT3VqhGMTQ7mH9stNXm9shU",base:B.SLRS,quote:B.USDC,decimals:B.SLRS.decimals,version:4},SAMO_RAY_V4:{symbol:"SAMO-RAY",name:"SAMO-RAY V4 LP",mint:"HwzkXyX8B45LsaHXwY8su92NoRBS5GQC32HzjQRDqPnr",base:B.SAMO,quote:B.RAY,decimals:B.SAMO.decimals,version:4},renBTC_USDC_V4:{symbol:"renBTC-USDC",name:"renBTC-USDC V4 LP",mint:"CTEpsih91ZLo5gunvryLpJ3pzMjmt5jbS6AnSQrzYw7V",base:B.renBTC,quote:B.USDC,decimals:B.renBTC.decimals,version:4},renDOGE_USDC_V4:{symbol:"renDOGE-USDC",name:"renDOGE-USDC V4 LP",mint:"Hb8KnZNKvRxu7pgMRWJgoMSMcepfvNiBFFDDrdf9o3wA",base:B.renDOGE,quote:B.USDC,decimals:B.renDOGE.decimals,version:4},RAY_USDC_V4:{symbol:"RAY-USDC",name:"RAY-USDC V4 LP",mint:"FbC6K13MzHvN42bXrtGaWsvZY9fxrackRSZcBGfjPc7m",base:B.RAY,quote:B.USDC,decimals:B.RAY.decimals,version:4},RAY_SRM_V4:{symbol:"RAY-SRM",name:"RAY-SRM V4 LP",mint:"7P5Thr9Egi2rvMmEuQkLn8x8e8Qro7u2U7yLD2tU2Hbe",base:B.RAY,quote:B.SRM,decimals:B.RAY.decimals,version:4},RAY_ETH_V4:{symbol:"RAY-ETH",name:"RAY-ETH V4 LP",mint:"mjQH33MqZv5aKAbKHi8dG3g3qXeRQqq1GFcXceZkNSr",base:B.RAY,quote:B.ETH,decimals:B.RAY.decimals,version:4},RAY_SOL_V4:{symbol:"RAY-SOL",name:"RAY-SOL V4 LP",mint:"89ZKE4aoyfLBe2RuV6jM3JGNhaV18Nxh8eNtjRcndBip",base:B.RAY,quote:B.WSOL,decimals:B.RAY.decimals,version:4},DXL_USDC_V4:{symbol:"DXL-USDC",name:"DXL-USDC V4 LP",mint:"4HFaSvfgskipvrzT1exoVKsUZ174JyExEsA8bDfsAdY5",base:B.DXL,quote:B.USDC,decimals:B.DXL.decimals,version:4},LIKE_USDC_V4:{symbol:"LIKE-USDC",name:"LIKE-USDC V4 LP",mint:"cjZmbt8sJgaoyWYUttomAu5LJYU44ZrcKTbzTSEPDVw",base:B.LIKE,quote:B.USDC,decimals:B.LIKE.decimals,version:4},mSOL_USDC_V4:{symbol:"mSOL-USDC",name:"mSOL-USDC V4 LP",mint:"4xTpJ4p76bAeggXoYywpCCNKfJspbuRzZ79R7pRhbqSf",base:B.mSOL,quote:B.USDC,decimals:B.mSOL.decimals,version:4},mSOL_SOL_V4:{symbol:"mSOL-SOL",name:"mSOL-SOL V4 LP",mint:"5ijRoAHVgd5T5CNtK5KDRUBZ7Bffb69nktMj5n6ks6m4",base:B.mSOL,quote:B.WSOL,decimals:B.mSOL.decimals,version:4},MER_PAI_V4:{symbol:"MER-PAI",name:"MER-PAI V4 LP",mint:"DU5RT2D9EviaSmX6Ta8MZwMm85HwSEqGMRdqUiuCGfmD",base:B.MER,quote:B.PAI,decimals:B.MER.decimals,version:4},PORT_USDC_V4:{symbol:"PORT-USDC",name:"PORT-USDC V4 LP",mint:"9tmNtbUCrLS15qC4tEfr5NNeqcqpZ4uiGgi2vS5CLQBS",base:B.PORT,quote:B.USDC,decimals:B.PORT.decimals,version:4},MNGO_USDC_V4:{symbol:"MNGO-USDC",name:"MNGO-USDC V4 LP",mint:"DkiqCQ792n743xjWQVCbBUaVtkdiuvQeYndM53ReWnCC",base:B.MNGO,quote:B.USDC,decimals:B.MNGO.decimals,version:4},ATLAS_USDC_V4:{symbol:"ATLAS-USDC",name:"ATLAS-USDC V4 LP",mint:"9shGU9f1EsxAbiR567MYZ78WUiS6ZNCYbHe53WUULQ7n",base:B.ATLAS,quote:B.USDC,decimals:B.ATLAS.decimals,version:4},POLIS_USDC_V4:{symbol:"POLIS-USDC",name:"POLIS-USDC V4 LP",mint:"8MbKSBpyXs8fVneKgt71jfHrn5SWtX8n4wMLpiVfF9So",base:B.POLIS,quote:B.USDC,decimals:B.POLIS.decimals,version:4},ATLAS_RAY_V4:{symbol:"ATLAS-RAY",name:"ATLAS-RAY V4 LP",mint:"418MFhkaYQtbn529wmjLLqL6uKxDz7j4eZBaV1cobkyd",base:B.ATLAS,quote:B.RAY,decimals:B.ATLAS.decimals,version:4},POLIS_RAY_V4:{symbol:"POLIS-RAY",name:"POLIS-RAY V4 LP",mint:"9ysGKUH6WqzjQEUT4dxqYCUaFNVK9QFEa24pGzjFq8xg",base:B.POLIS,quote:B.RAY,decimals:B.POLIS.decimals,version:4},ALEPH_RAY_V4:{symbol:"ALEPH-RAY",name:"ALEPH-RAY V4 LP",mint:"n76skjqv4LirhdLok2zJELXNLdRpYDgVJQuQFbamscy",base:B.ALEPH,quote:B.RAY,decimals:B.ALEPH.decimals,version:4},TULIP_RAY_V4:{symbol:"TULIP-RAY",name:"TULIP-RAY V4 LP",mint:"3AZTviji5qduMG2s4FfWGR3SSQmNUCyx8ao6UKCPg3oJ",base:B.TULIP,quote:B.RAY,decimals:B.TULIP.decimals,version:4},SLRS_RAY_V4:{symbol:"SLRS-RAY",name:"SLRS-RAY V4 LP",mint:"2pk78vsKT3jfJAcN2zbpMUnrR57SZrxHqaZYyFgp92mM",base:B.SLRS,quote:B.RAY,decimals:B.SLRS.decimals,version:4},MER_RAY_V4:{symbol:"MER-RAY",name:"MER-RAY V4 LP",mint:"214hxy3AbKoaEKgqcg2aC1cP5R67cGGAyDEg5GDwC7Ub",base:B.MER,quote:B.RAY,decimals:B.MER.decimals,version:4},MEDIA_RAY_V4:{symbol:"MEDIA-RAY",name:"MEDIA-RAY V4 LP",mint:"9Aseg5A1JD1yCiFFdDaNNxCiJ7XzrpZFmcEmLjXFdPaH",base:B.MEDIA,quote:B.RAY,decimals:B.MEDIA.decimals,version:4},SNY_RAY_V4:{symbol:"SNY-RAY",name:"SNY-RAY V4 LP",mint:"2k4quTuuLUxrSEhFH99qcoZzvgvVEc3b5sz3xz3qstfS",base:B.SNY,quote:B.RAY,decimals:B.SNY.decimals,version:4},LIKE_RAY_V4:{symbol:"LIKE-RAY",name:"LIKE-RAY V4 LP",mint:"7xqDycbFSCpUpzkYapFeyPJWPwEpV7zdWbYf2MVHTNjv",base:B.LIKE,quote:B.RAY,decimals:B.LIKE.decimals,version:4},COPE_RAY_V4:{symbol:"COPE-RAY",name:"COPE-RAY V4 LP",mint:"A7GCVHA8NSsbdFscHdoNU41tL1TRKNmCH4K94CgcLK9F",base:B.COPE,quote:B.RAY,decimals:B.COPE.decimals,version:4},ETH_SOL_V4:{symbol:"ETH-SOL",name:"ETH-SOL V4 LP",mint:"GKfgC86iJoMjwAtcyiLu6nWnjggqUXsDQihXkP14fDez",base:B.ETH,quote:B.WSOL,decimals:B.ETH.decimals,version:4},stSOL_USDC_V4:{symbol:"stSOL-USDC",name:"stSOL-USDC V4 LP",mint:"HDUJMwYZkjUZre63xUeDhdCi8c6LgUDiBqxmP3QC3VPX",base:B.stSOL,quote:B.USDC,decimals:B.stSOL.decimals,version:4},GRAPE_USDC_V4:{symbol:"GRAPE-USDC",name:"GRAPE-USDC V4 LP",mint:"A8ZYmnZ1vwxUa4wpJVUaJgegsuTEz5TKy5CiJXffvmpt",base:B.GRAPE,quote:B.USDC,decimals:B.GRAPE.decimals,version:4},LARIX_USDC_V4:{symbol:"LARIX-USDC",name:"LARIX-USDC V4 LP",mint:"7yieit4YsNsZ9CAK8H5ZEMvvk35kPEHHeXwp6naoWU9V",base:B.LARIX,quote:B.USDC,decimals:B.LARIX.decimals,version:4},RIN_USDC_V4:{symbol:"RIN-USDC",name:"RIN-USDC V4 LP",mint:"GfCWfrZez7BDmCSEeMERVDVUaaM2TEreyYUgb2cpuS3w",base:B.RIN,quote:B.USDC,decimals:B.RIN.decimals,version:4},APEX_USDC_V4:{symbol:"APEX-USDC",name:"APEX-USDC V4 LP",mint:"444cVqYyDxJNo6FqiMb9qQWFUd7tYzFRdDuJRFrSAGnU",base:B.APEX,quote:B.USDC,decimals:B.APEX.decimals,version:4},mSOL_RAY_V4:{symbol:"mSOL-RAY",name:"mSOL-RAY V4 LP",mint:"De2EHBAdkgfc72DpShqDGG42cV3iDWh8wvvZdPsiEcqP",base:B.mSOL,quote:B.RAY,decimals:B.mSOL.decimals,version:4},MNDE_mSOL_V4:{symbol:"MNDE-mSOL",name:"MNDE-mSOL V4 LP",mint:"4bh8XCzTHSbqbWN8o1Jn4ueBdz1LvJFoEasN6K6CQ8Ny",base:B.MNDE,quote:B.mSOL,decimals:B.MNDE.decimals,version:4},LARIX_RAY_V4:{symbol:"LARIX-RAY",name:"LARIX-RAY V4 LP",mint:"ZRDfSLgWGeaYSmhdPvFNKQQhDcYdZQaue2N8YDmHX4q",base:B.LARIX,quote:B.RAY,decimals:B.LARIX.decimals,version:4},LIQ_USDC_V4:{symbol:"LIQ-USDC",name:"LIQ-USDC V4 LP",mint:"GWpD3eTfhJB5KDCcnE85dBQrjAk2CsrgDF9b52R9CrjV",base:B.LIQ,quote:B.USDC,decimals:B.LIQ.decimals,version:4},WAG_USDC_V4:{symbol:"WAG-USDC",name:"WAG-USDC V4 LP",mint:"4yykyPugitUVRewNPXXCviRvxGfsfsRMoP32z3b6FmUC",base:B.WAG,quote:B.USDC,decimals:B.WAG.decimals,version:4},ETH_mSOL_V4:{symbol:"ETH-mSOL",name:"ETH-mSOL V4 LP",mint:"HYv3grQfi8QbV7nG7EFgNK1aJSrsJ7HynXJKJVPLL2Uh",base:B.ETH,quote:B.mSOL,decimals:B.ETH.decimals,version:4},mSOL_USDT_V4:{symbol:"mSOL-USDT",name:"mSOL-USDT V4 LP",mint:"69NCmEW9mGpiWLjAcAWHq51k4ionJZmzgRfRT3wQaCCf",base:B.mSOL,quote:B.USDT,decimals:B.mSOL.decimals,version:4},BTC_mSOL_V4:{symbol:"BTC-mSOL",name:"BTC-mSOL V4 LP",mint:"92bcERNtUmuaJ6mwLSxYHZYSph37jdKxRdoYNxpcYNPp",base:B.BTC,quote:B.mSOL,decimals:B.BTC.decimals,version:4},SLIM_SOL_V4:{symbol:"SLIM-SOL",name:"SLIM-SOL V4 LP",mint:"9X4EK8E59VAVi6ChnNvvd39m6Yg9RtkBbAPq1mDVJT57",base:B.SLIM,quote:B.WSOL,decimals:B.SLIM.decimals,version:4},AURY_USDC_V4:{symbol:"AURY-USDC",name:"AURY-USDC V4 LP",mint:"Gub5dvTy4nzP82qpmpNkBxmRqjtqRddBTBqHSdNcf2oS",base:B.AURY,quote:B.USDC,decimals:B.AURY.decimals,version:4},PRT_SOL_V4:{symbol:"PRT-SOL",name:"PRT-SOL V4 LP",mint:"EcJ8Wgwt1AzSPiDpVr6aaSur8TKAsNTPmmzRACeqT68Z",base:B.PRT,quote:B.WSOL,decimals:B.PRT.decimals,version:4},LIQ_RAY_V4:{symbol:"LIQ-RAY",name:"LIQ-RAY V4 LP",mint:"49YUsDrThJosHSagCn1F59Uc9NRxbr9thVrZikUnQDXy",base:B.LIQ,quote:B.RAY,decimals:B.LIQ.decimals,version:4},SYP_SOL_V4:{symbol:"SYP-SOL",name:"SYP-SOL V4 LP",mint:"KHV6dfj2bDntzJ9z1S26cDfqWfUZdJRFmteLR6LxHwW",base:B.SYP,quote:B.WSOL,decimals:B.SYP.decimals,version:4},SYP_RAY_V4:{symbol:"SYP-RAY",name:"SYP-RAY V4 LP",mint:"FT2KZqxxM8F2h9pZtTF4PyjK88bM4YbuBzd7ZPwQ5wMB",base:B.SYP,quote:B.RAY,decimals:B.SYP.decimals,version:4},SYP_USDC_V4:{symbol:"SYP-USDC",name:"SYP-USDC V4 LP",mint:"2xJGuLAivAR1WkARRA6zP1v4jaA9jV2Qis8JfMNvrVyZ",base:B.SYP,quote:B.USDC,decimals:B.SYP.decimals,version:4},FAB_USDC_V4:{symbol:"FAB-USDC",name:"FAB-USDC V4 LP",mint:"5rTCvZq6BcApsC3VV1EEUuTJfaVd8uYhcGjwTy1By6P8",base:B.FAB,quote:B.USDC,decimals:B.FAB.decimals,version:4},WOOF_RAY_V4:{symbol:"WOOF-RAY",name:"WOOF-RAY V4 LP",mint:"H2FAnazDaGFutcmnrwDxhmdncR1Bd7GG4mhPCSUiamDX",base:B.WOOF,quote:B.RAY,decimals:B.WOOF.decimals,version:4},WOOF_USDC_V4:{symbol:"WOOF-USDC",name:"WOOF-USDC V4 LP",mint:"EFSu5TMc1ijRevaYCxUkS7uGvbhsymDHEaTK3UVdNE3q",base:B.WOOF,quote:B.USDC,decimals:B.WOOF.decimals,version:4},SLND_USDC_V4:{symbol:"SLND-USDC",name:"SLND-USDC V4 LP",mint:"EunE9uDh2cGsyJcsGuGKc6wte7kBn8iye2gzC4w2ePHn",base:B.SLND,quote:B.USDC,decimals:B.SLND.decimals,version:4},FRKT_SOL_V4:{symbol:"FRKT-SOL",name:"FRKT-SOL V4 LP",mint:"HYUKXgpjaxMXHttyrFYtv3z2rdhZ1U9QDH8zEc8BooQC",base:B.FRKT,quote:B.WSOL,decimals:B.FRKT.decimals,version:4},weWETH_SOL_V4:{symbol:"weWETH-SOL",name:"weWETH-SOL V4 LP",mint:"3hbozt2Por7bcrGod8N7kEeJNMocFFjCJrQR16TQGBrE",base:B.weWETH,quote:B.WSOL,decimals:B.weWETH.decimals,version:4},weWETH_USDC_V4:{symbol:"weWETH-USDC",name:"weWETH-USDC V4 LP",mint:"3529SBnMCDW3S3xQ52aABbRHo7PcHvpQA4no8J12L5eK",base:B.weWETH,quote:B.USDC,decimals:B.weWETH.decimals,version:4},weUNI_USDC_V4:{symbol:"weUNI-USDC",name:"weUNI-USDC V4 LP",mint:"EEC4QnT41py39QaYnzQnoYQEtDUDNa6Se8SBDgfPSN2a",base:B.weUNI,quote:B.USDC,decimals:B.weUNI.decimals,version:4},weSUSHI_USDC_V4:{symbol:"weSUSHI-USDC",name:"weSUSHI-USDC V4 LP",mint:"3wVrtQZsiDNp5yTPyfEzQHPU6iuJoMmpnWg6CTt4V8sR",base:B.weSUSHI,quote:B.USDC,decimals:B.weSUSHI.decimals,version:4},CYS_USDC_V4:{symbol:"CYS-USDC",name:"CYS-USDC V4 LP",mint:"GfV3QDzzdVUwCNSdfn6PjhmyJvjw18tn51RingWZYwk3",base:B.CYS,quote:B.USDC,decimals:B.CYS.decimals,version:4},SAMO_USDC_V4:{symbol:"SAMO-USDC",name:"SAMO-USDC V4 LP",mint:"B2PjGEP3vPf1999fUD14pYdxvSDRVBk43hxB2rgthwEY",base:B.SAMO,quote:B.USDC,decimals:B.SAMO.decimals,version:4},ABR_USDC_V4:{symbol:"ABR-USDC",name:"ABR-USDC V4 LP",mint:"ECHfxkf5zjjZFTX95QfFahNyzG7feyEKcfTdjsdrMSGU",base:B.ABR,quote:B.USDC,decimals:B.ABR.decimals,version:4},IN_USDC_V4:{symbol:"IN-USDC",name:"IN-USDC V4 LP",mint:"GbmJtVgg9fRmmmjKUYGMZeSt8wZ47cDDXasg5Y3iF4kz",base:B.IN,quote:B.USDC,decimals:B.IN.decimals,version:4},weDYDX_USDC_V4:{symbol:"weDYDX-USDC",name:"weDYDX-USDC V4 LP",mint:"BjkkMZnnzmgLqzGErzDbkk15ozv48iVKQuunpeM2Hqnk",base:B.weDYDX,quote:B.USDC,decimals:B.weDYDX.decimals,version:4},STARS_USDC_V4:{symbol:"STARS-USDC",name:"STARS-USDC V4 LP",mint:"FJ68q7NChhETcGVdinMbM2FF1Cy79dpmUi6HC83K55Hv",base:B.STARS,quote:B.USDC,decimals:B.STARS.decimals,version:4},weAXS_USDC_V4:{symbol:"weAXS-USDC",name:"weAXS-USDC V4 LP",mint:"6PSoJQ7myQ1BJtbQC6oiWR8HSecQGyoWsPYTZRJo2ci3",base:B.weAXS,quote:B.USDC,decimals:B.weAXS.decimals,version:4},weSHIB_USDC_V4:{symbol:"weSHIB-USDC",name:"weSHIB-USDC V4 LP",mint:"AcjX5pmTMGSgxkdxc3r82r6WMKBvS6eQXXFz5ck5KKUa",base:B.weSHIB,quote:B.USDC,decimals:B.weSHIB.decimals,version:4},SBR_USDC_V4:{symbol:"SBR-USDC",name:"SBR-USDC V4 LP",mint:"9FC8xTFRbgTpuZZYAYnZLxgnQ8r7FwfSBM1SWvGwgF7s",base:B.SBR,quote:B.USDC,decimals:B.SBR.decimals,version:4},OXS_USDC_V4:{symbol:"OXS-USDC",name:"OXS-USDC V4 LP",mint:"et9pdjWm97rbmsJoN183GkFV5qzTGru79GE1Zhe7NTU",base:B.OXS,quote:B.USDC,decimals:B.OXS.decimals,version:4},CWAR_USDC_V4:{symbol:"CWAR-USDC",name:"CWAR-USDC V4 LP",mint:"HjR23bxn2gtRDB2P1Tm3DLepAPPZgazsWJpLG9wqjnYR",base:B.CWAR,quote:B.USDC,decimals:B.CWAR.decimals,version:4},UPS_USDC_V4:{symbol:"UPS-USDC",name:"UPS-USDC V4 LP",mint:"9hSUZdREEsbaYaKY4FouvXr7xyAqtpdHRDoYCb6Mb28a",base:B.UPS,quote:B.USDC,decimals:B.UPS.decimals,version:4},weSAND_USDC_V4:{symbol:"weSAND-USDC",name:"weSAND-USDC V4 LP",mint:"3dADrQa7utyiCsaFeVk9r7oebW1WheowhKo5soBYKBVT",base:B.weSAND,quote:B.USDC,decimals:B.weSAND.decimals,version:4},weMANA_USDC_V4:{symbol:"weMANA-USDC",name:"weMANA-USDC V4 LP",mint:"HpUkVAPRJ5zNRuJ1ZwMXEhbMHL3gSuPb2QuSER9YUd3a",base:B.weMANA,quote:B.USDC,decimals:B.weMANA.decimals,version:4},CAVE_USDC_V4:{symbol:"CAVE-USDC",name:"CAVE-USDC V4 LP",mint:"5Gba1k3fU7Vh7UtAiBmie9vhQNNq1JfEwgn1DPGZ7NKQ",base:B.CAVE,quote:B.USDC,decimals:B.CAVE.decimals,version:4},GENE_USDC_V4:{symbol:"GENE-USDC",name:"GENE-USDC V4 LP",mint:"7GKvfHEXenNiWYbJBKae89mdaMPr5gGMYwZmyC8gBNVG",base:B.GENE,quote:B.USDC,decimals:B.GENE.decimals,version:4},GENE_RAY_V4:{symbol:"GENE-RAY",name:"GENE-RAY V4 LP",mint:"3HzXnc1qZ8mGqun18Ck3KA616XnZNqF1RWbgYE2nGRMA",base:B.GENE,quote:B.RAY,decimals:B.GENE.decimals,version:4},APT_USDC_V4:{symbol:"APT-USDC",name:"APT-USDC V4 LP",mint:"Hk8mDAJFq4E9kF3DtNgPFwzbo5kbeiusNFJgWmo3LoQ5",base:B.APT,quote:B.USDC,decimals:B.APT.decimals,version:4},GOFX_USDC_V4:{symbol:"GOFX-USDC",name:"GOFX-USDC V4 LP",mint:"4svqAwrLPGRDCQuuieYTmtLXF75wiahjeK2rEN9tY1YL",base:B.GOFX,quote:B.USDC,decimals:B.GOFX.decimals,version:4},SONAR_USDC_V4:{symbol:"SONAR-USDC",name:"SONAR-USDC V4 LP",mint:"2tAcfqJ1YYjpGLqwh76kyNt9VaNFDd4fJySfH6SmWfKt",base:B.SONAR,quote:B.USDC,decimals:B.SONAR.decimals,version:4},JSOL_SOL_V4:{symbol:"JSOL-SOL",name:"JSOL-SOL V4 LP",mint:"61z37rpHsU6d3Fq5sUjJ85K6tXGzkoYKDAG3kPJQNDRo",base:B.JSOL,quote:B.WSOL,decimals:B.JSOL.decimals,version:4},JSOL_USDC_V4:{symbol:"JSOL-USDC",name:"JSOL-USDC V4 LP",mint:"3JZqf2VPNxj1kDZQsfzC7myM6spsGQbGuFv1gVfdYosN",base:B.JSOL,quote:B.USDC,decimals:B.JSOL.decimals,version:4},SHILL_USDC_V4:{symbol:"SHILL-USDC",name:"SHILL-USDC V4 LP",mint:"CnUhYBtQEbSBZ76bgxAouVCTCb8rofZzwerVF5z5LREJ",base:B.SHILL,quote:B.USDC,decimals:B.SHILL.decimals,version:4},DFL_USDC_V4:{symbol:"DFL-USDC",name:"DFL-USDC V4 LP",mint:"Fffijd6UVJdQeLVXhenS8YcsnMUdWJqpbBeH42LFkXgS",base:B.DFL,quote:B.USDC,decimals:B.DFL.decimals,version:4},BOKU_USDC_V4:{symbol:"BOKU-USDC",name:"BOKU-USDC V4 LP",mint:"8jjQn5Yagb6Nm2WGAxPW1bcGqrTWpg5adf6QukXEarcP",base:B.BOKU,quote:B.USDC,decimals:B.BOKU.decimals,version:4},MIMO_SOL_V4:{symbol:"MIMO-SOL",name:"MIMO-SOL V4 LP",mint:"HUJ1opSk8AiPfDT47r7n4hTiK2EXgrR3Msy7T8q1BywS",base:B.MIMO,quote:B.WSOL,decimals:B.MIMO.decimals,version:4},wbWBNB_USDC_V4:{symbol:"wbWBNB-USDC",name:"wbWBNB-USDC V4 LP",mint:"FEsEfEJJSfiMQcshUgZ5UigfytfGRQ3z5puyF6DXDp9C",base:B.wbWBNB,quote:B.USDC,decimals:B.wbWBNB.decimals,version:4},wePEOPLE_USDC_V4:{symbol:"wePEOPLE-USDC",name:"wePEOPLE-USDC V4 LP",mint:"3e5ZCKi4etorpV4pv1fSckP5iJD67xcUkx3RtFCZhbzD",base:B.wePEOPLE,quote:B.USDC,decimals:B.wePEOPLE.decimals,version:4},ISOLA_USDT_V4:{symbol:"ISOLA-USDT",name:"ISOLA-USDT V4 LP",mint:"H8s1wQsZpRK61pyLF3XwyQc6E8vNUnwRDhy3TBDCDENQ",base:B.ISOLA,quote:B.USDT,decimals:B.ISOLA.decimals,version:4},SPWN_USDC_V4:{symbol:"SPWN-USDC",name:"SPWN-USDC V4 LP",mint:"B5uyCAQcX6nAjZypLgiivbEKabSptgUb8JK9tkaSnqdW",base:B.SPWN,quote:B.USDC,decimals:B.SPWN.decimals,version:4},STR_USDC_V4:{symbol:"STR-USDC",name:"STR-USDC V4 LP",mint:"8uDVKmVwNmbXHDB7rNKqtpcT9VAsFHTJ5pPYxjyoBbNg",base:B.STR,quote:B.USDC,decimals:B.STR.decimals,version:4},SOLC_USDT_V4:{symbol:"SOLC-USDT",name:"SOLC-USDT V4 LP",mint:"2g9JzTWycLzK4KEBBHsponAtZRee2ii63bRrJ8tefEyt",base:B.SOLC,quote:B.USDT,decimals:B.SOLC.decimals,version:4},VI_USDC_V4:{symbol:"VI-USDC",name:"VI-USDC V4 LP",mint:"3MwHyHCRfVqtH3ABFtdKXdY9dwemr9GGxQFaBkeq6NjY",base:B.VI,quote:B.USDC,decimals:B.VI.decimals,version:4},KKO_USDC_V4:{symbol:"KKO-USDC",name:"KKO-USDC V4 LP",mint:"7xr1Doc1NiMWbUg99YVFqQSLfYXNzo6YvacXUsSgBMNW",base:B.KKO,quote:B.USDC,decimals:B.KKO.decimals,version:4},XTAG_USDC_V4:{symbol:"XTAG-USDC",name:"XTAG-USDC V4 LP",mint:"GCEQbLg4ik5YJ4CMcbtuVqEc4sjLdSGy34rFk1CtGjdg",base:B.XTAG,quote:B.USDC,decimals:B.XTAG.decimals,version:4},TTT_USDC_V4:{symbol:"TTT-USDC",name:"TTT-USDC V4 LP",mint:"84fmrerHGohoRf4iLPDQ1KG4CjSjCRksYWGzjWfCRM8a",base:B.TTT,quote:B.USDC,decimals:B.TTT.decimals,version:4},RUN_USDC_V4:{symbol:"RUN-USDC",name:"RUN-USDC V4 LP",mint:"CjTLvvKSQdEujcSzeZRYgk4w1DpuXBbMppLHaxZyz11Y",base:B.RUN,quote:B.USDC,decimals:B.RUN.decimals,version:4},CRWNY_USDC_V4:{symbol:"CRWNY-USDC",name:"CRWNY-USDC V4 LP",mint:"H3D9Gyi4frRLW6bS9vBthDVDJyzyRJ6XhhpP6PJGWaDC",base:B.CRWNY,quote:B.USDC,decimals:B.CRWNY.decimals,version:4},CRWNY_RAY_V4:{symbol:"CRWNY-RAY",name:"CRWNY-RAY V4 LP",mint:"5Cz9wGStNjiUg81q8t6sJJeckuT2C14CYSfyQbtYirSX",base:B.CRWNY,quote:B.RAY,decimals:B.CRWNY.decimals,version:4},BLOCK_USDC_V4:{symbol:"BLOCK-USDC",name:"BLOCK-USDC V4 LP",mint:"8i44Y23GkkwDYZ5iSkVEqmrXUfwNmwo9grguTDWKM8wg",base:B.BLOCK,quote:B.USDC,decimals:B.BLOCK.decimals,version:4},REAL_USDC_V4:{symbol:"REAL-USDC",name:"REAL-USDC V4 LP",mint:"EN43tp8xdkcM8RYSJ4msFHMPTJRXKhUteVYBDJLwTvr3",base:B.REAL,quote:B.USDC,decimals:B.REAL.decimals,version:4},FRKT_USDC_V4:{symbol:"FRKT-USDC",name:"FRKT-USDC V4 LP",mint:"7MgzqVTGeA4wENme81QPTrPy45NJMKVL9XGwxmNT87cG",base:B.FRKT,quote:B.USDC,decimals:B.FRKT.decimals,version:4},MBS_USDC_V4:{symbol:"MBS-USDC",name:"MBS-USDC V4 LP",mint:"BAgSWaPZpsQKyZJdvB5KyvmCNj6hzczzentt5FhDCVHb",base:B.MBS,quote:B.USDC,decimals:B.MBS.decimals,version:4},PRISM_USDC_V4:{symbol:"PRISM-USDC",name:"PRISM-USDC V4 LP",mint:"3baYkTcudvSFMe25UpZcBfdp4FA5kL2E4pfaeJ8AiYJB",base:B.PRISM,quote:B.USDC,decimals:B.PRISM.decimals,version:4},CHICKS_USDC_V4:{symbol:"CHICKS-USDC",name:"CHICKS-USDC V4 LP",mint:"CPzmcw81a6PDasSXhVLfDRKuTJXZPUqocS9VFf5zCFhs",base:B.CHICKS,quote:B.USDC,decimals:B.CHICKS.decimals,version:4},MEAN_RAY_V4:{symbol:"MEAN-RAY",name:"MEAN-RAY V4 LP",mint:"H9wUyrxpAErmdNVPitpHSXgwoomoh91ggJKPWtQQoCn1",base:B.MEAN,quote:B.RAY,decimals:B.MEAN.decimals,version:4},TINY_USDC_V4:{symbol:"TINY-USDC",name:"TINY-USDC V4 LP",mint:"Hho6ZzRDj49L4z6zog8nQZFaxMSz6FX6wNzVpMeAMen",base:B.TINY,quote:B.USDC,decimals:B.TINY.decimals,version:4},SCY_USDC_V4:{symbol:"SCY-USDC",name:"SCY-USDC V4 LP",mint:"EcYk7t6Vw59HDnY2u6H1KDPkk8juMeA1NpGpHiGk1LDf",base:B.SCY,quote:B.USDC,decimals:B.SCY.decimals,version:4}};var vG={WSOL:{...SJ}};var BG=U0.from("token/util");function N$(J,$){if(J instanceof r&&$ instanceof r)return J.equals($);else if(J instanceof r||$ instanceof r)return!1;else return J===$}class Y${constructor(J,$="UNKNOWN",H="UNKNOWN"){this.decimals=J,this.symbol=$,this.name=H}}Y$.SOL=new Y$(bH.decimals,bH.symbol,bH.name);class r extends Y${constructor(J,$,H,Q="UNKNOWN",W="UNKNOWN"){super(H,Q,W);this.programId=VH(J),this.mint=VH($)}equals(J){if(this===J)return!0;return this.mint.equals(J.mint)}}r.WSOL=new r(m,SJ.mint,SJ.decimals,bH.symbol,bH.name);var bZ=E0(EZ(),1);var wZ=E0(SZ(),1),Pz=wZ.default,rH=Pz;var nQ=U0.from("entity/fraction"),_H=rH(pQ),nH=rH(bZ.default),Nz={[nJ.ROUND_DOWN]:nH.ROUND_DOWN,[nJ.ROUND_HALF_UP]:nH.ROUND_HALF_UP,[nJ.ROUND_UP]:nH.ROUND_UP},gz={[nJ.ROUND_DOWN]:_H.roundDown,[nJ.ROUND_HALF_UP]:_H.roundHalfUp,[nJ.ROUND_UP]:_H.roundUp};class y0{constructor(J,$=k0){this.numerator=H0(J),this.denominator=H0($)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new y0(this.denominator,this.numerator)}add(J){const $=J instanceof y0?J:new y0(H0(J));if(this.denominator.eq($.denominator))return new y0(this.numerator.add($.numerator),this.denominator);return new y0(this.numerator.mul($.denominator).add($.numerator.mul(this.denominator)),this.denominator.mul($.denominator))}sub(J){const $=J instanceof y0?J:new y0(H0(J));if(this.denominator.eq($.denominator))return new y0(this.numerator.sub($.numerator),this.denominator);return new y0(this.numerator.mul($.denominator).sub($.numerator.mul(this.denominator)),this.denominator.mul($.denominator))}mul(J){const $=J instanceof y0?J:new y0(H0(J));return new y0(this.numerator.mul($.numerator),this.denominator.mul($.denominator))}div(J){const $=J instanceof y0?J:new y0(H0(J));return new y0(this.numerator.mul($.denominator),this.denominator.mul($.numerator))}toSignificant(J,$={groupSeparator:""},H=nJ.ROUND_HALF_UP){nQ.assert(Number.isInteger(J),`${J} is not an integer.`),nQ.assert(J>0,`${J} is not positive.`),nH.set({precision:J+1,rounding:Nz[H]});const Q=new nH(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(J);return Q.toFormat(Q.decimalPlaces(),$)}toFixed(J,$={groupSeparator:""},H=nJ.ROUND_HALF_UP){return nQ.assert(Number.isInteger(J),`${J} is not an integer.`),nQ.assert(J>=0,`${J} is negative.`),_H.DP=J,_H.RM=gz[H],new _H(this.numerator.toString()).div(this.denominator.toString()).toFormat(J,$)}}function kz(J,$){let H="0",Q="0";if(J.includes(".")){const W=J.split(".");if(W.length===2)[H,Q]=W,Q=Q.padEnd($,"0");else return p$.throwArgumentError("invalid number string","num",J)}else H=J;return[H,Q.slice(0,$)||Q]}var p$=U0.from("entity/amount"),_Z=rH(pQ);class r0 extends y0{constructor(J,$,H=!0){let Q=new eH.default(0);const W=XH.pow(new eH.default(J.decimals));if(H)Q=H0($);else{let Z=new eH.default(0),Y=new eH.default(0);if(typeof $==="string"||typeof $==="number"||typeof $==="bigint"){const[z,j]=kz($.toString(),J.decimals);Z=H0(z),Y=H0(j)}Z=Z.mul(W),Q=Z.add(Y)}super(Q,W);this.currency=J}get raw(){return this.numerator}isZero(){return this.raw.isZero()}gt(J){return p$.assert(N$(this.currency,J.currency),"gt currency not equals"),this.raw.gt(J.raw)}lt(J){return p$.assert(N$(this.currency,J.currency),"lt currency not equals"),this.raw.lt(J.raw)}add(J){return p$.assert(N$(this.currency,J.currency),"add currency not equals"),new r0(this.currency,this.raw.add(J.raw))}sub(J){return p$.assert(N$(this.currency,J.currency),"sub currency not equals"),new r0(this.currency,this.raw.sub(J.raw))}toSignificant(J=this.currency.decimals,$,H=nJ.ROUND_DOWN){return super.toSignificant(J,$,H)}toFixed(J=this.currency.decimals,$,H=nJ.ROUND_DOWN){return p$.assert(J<=this.currency.decimals,"decimals overflow"),super.toFixed(J,$,H)}toExact(J={groupSeparator:""}){return _Z.DP=this.currency.decimals,new _Z(this.numerator.toString()).div(this.denominator.toString()).toFormat(J)}}class O0 extends r0{constructor(J,$,H=!0){super(J,$,H);this.token=J}add(J){return p$.assert(N$(this.token,J.token),"add token not equals"),new O0(this.token,this.raw.add(J.raw))}subtract(J){return p$.assert(N$(this.token,J.token),"sub token not equals"),new O0(this.token,this.raw.sub(J.raw))}}var PZ=new y0(LZ);class uJ extends y0{toSignificant(J=5,$,H){return this.mul(PZ).toSignificant(J,$,H)}toFixed(J=2,$,H){return this.mul(PZ).toFixed(J,$,H)}}var xz=U0.from("entity/price");class PJ extends y0{constructor(J,$,H,Q){super(Q,$);this.baseCurrency=J,this.quoteCurrency=H,this.scalar=new y0(L6(J.decimals),L6(H.decimals))}get raw(){return new y0(this.numerator,this.denominator)}get adjusted(){return super.mul(this.scalar)}invert(){return new PJ(this.quoteCurrency,this.numerator,this.baseCurrency,this.denominator)}mul(J){xz.assert(N$(this.quoteCurrency,J.baseCurrency),"mul currency not equals");const $=super.mul(J);return new PJ(this.baseCurrency,$.denominator,J.quoteCurrency,$.numerator)}toSignificant(J=this.quoteCurrency.decimals,$,H){return this.adjusted.toSignificant(J,$,H)}toFixed(J=this.quoteCurrency.decimals,$,H){return this.adjusted.toFixed(J,$,H)}}var PH=E0(EJ(),1);import{PublicKey as Az} from"@solana/web3.js";var j0=E0(pJ(),1),eQ=j0.Layout,NZ=j0.Structure;var K6=j0.UInt;var gZ=j0.u8,UH=j0.u16;var h6=j0.u32;var kJ=j0.s32;var kZ=j0.seq;var p0=j0.blob;var E6=j0.bits;function o(J){return new K6(1,J)}function yJ(J){return new K6(4,J)}function P(J){return new NH(8,!1,J)}function G0(J){return new NH(16,!1,J)}function xZ(J){return new NH(1,!0,J)}function tQ(J){return new NH(8,!0,J)}function AZ(J){return new NH(16,!0,J)}function c(J){return new w6(p0(32),($)=>new Az($),($)=>$.toBuffer(),J)}function cJ(J){return new w6(gZ(),Tz,fz,J)}function Tz(J){if(J===0)return!1;else if(J===1)return!0;throw new Error("Invalid bool: "+J)}function fz(J){return J?1:0}function e(J,$,H){return new TZ(J,$,H)}function z0(J,$,H){let Q;const W=typeof $==="number"?$:PH.isBN($)?$.toNumber():new Proxy($,{get(Z,Y){if(!Q){const z=Reflect.get(Z,"count");Q=PH.isBN(z)?z.toNumber():z,Reflect.set(Z,"count",Q)}return Reflect.get(Z,Y)},set(Z,Y,z){if(Y==="count")Q=z;return Reflect.set(Z,Y,z)}});return kZ(J,W,H)}class NH extends eQ{constructor(J,$,H){super(J,H);this.blob=p0(J),this.signed=$}decode(J,$=0){const H=new PH.default(this.blob.decode(J,$),10,"le");if(this.signed)return H.fromTwos(this.span*8).clone();return H}encode(J,$,H=0){if(typeof J==="number")J=new PH.default(J);if(this.signed)J=J.toTwos(this.span*8);return this.blob.encode(J.toArrayLike(Buffer,"le",this.span),$,H)}}class S6 extends eQ{constructor(J){super(8,J);this._lower=E6(h6(),!1),this._upper=E6(h6(),!1)}addBoolean(J){if(this._lower.fields.length<32)this._lower.addBoolean(J);else this._upper.addBoolean(J)}decode(J,$=0){const H=this._lower.decode(J,$),Q=this._upper.decode(J,$+this._lower.span);return{...H,...Q}}encode(J,$,H=0){return this._lower.encode(J,$,H)+this._upper.encode(J,$,H+this._lower.span)}}class w6 extends eQ{constructor(J,$,H,Q){super(J.span,Q);this.layout=J,this.decoder=$,this.encoder=H}decode(J,$){return this.decoder(this.layout.decode(J,$))}encode(J,$,H){return this.layout.encode(this.encoder(J),$,H)}getSpan(J,$){return this.layout.getSpan(J,$)}}class TZ extends NZ{decode(J,$){return super.decode(J,$)}}var MF=e([yJ("mintAuthorityOption"),c("mintAuthority"),P("supply"),o("decimals"),o("isInitialized"),yJ("freezeAuthorityOption"),c("freezeAuthority")]),$$=e([c("mint"),c("owner"),P("amount"),yJ("delegateOption"),c("delegate"),o("state"),yJ("isNativeOption"),P("isNative"),P("delegatedAmount"),yJ("closeAuthorityOption"),c("closeAuthority")]);var fZ=E0(EJ(),1);import{SystemProgram as Iz,TransactionInstruction as mz} from"@solana/web3.js";import{PublicKey as yz} from"@solana/web3.js";function n0(J,$,H){return h0([J.toBuffer(),H.toBuffer(),$.toBuffer()],new yz("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"))}class _0{static getAssociatedTokenAccount({mint:J,owner:$,programId:H}){return n0($,J,H).publicKey}static makeCreateAssociatedTokenAccountInstruction({programId:J,mint:$,associatedAccount:H,owner:Q,payer:W,instructionsType:Z}){return Z.push($0.createATA),TQ(W,H,Q,$,J)}static async makeCreateWrappedNativeAccountInstructions({connection:J,owner:$,payer:H,amount:Q,commitment:W}){const Z=[],Y=[],z=await J.getMinimumBalanceForRentExemption($$.span,W),j=H0(Q).add(new fZ.default(z)),V=g$({fromPublicKey:H,programId:m});return Z.push(Iz.createAccountWithSeed({fromPubkey:H,basePubkey:H,seed:V.seed,newAccountPubkey:V.publicKey,lamports:j.toNumber(),space:$$.span,programId:m})),Y.push($0.createAccount),Z.push(this.makeInitAccountInstruction({programId:m,mint:VH(SJ.mint),tokenAccount:V.publicKey,owner:$,instructionTypes:Y})),{address:{newAccount:V.publicKey},innerTransaction:{instructions:Z,signers:[],lookupTableAddress:[],instructionTypes:Y}}}static async insertCreateWrappedNativeAccount({connection:J,owner:$,payer:H,amount:Q,instructions:W,instructionsType:Z,signers:Y,commitment:z}){const j=await this.makeCreateWrappedNativeAccountInstructions({connection:J,owner:$,payer:H,amount:Q,commitment:z});return W.push(...j.innerTransaction.instructions),Y.push(...j.innerTransaction.signers),Z.push(...j.innerTransaction.instructionTypes),j.address.newAccount}static makeInitMintInstruction({programId:J,mint:$,decimals:H,mintAuthority:Q,freezeAuthority:W=null,instructionTypes:Z}){return Z.push($0.initMint),oW($,H,Q,W,J)}static makeMintToInstruction({programId:J,mint:$,dest:H,authority:Q,amount:W,multiSigners:Z=[],instructionTypes:Y}){return Y.push($0.mintTo),rW($,H,Q,BigInt(String(W)),Z,J)}static makeInitAccountInstruction({programId:J,mint:$,tokenAccount:H,owner:Q,instructionTypes:W}){return W.push($0.initAccount),cW(H,$,Q,J)}static makeTransferInstruction({programId:J,source:$,destination:H,owner:Q,amount:W,multiSigners:Z=[],instructionsType:Y}){return Y.push($0.transferAmount),eW($,H,Q,BigInt(String(W)),Z,J)}static makeCloseAccountInstruction({programId:J,tokenAccount:$,owner:H,payer:Q,multiSigners:W=[],instructionsType:Z}){return Z.push($0.closeAccount),_Q($,Q,H,W,J)}static createInitAccountInstruction(J,$,H,Q){const W=[{pubkey:H,isSigner:!1,isWritable:!0},{pubkey:$,isSigner:!1,isWritable:!1},{pubkey:Q,isSigner:!1,isWritable:!1},{pubkey:P$,isSigner:!1,isWritable:!1}],Z=o("instruction"),Y=Buffer.alloc(Z.span);return Z.encode(1,Y),new mz({keys:W,programId:J,data:Y})}}var GH;(function(J){J[J.V0=0]="V0",J[J.LEGACY=1]="LEGACY"})(GH||(GH={}));var $0;(function(J){J[J.createAccount=0]="createAccount",J[J.initAccount=1]="initAccount",J[J.createATA=2]="createATA",J[J.closeAccount=3]="closeAccount",J[J.transferAmount=4]="transferAmount",J[J.initMint=5]="initMint",J[J.mintTo=6]="mintTo",J[J.initMarket=7]="initMarket",J[J.util1216OwnerClaim=8]="util1216OwnerClaim",J[J.setComputeUnitPrice=9]="setComputeUnitPrice",J[J.setComputeUnitLimit=10]="setComputeUnitLimit",J[J.clmmCreatePool=11]="clmmCreatePool",J[J.clmmOpenPosition=12]="clmmOpenPosition",J[J.clmmIncreasePosition=13]="clmmIncreasePosition",J[J.clmmDecreasePosition=14]="clmmDecreasePosition",J[J.clmmClosePosition=15]="clmmClosePosition",J[J.clmmSwapBaseIn=16]="clmmSwapBaseIn",J[J.clmmSwapBaseOut=17]="clmmSwapBaseOut",J[J.clmmInitReward=18]="clmmInitReward",J[J.clmmSetReward=19]="clmmSetReward",J[J.clmmCollectReward=20]="clmmCollectReward",J[J.ammV4Swap=21]="ammV4Swap",J[J.ammV4AddLiquidity=22]="ammV4AddLiquidity",J[J.ammV4RemoveLiquidity=23]="ammV4RemoveLiquidity",J[J.ammV4SimulatePoolInfo=24]="ammV4SimulatePoolInfo",J[J.ammV4SwapBaseIn=25]="ammV4SwapBaseIn",J[J.ammV4SwapBaseOut=26]="ammV4SwapBaseOut",J[J.ammV4CreatePool=27]="ammV4CreatePool",J[J.ammV4InitPool=28]="ammV4InitPool",J[J.ammV4CreatePoolV2=29]="ammV4CreatePoolV2",J[J.ammV5AddLiquidity=30]="ammV5AddLiquidity",J[J.ammV5RemoveLiquidity=31]="ammV5RemoveLiquidity",J[J.ammV5SimulatePoolInfo=32]="ammV5SimulatePoolInfo",J[J.ammV5SwapBaseIn=33]="ammV5SwapBaseIn",J[J.ammV5SwapBaseOut=34]="ammV5SwapBaseOut",J[J.routeSwap=35]="routeSwap",J[J.routeSwap1=36]="routeSwap1",J[J.routeSwap2=37]="routeSwap2",J[J.farmV3Deposit=38]="farmV3Deposit",J[J.farmV3Withdraw=39]="farmV3Withdraw",J[J.farmV3CreateLedger=40]="farmV3CreateLedger",J[J.farmV5Deposit=41]="farmV5Deposit",J[J.farmV5Withdraw=42]="farmV5Withdraw",J[J.farmV5CreateLedger=43]="farmV5CreateLedger",J[J.farmV6Deposit=44]="farmV6Deposit",J[J.farmV6Withdraw=45]="farmV6Withdraw",J[J.farmV6Create=46]="farmV6Create",J[J.farmV6Restart=47]="farmV6Restart",J[J.farmV6CreatorAddReward=48]="farmV6CreatorAddReward",J[J.farmV6CreatorWithdraw=49]="farmV6CreatorWithdraw",J[J.test=50]="test"})($0||($0={}));function g$({fromPublicKey:J,programId:$=m}){const H=dz.generate().publicKey.toBase58().slice(0,32);return{publicKey:uz(J,H,$),seed:H}}var uz=function(J,$,H){const Q=Buffer.concat([J.toBuffer(),Buffer.from($),H.toBuffer()]),W=QZ(Q);return new pz(W)};class V${static _selectTokenAccount(J){const{tokenAccounts:$,programId:H,mint:Q,owner:W,config:Z}=J,{associatedOnly:Y}={...{associatedOnly:!0},...Z},z=$.filter(({accountInfo:V})=>V.mint.equals(Q)).sort((V,U)=>V.accountInfo.amount.lt(U.accountInfo.amount)?1:-1),j=_0.getAssociatedTokenAccount({mint:Q,owner:W,programId:H});for(let V of z){const{pubkey:U}=V;if(Y){if(j.equals(U))return U}else return U}return null}static async _handleTokenAccount(J){const{connection:$,side:H,amount:Q,programId:W,mint:Z,tokenAccount:Y,owner:z,payer:j=z,frontInstructions:V,endInstructions:U,signers:C,bypassAssociatedCheck:q,frontInstructionsType:K,endInstructionsType:w,checkCreateATAOwner:O}=J,h=_0.getAssociatedTokenAccount({mint:Z,owner:z,programId:W});if(r.WSOL.mint.equals(Z)){const b=await _0.insertCreateWrappedNativeAccount({connection:$,owner:z,payer:j,instructions:V,instructionsType:K,signers:C,amount:Q});if(U)U.push(_0.makeCloseAccountInstruction({programId:m,tokenAccount:b,owner:z,payer:j,instructionsType:w??[]}));return b}else if(!Y||H==="out"&&!h.equals(Y)&&!q){const b=_0.makeCreateAssociatedTokenAccountInstruction({programId:W,mint:Z,associatedAccount:h,owner:z,payer:j,instructionsType:K});if(O){const N=await $.getAccountInfo(h);if(N===null)V.push(b);else if(N.owner.equals(m)&&_$.decode(N.data).mint.equals(Z)&&_$.decode(N.data).owner.equals(z));else throw Error(`create ata check error -> mint: ${Z.toString()}, ata: ${h.toString()}`)}else V.push(b);return h}return Y}static async _selectOrCreateTokenAccount(J){const{mint:$,tokenAccounts:H,createInfo:Q,associatedOnly:W,owner:Z,checkCreateATAOwner:Y,programId:z}=J,j=_0.getAssociatedTokenAccount({mint:$,owner:Z,programId:z}),V=H.filter((U)=>U.accountInfo.mint.equals($)&&(!W||U.pubkey.equals(j))).sort((U,C)=>U.accountInfo.amount.lt(C.accountInfo.amount)?1:-1);if(Q===void 0||V.length>0)return V.length>0?V[0].pubkey:void 0;if(W){const U=_0.makeCreateAssociatedTokenAccountInstruction({programId:z,mint:$,associatedAccount:j,owner:Z,payer:Q.payer,instructionsType:Q.frontInstructionsType});if(Y){const C=await Q.connection.getAccountInfo(j);if(C===null)Q.frontInstructions.push(U);else if(C.owner.equals(z)&&_$.decode(C.data).mint.equals($)&&_$.decode(C.data).owner.equals(Z));else throw Error(`create ata check error -> mint: ${$.toString()}, ata: ${j.toString()}`)}else Q.frontInstructions.push(U);if($.equals(r.WSOL.mint)&&Q.amount){const C=await _0.insertCreateWrappedNativeAccount({connection:Q.connection,owner:Z,payer:Q.payer,instructions:Q.frontInstructions,instructionsType:Q.frontInstructionsType,signers:Q.signers,amount:Q.amount??0});if((Q.endInstructions??[]).push(_0.makeCloseAccountInstruction({programId:m,tokenAccount:C,owner:Z,payer:Q.payer,instructionsType:Q.endInstructionsType??[]})),Q.amount)Q.frontInstructions.push(_0.makeTransferInstruction({programId:m,source:C,destination:j,owner:Z,amount:Q.amount,instructionsType:Q.frontInstructionsType}))}return(Q.endInstructions??[]).push(_0.makeCloseAccountInstruction({programId:z,tokenAccount:j,owner:Z,payer:Q.payer,instructionsType:Q.endInstructionsType??[]})),j}else if($.equals(r.WSOL.mint)){const U=await _0.insertCreateWrappedNativeAccount({connection:Q.connection,owner:Z,payer:Q.payer,instructions:Q.frontInstructions,instructionsType:Q.frontInstructionsType,signers:Q.signers,amount:Q.amount??0});return(Q.endInstructions??[]).push(_0.makeCloseAccountInstruction({programId:m,tokenAccount:U,owner:Z,payer:Q.payer,instructionsType:Q.endInstructionsType??[]})),U}else{const U=g$({fromPublicKey:Z,programId:z}),C=await Q.connection.getMinimumBalanceForRentExemption(_$.span),q=lz.createAccountWithSeed({fromPubkey:Z,basePubkey:Z,seed:U.seed,newAccountPubkey:U.publicKey,lamports:C,space:_$.span,programId:z}),K=_0.createInitAccountInstruction(z,$,U.publicKey,Z);return Q.frontInstructions.push(q,K),Q.frontInstructionsType.push($0.createAccount,$0.initAccount),(Q.endInstructions??[]).push(_0.makeCloseAccountInstruction({programId:z,tokenAccount:U.publicKey,owner:Z,payer:Q.payer,instructionsType:Q.endInstructionsType??[]})),U.publicKey}}}import{AddressLookupTableAccount as yZ,PublicKey as cz} from"@solana/web3.js";var aF={"2immgwYNHBbyVQKVGCEkgWpi53bLwWNRMB5G2nbgYV17":new yZ({key:new cz("2immgwYNHBbyVQKVGCEkgWpi53bLwWNRMB5G2nbgYV17"),state:yZ.deserialize(Buffer.from("AQAAAP//////////d49+DAAAAAAAAQZMWvw7GUNJdaccNBVnb57OKakxL2BHLYvhRwVILRsgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMGRm/lIRcy/+ytunLDm+e8jOW7xfcSayxDmzpAAAAABt324ddloZPZy+FGzut5rBy0he1fWzeROoz1hX7/AKkG3fbh7nWP3hhCXbzkbM3athr8TYO5DSf+vfko2KGL/AVKU1D4XciC1hSlVnJ4iilt3x6rq9CmBniISTL07vagBqfVFxksXFEhjMlMPUrxf1ja7gibof1E49vZigAAAAAGp9UXGMd0yShWY5hpHV62i164o5tLbVxzVVshAAAAAIyXJY9OJInxuz0QKRSODYMLWhOZ2v8QhASOe9jb6fhZC3BlsePRfEU4nVJ/awTDzVi4bHMaoP21SbbRvAP4KUbIScv+6Yw2LHF/6K0ZjUPibbSWXCirYPGuuVl7zT789IUPLW4CpHr4JNCatp3ELXDLKMv6JJ+37le50lbBJ2LvDQdRqCgtphMF/imcN7mY5YRx2xE1A3MQ+L4QRaYK9u4GRfZP3LsAd00a+IkCpA22UNQMKdq5BFbJuwuOLqc8zxCTDlqxBG8J0HcxtfogQHDK06ukzfaXiNDKAob1MqBHS9lJxDYCwz8gd5DtFqNSTKG5l1zxIaKpDP/sffi2is1H9aKveyXSu5StXElYRl9SD5As0DHE4N0GLnf84/siiKXVyp4Ez121kLcUui/jLLFZEz/BwZK3Ilf9B9OcsEAeDMKAy2vjGSxQODgBz0QwGA+eP4ZjIjrIAQaXENv31QfLlOdXSRCkaybRniDHF4C8YcwhcvsqrOVuTP4B2Na+9wLdtrB31uz2rtlFI5kahdsnp/d1SrASDInYCtTYtdoke4kX+hoKWcEWM4Tle8pTUkUVv4BxS6fje/EzKBE4Qu9N9LMnrw/JNO0hqMVB4rk/2ou4AB1loQ7FZoPwut2o4KZB+0p9xnbrQKw038qjpHar+PyDwvxBRcu5hpHw3dguezeWv+IwvgW5icu8EGkhGa9AkFPPJT7VMSFb8xowveU=","base64"))})};var B$=E0(EJ(),1);import{PublicKey as eF,Transaction as tF,TransactionMessage as oF,VersionedTransaction as JX} from"@solana/web3.js";function sJ(J,$,H,Q){if($===void 0)return{amount:J,fee:void 0,expirationTime:void 0};const W=H.epoch<$.newerTransferFee.epoch?$.olderTransferFee:$.newerTransferFee,Z=new B$.default(W.maximumFee.toString()),Y=H.epoch<$.newerTransferFee.epoch?(Number($.newerTransferFee.epoch)*H.slotsInEpoch-H.absoluteSlot)*400/1000:void 0;if(Q)if(W.transferFeeBasisPoints===tH){const z=new B$.default(W.maximumFee.toString());return{amount:J.add(z),fee:z,expirationTime:Y}}else{const z=oH(J.mul(new B$.default(tH)),new B$.default(tH-W.transferFeeBasisPoints)),j=new B$.default(W.maximumFee.toString()),V=z.sub(J).gt(j)?J.add(j):z,U=oH(V.mul(new B$.default(W.transferFeeBasisPoints)),new B$.default(tH)),C=U.gt(Z)?Z:U;return{amount:V,fee:C,expirationTime:Y}}else{const z=oH(J.mul(new B$.default(W.transferFeeBasisPoints)),new B$.default(tH)),j=z.gt(Z)?Z:z;return{amount:J,fee:j,expirationTime:Y}}}function JQ(J,$){if(J===void 0)return $;if($===void 0)return J;return Math.min(J,$)}async function b6({connection:J,mints:$}){if($.length===0)return{};const H=await FH(J,$.map((W)=>({pubkey:W}))),Q={};for(let W of H){const Z=fW(W.pubkey,W.accountInfo,W.accountInfo?.owner);Q[W.pubkey.toString()]={...Z,feeConfig:mW(Z)??void 0}}return Q}function oH(J,$){const{div:H,mod:Q}=J.divmod($);if(Q.gt(J0))return H.add(k0);else return H}var tH=1e4;var NJ=E0(EJ(),1);import{PublicKey as T0,SystemProgram as rZ,TransactionInstruction as H$} from"@solana/web3.js";import{TransactionInstruction as gH} from"@solana/web3.js";function IZ(J,$,H,Q,W,Z){const Y=e([o("ins")]),z=[d($,!1),d(H,!1),y(Z,!1),d(Q,!1),y(W,!0),d(t0,!1)],j=Buffer.alloc(Y.span);return Y.encode({ins:23},j),new gH({keys:z,programId:J,data:j})}function mZ(J,$,H,Q,W,Z,Y,z){const j=e([o("voterBump"),o("voterWeightRecordBump")]),V=[d($,!1),y(H,!1),d(W,!0),y(Q,!1),y(Z,!0),d(t0,!1),d(v$,!1),d(uQ,!1)],U=Buffer.alloc(j.span);j.encode({voterBump:Y,voterWeightRecordBump:z},U);const C=Buffer.from([...$Q.voterStakeRegistryCreateVoter,...U]);return new gH({keys:V,programId:J,data:C})}function dZ(J,$,H,Q,W,Z,Y,z,j,V,U,C){const q=e([o("depositEntryIndex"),o("kind"),o("option"),P("startTs"),yJ("periods"),cJ("allowClawback")]),K=[d($,!1),y(H,!1),y(Q,!1),d(W,!0),y(Z,!0),d(Y,!1),d(t0,!1),d(m,!1),d(tJ,!1),d(v$,!1)],w=Buffer.alloc(q.span);q.encode({depositEntryIndex:z,kind:j,option:V===void 0?0:1,startTs:V??J0,periods:U,allowClawback:C},w);const O=Buffer.from([...$Q.voterStakeRegistryCreateDepositEntry,...w]);return new gH({keys:K,programId:J,data:O})}function pZ(J,$,H,Q,W,Z,Y,z,j,V,U,C,q){const K=e([o("depositEntryIndex"),P("amount")]),w=[d($,!1),y(H,!1),y(Q,!1),y(W,!1),d(Z,!0),d(m,!1),y(Y,!1),d(z,!1),y(j,!1),d(V,!1),d(U,!1),d(uQ,!1)],O=Buffer.alloc(K.span);K.encode({depositEntryIndex:C,amount:q},O);const h=Buffer.from([...$Q.voterStakeRegistryDeposit,...O]);return new gH({keys:w,programId:J,data:h})}function lZ(J,$,H,Q){const W=e([]),Z=[d($,!1),d(H,!1),y(Q,!1),d(t0,!1)],Y=Buffer.alloc(W.span);W.encode({},Y);const z=Buffer.from([...$Q.voterStakeRegistryUpdateVoterWeightRecord,...Y]);return new gH({keys:Z,programId:J,data:z})}function uZ(J,$,H,Q,W,Z,Y,z,j,V,U,C,q,K,w){const O=e([o("depositEntryIndex"),P("amount")]),h=[d($,!1),y(H,!1),d(Q,!0),d(W,!1),y(Z,!1),y(Y,!1),y(z,!1),d(m,!1),y(j,!1),d(V,!1),y(U,!1),d(C,!1),d(q,!1),d(uQ,!1)],b=Buffer.alloc(O.span);O.encode({depositEntryIndex:K,amount:w},b);const N=Buffer.from([...$Q.voterStakeRegistryWithdraw,...b]);return new gH({keys:h,programId:J,data:N})}var $Q={voterStakeRegistryCreateVoter:Buffer.from([6,24,245,52,243,255,148,25]),voterStakeRegistryCreateDepositEntry:Buffer.from([185,131,167,186,159,125,19,67]),voterStakeRegistryDeposit:Buffer.from([242,35,198,137,82,225,242,182]),voterStakeRegistryWithdraw:Buffer.from([183,18,70,156,148,109,161,34]),voterStakeRegistryUpdateVoterWeightRecord:Buffer.from([45,185,3,36,109,190,115,169])};var _6=e([P("state"),P("nonce"),c("lpVault"),c("rewardVault"),c(),c(),P(),P(),P("totalReward"),G0("perShareReward"),P("lastSlot"),P("perSlotReward")]),P6=e([P("state"),P("nonce"),c("lpVault"),c("rewardVaultA"),P("totalRewardA"),G0("perShareRewardA"),P("perSlotRewardA"),o("option"),c("rewardVaultB"),p0(7),P("totalRewardB"),G0("perShareRewardB"),P("perSlotRewardB"),P("lastSlot"),c()]),sz=e([P("rewardState"),P("rewardOpenTime"),P("rewardEndTime"),P("rewardLastUpdateTime"),P("totalReward"),P("totalRewardEmissioned"),P("rewardClaimed"),P("rewardPerSecond"),G0("accRewardPerShare"),c("rewardVault"),c("rewardMint"),c("rewardSender"),P("rewardType"),z0(P(),15,"padding")]),az=e([P(),P("state"),P("nonce"),P("validRewardTokenNum"),G0("rewardMultiplier"),P("rewardPeriodMax"),P("rewardPeriodMin"),P("rewardPeriodExtend"),c("lpMint"),c("lpVault"),z0(sz,5,"rewardInfos"),c("creator"),c(),z0(P(),32,"padding")]),iz=new Proxy(_6,{get(J,$,H){if($==="decode")return(...Q)=>{const W=J.decode(...Q);return{...W,version:3,rewardInfos:[{rewardVault:W.rewardVault,totalReward:W.totalReward,perSlotReward:W.perSlotReward,perShareReward:W.perShareReward}]}};else return Reflect.get(J,$,H)}}),rz=new Proxy(P6,{get(J,$,H){if($==="decode")return(...Q)=>{const W=J.decode(...Q);return{...W,version:5,rewardInfos:[{rewardVault:W.rewardVaultA,totalReward:W.totalRewardA,perSlotReward:W.perSlotRewardA,perShareReward:W.perShareRewardA},{rewardVault:W.rewardVaultB,totalReward:W.totalRewardB,perSlotReward:W.perSlotRewardB,perShareReward:W.perShareRewardB}]}};else return Reflect.get(J,$,H)}}),kH=new Proxy(az,{get(J,$,H){if($==="decode")return(...Q)=>{const W=J.decode(...Q);return{...W,version:6,rewardInfos:W.rewardInfos.map((Z)=>({...Z,rewardType:(Object.entries(DH).find((Y)=>String(Y[1])===Z.rewardType.toString())??["Standard SPL"])[0]}))}};else return Reflect.get(J,$,H)}}),N6=e([P("state"),c("id"),c("owner"),P("deposited"),z0(P(),1,"rewardDebts")]),HQ=e([P("state"),c("id"),c("owner"),P("deposited"),z0(G0(),1,"rewardDebts"),P(""),P("voteLockedBalance"),z0(P(),15)]),g6=e([P("state"),c("id"),c("owner"),P("deposited"),z0(P(),2,"rewardDebts")]),k6=e([P("state"),c("id"),c("owner"),P("deposited"),z0(G0(),2,"rewardDebts"),z0(P(),17)]),nz=e([P(),P("state"),c("id"),c("owner"),P("deposited"),z0(G0(),5,"rewardDebts"),z0(P(),16)]),cZ={3:iz,5:rz,6:kH},sZ={3:HQ,5:k6,6:nz},ez=e([c("mint"),c("grantAuthority"),P("baselineVoteWeightScaledFactor"),P("maxExtraLockupVoteWeightScaledFactor"),P("lockupSaturationSecs"),xZ("digitShift"),z0(o(),7,"reserved1"),z0(P(),7,"reserved2")]),aZ=e([p0(8),c("governanceProgramId"),c("realm"),c("realmGoverningTokenMint"),c("realmAuthority"),z0(o(),32,"reserved1"),z0(ez,4,"votingMints"),tQ("timeOffset"),o("bump"),z0(o(),7,"reserved2"),z0(P(),11,"reserved3")]),tz=e([tQ("startTime"),tQ("endTime"),o("kind"),z0(o(),15,"reserved")]),oz=e([z0(tz,1,"lockup"),P("amountDeposited_native"),P("amountInitiallyLockedNative"),cJ("isUsed"),cJ("allowClawback"),o("votingMintConfigIdx"),z0(o(),29,"reserved")]),iZ=e([p0(8),c("voterAuthority"),c("registrar"),z0(oz,32,"deposits"),o("voterBump"),o("voterWweightRecordBump"),z0(o(),94,"reserved")]);function x6(J,$,H){return h0([$.toBuffer(),Buffer.from("registrar","utf8"),H.toBuffer()],J)}function A6(J,$){return h0([$.toBuffer(),Buffer.from("voting_mint_seed","utf8")],J)}function T6(J,$){return h0([$.toBuffer()],J)}function f6(J,$,H){return h0([$.toBuffer(),Buffer.from("voter","utf8"),H.toBuffer()],J)}function y6(J,$,H){return h0([$.toBuffer(),Buffer.from("voter-weight-record","utf8"),H.toBuffer()],J)}function I6(J,$,H,Q){return h0([Buffer.from("governance","utf8"),$.toBuffer(),H.toBuffer(),Q.toBuffer()],J)}async function nZ(J,$,H,Q){const W=await J.getAccountInfo($);if(W===null)throw Error("registrar info check error");const Y=aZ.decode(W.data).votingMints.findIndex((U)=>U.mint.equals(Q));if(Y===-1)throw Error("find voter mint error");const z=await J.getAccountInfo(H);if(z===null)return{index:Y,isInit:!1};const V=iZ.decode(z.data).deposits.findIndex((U)=>U.isUsed&&U.votingMintConfigIdx===Y);if(V===-1)return{index:Y,isInit:!1};else return{index:V,isInit:!0}}var M0=U0.from("Farm"),DH={"Standard SPL":0,"Option tokens":1};class aJ extends V${static getStateLayout(J){const $=cZ[J];return M0.assertArgument(!!$,"invalid version","version",J),$}static getLedgerLayout(J){const $=sZ[J];return M0.assertArgument(!!$,"invalid version","version",J),$}static getLayouts(J){return{state:this.getStateLayout(J),ledger:this.getLedgerLayout(J)}}static getAssociatedAuthority({programId:J,poolId:$}){return h0([$.toBuffer()],J)}static getAssociatedLedgerAccount({programId:J,poolId:$,owner:H,version:Q}){const{publicKey:W}=h0([$.toBuffer(),H.toBuffer(),Buffer.from(Q===6?"farmer_info_associated_seed":"staker_info_v2_associated_seed","utf-8")],J);return W}static getAssociatedLedgerPoolAccount({programId:J,poolId:$,mint:H,type:Q}){const{publicKey:W}=h0([$.toBuffer(),H.toBuffer(),Buffer.from(Q==="lpVault"?"lp_vault_associated_seed":Q==="rewardVault"?"reward_vault_associated_seed":"","utf-8")],J);return W}static makeDepositInstruction(J){const{poolKeys:$}=J,{version:H}=$;if(H===3)return this.makeDepositInstructionV3(J);else if(H===5)return this.makeDepositInstructionV5(J);else if(H===6)return this.makeDepositInstructionV6(J);return M0.throwArgumentError("invalid version","poolKeys.version",H)}static makeDepositInstructionV3({poolKeys:J,userKeys:$,amount:H}){M0.assertArgument(J.rewardInfos.length===1,"lengths not equal 1","poolKeys.rewardInfos",J.rewardInfos),M0.assertArgument($.rewardTokenAccounts.length===1,"lengths not equal 1","userKeys.rewardTokenAccounts",$.rewardTokenAccounts);const Q=e([o("instruction"),P("amount")]),W=Buffer.alloc(Q.span);Q.encode({instruction:10,amount:H0(H)},W);const Z=[y(J.id,!1),d(J.authority,!1),y($.ledger,!1),d($.owner,!0),y($.lpTokenAccount,!1),y(J.lpVault,!1),y($.rewardTokenAccounts[0],!1),y(J.rewardInfos[0].rewardVault,!1),d(sH,!1),d(m,!1)];if($.auxiliaryLedgers)for(let Y of $.auxiliaryLedgers)Z.push(y(Y,!1));return{address:{},innerTransaction:{instructions:[new H$({programId:J.programId,keys:Z,data:W})],signers:[],lookupTableAddress:[],instructionTypes:[$0.farmV3Deposit]}}}static makeDepositInstructionV5({poolKeys:J,userKeys:$,amount:H}){M0.assertArgument($.rewardTokenAccounts.length===J.rewardInfos.length,"lengths not equal with poolKeys.rewardInfos","userKeys.rewardTokenAccounts",$.rewardTokenAccounts);const Q=e([o("instruction"),P("amount")]),W=Buffer.alloc(Q.span);Q.encode({instruction:11,amount:H0(H)},W);const Z=[y(J.id,!1),d(J.authority,!1),y($.ledger,!1),d($.owner,!0),y($.lpTokenAccount,!1),y(J.lpVault,!1),y($.rewardTokenAccounts[0],!1),y(J.rewardInfos[0].rewardVault,!1),d(sH,!1),d(m,!1)];for(let Y=1;Y<J.rewardInfos.length;Y++)Z.push(y($.rewardTokenAccounts[Y],!1)),Z.push(y(J.rewardInfos[Y].rewardVault,!1));if($.auxiliaryLedgers)for(let Y of $.auxiliaryLedgers)Z.push(y(Y,!1));return{address:{},innerTransaction:{instructions:[new H$({programId:J.programId,keys:Z,data:W})],signers:[],lookupTableAddress:[],instructionTypes:[$0.farmV5Deposit]}}}static makeDepositInstructionV6({poolKeys:J,userKeys:$,amount:H}){M0.assertArgument($.rewardTokenAccounts.length!==0,"lengths equal zero","userKeys.rewardTokenAccounts",$.rewardTokenAccounts),M0.assertArgument($.rewardTokenAccounts.length===J.rewardInfos.length,"lengths not equal with poolKeys.rewardInfos","userKeys.rewardTokenAccounts",$.rewardTokenAccounts);const Q=e([o("instruction"),P("amount")]),W=Buffer.alloc(Q.span);Q.encode({instruction:1,amount:H0(H)},W);const Z=[d(m,!1),d(t0,!1),y(J.id,!1),d(J.authority,!1),y(J.lpVault,!1),y($.ledger,!1),d($.owner,!0),y($.lpTokenAccount,!1)];for(let Y=0;Y<J.rewardInfos.length;Y++)Z.push(y(J.rewardInfos[Y].rewardVault,!1)),Z.push(y($.rewardTokenAccounts[Y],!1));return{address:{},innerTransaction:{instructions:[new H$({programId:J.programId,keys:Z,data:W})],signers:[],lookupTableAddress:[],instructionTypes:[$0.farmV6Deposit]}}}static makeWithdrawInstruction(J){const{poolKeys:$}=J,{version:H}=$;if(H===3)return this.makeWithdrawInstructionV3(J);else if(H===5)return this.makeWithdrawInstructionV5(J);else if(H===6)return this.makeWithdrawInstructionV6(J);return M0.throwArgumentError("invalid version","poolKeys.version",H)}static makeWithdrawInstructionV3({poolKeys:J,userKeys:$,amount:H}){M0.assertArgument(J.rewardInfos.length===1,"lengths not equal 1","poolKeys.rewardInfos",J.rewardInfos),M0.assertArgument($.rewardTokenAccounts.length===1,"lengths not equal 1","userKeys.rewardTokenAccounts",$.rewardTokenAccounts);const Q=e([o("instruction"),P("amount")]),W=Buffer.alloc(Q.span);Q.encode({instruction:11,amount:H0(H)},W);const Z=[y(J.id,!1),d(J.authority,!1),y($.ledger,!1),d($.owner,!0),y($.lpTokenAccount,!1),y(J.lpVault,!1),y($.rewardTokenAccounts[0],!1),y(J.rewardInfos[0].rewardVault,!1),d(sH,!1),d(m,!1)];if($.auxiliaryLedgers)for(let Y of $.auxiliaryLedgers)Z.push(y(Y,!1));return{address:{},innerTransaction:{instructions:[new H$({programId:J.programId,keys:Z,data:W})],signers:[],lookupTableAddress:[],instructionTypes:[$0.farmV5Deposit]}}}static makeWithdrawInstructionV5({poolKeys:J,userKeys:$,amount:H}){M0.assertArgument($.rewardTokenAccounts.length===J.rewardInfos.length,"lengths not equal with params.poolKeys.rewardInfos","userKeys.rewardTokenAccounts",$.rewardTokenAccounts);const Q=e([o("instruction"),P("amount")]),W=Buffer.alloc(Q.span);Q.encode({instruction:12,amount:H0(H)},W);const Z=[y(J.id,!1),d(J.authority,!1),y($.ledger,!1),d($.owner,!0),y($.lpTokenAccount,!1),y(J.lpVault,!1),y($.rewardTokenAccounts[0],!1),y(J.rewardInfos[0].rewardVault,!1),d(sH,!1),d(m,!1)];for(let Y=1;Y<J.rewardInfos.length;Y++)Z.push(y($.rewardTokenAccounts[Y],!1)),Z.push(y(J.rewardInfos[Y].rewardVault,!1));if($.auxiliaryLedgers)for(let Y of $.auxiliaryLedgers)Z.push(y(Y,!1));return{address:{},innerTransaction:{instructions:[new H$({programId:J.programId,keys:Z,data:W})],signers:[],lookupTableAddress:[],instructionTypes:[$0.farmV5Withdraw]}}}static makeWithdrawInstructionV6({poolKeys:J,userKeys:$,amount:H}){M0.assertArgument($.rewardTokenAccounts.length!==0,"lengths equal zero","userKeys.rewardTokenAccounts",$.rewardTokenAccounts),M0.assertArgument($.rewardTokenAccounts.length===J.rewardInfos.length,"lengths not equal with params.poolKeys.rewardInfos","userKeys.rewardTokenAccounts",$.rewardTokenAccounts);const Q=e([o("instruction"),P("amount")]),W=Buffer.alloc(Q.span);Q.encode({instruction:2,amount:H0(H)},W);const Z=[d(m,!1),y(J.id,!1),d(J.authority,!1),y(J.lpVault,!1),y($.ledger,!1),d($.owner,!0),y($.lpTokenAccount,!1)];for(let Y=0;Y<J.rewardInfos.length;Y++)Z.push(y(J.rewardInfos[Y].rewardVault,!1)),Z.push(y($.rewardTokenAccounts[Y],!1));return{address:{},innerTransaction:{instructions:[new H$({programId:J.programId,keys:Z,data:W})],signers:[],lookupTableAddress:[],instructionTypes:[$0.farmV6Withdraw]}}}static makeCreateAssociatedLedgerAccountInstruction(J){const{poolKeys:$}=J,{version:H}=$;if(H===3)return this.makeCreateAssociatedLedgerAccountInstructionV3(J);else if(H===5)return this.makeCreateAssociatedLedgerAccountInstructionV5(J);return M0.throwArgumentError("invalid version","poolKeys.version",H)}static makeCreateAssociatedLedgerAccountInstructionV3({poolKeys:J,userKeys:$}){const H=e([o("instruction")]),Q=Buffer.alloc(H.span);H.encode({instruction:9},Q);const W=[y(J.id,!1),y($.ledger,!1),d($.owner,!0),d(t0,!1),d(P$,!1)];return{address:{},innerTransaction:{instructions:[new H$({programId:J.programId,keys:W,data:Q})],signers:[],lookupTableAddress:[],instructionTypes:[$0.farmV3CreateLedger]}}}static makeCreateAssociatedLedgerAccountInstructionV5({poolKeys:J,userKeys:$}){const H=e([o("instruction")]),Q=Buffer.alloc(H.span);H.encode({instruction:10},Q);const W=[y(J.id,!1),y($.ledger,!1),d($.owner,!0),d(t0,!1),d(P$,!1)];return{address:{},innerTransaction:{instructions:[new H$({programId:J.programId,keys:W,data:Q})],signers:[],lookupTableAddress:[],instructionTypes:[$0.farmV5CreateLedger]}}}static makeCreateFarmInstruction({connection:J,userKeys:$,poolInfo:H}){const{version:Q}=H;if(Q===6)return this.makeCreateFarmInstructionV6({connection:J,userKeys:$,poolInfo:H});return M0.throwArgumentError("invalid version","version",Q)}static async makeCreateFarmInstructionV6({connection:J,userKeys:$,poolInfo:H}){const Q=$.payer??$.owner,W=g$({fromPublicKey:Q,programId:H.programId}),Z=await J.getMinimumBalanceForRentExemption(kH.span),Y=[],z=[],j=[],V=[],U=[];Y.push(rZ.createAccountWithSeed({fromPubkey:Q,basePubkey:Q,seed:W.seed,newAccountPubkey:W.publicKey,lamports:Z,space:kH.span,programId:H.programId}));const{publicKey:C,nonce:q}=aJ.getAssociatedAuthority({programId:H.programId,poolId:W.publicKey}),K=aJ.getAssociatedLedgerPoolAccount({programId:H.programId,poolId:W.publicKey,mint:H.lpMint,type:"lpVault"}),w=[],O=[];for(let A of H.rewardInfos){M0.assertArgument(A.rewardOpenTime<A.rewardEndTime,"start time error","rewardInfo.rewardOpenTime",A.rewardOpenTime),M0.assertArgument(DH[A.rewardType]!==void 0,"reward type error","rewardInfo.rewardType",A.rewardType),M0.assertArgument(H0(A.rewardPerSecond).gt(J0),"rewardPerSecond error","rewardInfo.rewardPerSecond",A.rewardPerSecond),w.push({isSet:new NJ.default(1),rewardPerSecond:H0(A.rewardPerSecond),rewardOpenTime:H0(A.rewardOpenTime),rewardEndTime:H0(A.rewardEndTime),rewardType:H0(DH[A.rewardType])});let I;if(A.rewardMint.equals(T0.default))I=await _0.insertCreateWrappedNativeAccount({connection:J,owner:$.owner,payer:$.payer??$.owner,instructions:Y,signers:U,amount:H0(A.rewardEndTime).sub(H0(A.rewardOpenTime)).mul(H0(A.rewardPerSecond)),instructionsType:j}),z.push(_0.makeCloseAccountInstruction({programId:m,tokenAccount:I,owner:$.owner,payer:$.payer??$.owner,instructionsType:V}));else I=this._selectTokenAccount({programId:m,tokenAccounts:$.tokenAccounts,mint:A.rewardMint,owner:$.owner,config:{associatedOnly:!1}});M0.assertArgument(I!==null,"cannot found target token accounts","tokenAccounts",$.tokenAccounts);const T=A.rewardMint.equals(T0.default)?r.WSOL.mint:A.rewardMint;O.push({rewardMint:T,rewardVault:aJ.getAssociatedLedgerPoolAccount({programId:H.programId,poolId:W.publicKey,mint:T,type:"rewardVault"}),userRewardToken:I})}const h=this._selectTokenAccount({programId:m,tokenAccounts:$.tokenAccounts,mint:H.lockInfo.lockMint,owner:$.owner,config:{associatedOnly:!1}});M0.assertArgument(h!==null,"cannot found lock vault","tokenAccounts",$.tokenAccounts);const b=e([P("isSet"),P("rewardPerSecond"),P("rewardOpenTime"),P("rewardEndTime"),P("rewardType")]),N=e([o("instruction"),P("nonce"),z0(b,5,"rewardTimeInfo")]),x=Buffer.alloc(N.span);N.encode({instruction:0,nonce:new NJ.default(q),rewardTimeInfo:w},x);const k=[d(m,!1),d(t0,!1),d(P$,!1),y(W.publicKey,!1),d(C,!1),y(K,!1),d(H.lpMint,!1),y(H.lockInfo.lockVault,!1),d(H.lockInfo.lockMint,!1),y(h??T0.default,!1),d($.owner,!0)];for(let A of O)k.push(...[{pubkey:A.rewardMint,isSigner:!1,isWritable:!1},{pubkey:A.rewardVault,isSigner:!1,isWritable:!0},{pubkey:A.userRewardToken,isSigner:!1,isWritable:!0}]);const g=new H$({programId:H.programId,keys:k,data:x});return{address:{farmId:W.publicKey},innerTransaction:{instructions:[...Y,g,...z],signers:U,lookupTableAddress:[],instructionTypes:[...j,$0.farmV6Create,...V]}}}static makeCreatorWithdrawFarmRewardInstruction(J){const{poolKeys:$}=J,{version:H}=$;if(H===6)return this.makeCreatorWithdrawFarmRewardInstructionV6(J);return M0.throwArgumentError("invalid version","version",H)}static makeCreatorWithdrawFarmRewardInstructionV6({poolKeys:J,userKeys:$,withdrawMint:H}){const Q=J.rewardInfos.find((V)=>V.rewardMint.equals(H.equals(T0.default)?r.WSOL.mint:H));M0.assertArgument(Q!==void 0,"withdraw mint error","poolKeys.rewardInfos",J.rewardInfos);const W=Q?.rewardVault??T0.default,Z=e([o("instruction")]),Y=Buffer.alloc(Z.span);Z.encode({instruction:5},Y);const z=[d(m,!1),y(J.id,!1),d(J.authority,!1),d(J.lpVault,!1),y(W,!1),y($.userRewardToken,!1),d($.owner,!0)],j=new H$({programId:J.programId,keys:z,data:Y});return{address:{},innerTransaction:{instructions:[j],signers:[],lookupTableAddress:[],instructionTypes:[$0.farmV6CreatorWithdraw]}}}static async fetchMultipleInfoAndUpdate({connection:J,pools:$,owner:H,config:Q,chainTime:W}){let Z=!1,Y=!1;const z=[],j={};for(let q of $){if(j[q.id.toString()]=q,q.version===6)Y=!0;else Z=!0;if(z.push({pubkey:q.id,version:q.version,key:"state",poolId:q.id}),z.push({pubkey:q.lpVault,version:q.version,key:"lpVault",poolId:q.id}),H)z.push({pubkey:this.getAssociatedLedgerAccount({programId:q.programId,poolId:q.id,owner:H,version:q.version}),version:q.version,key:"ledger",poolId:q.id})}const V={},U=await FH(J,z,Q);for(let{pubkey:q,version:K,key:w,poolId:O,accountInfo:h}of U){const b=O.toBase58();if(w==="state"){const N=this.getStateLayout(K);if(!h||!h.data||h.data.length!==N.span)return M0.throwArgumentError("invalid farm state account info","pools.id",q);V[b]={...V[b],...{apiPoolInfo:j[b]},...{state:N.decode(h.data)}}}else if(w==="lpVault"){if(!h||!h.data||h.data.length!==$$.span)return M0.throwArgumentError("invalid farm lp vault account info","pools.lpVault",q);V[b]={...V[b],...{lpVault:$$.decode(h.data)}}}else if(w==="ledger"){const N=this.getLedgerLayout(K);if(h&&h.data)M0.assertArgument(h.data.length===N.span,"invalid farm ledger account info","ledger",q),V[b]={...V[b],...{ledger:N.decode(h.data)}}}}const C=Y||Z?await J.getSlot():0;for(let q of Object.keys(V)){if(V[q]===void 0)continue;V[q].state=aJ.updatePoolInfo(V[q].state,V[q].lpVault,C,W)}for(let[q,{state:K,ledger:w}]of Object.entries(V))if(w){let O;if(K.version===6)O=K.rewardMultiplier;else O=K.rewardInfos.length===1?XH.pow(new NJ.default(9)):XH.pow(new NJ.default(15));const h=K.rewardInfos.map((b,N)=>{const x=w.rewardDebts[N];return w.deposited.mul(K.version===6?b.accRewardPerShare:b.perShareReward).div(O).sub(x)});V[q].wrapped={...V[q].wrapped,pendingRewards:h}}return V}static updatePoolInfo(J,$,H,Q){if(J.version===3||J.version===5){if(J.lastSlot.gte(new NJ.default(H)))return J;const W=new NJ.default(H).sub(J.lastSlot);J.lastSlot=new NJ.default(H);for(let Z of J.rewardInfos){if($.amount.eq(new NJ.default(0)))continue;const Y=Z.perSlotReward.mul(W);Z.perShareReward=Z.perShareReward.add(Y.mul(new NJ.default(10).pow(new NJ.default(J.version===3?9:15))).div($.amount)),Z.totalReward=Z.totalReward.add(Y)}}else if(J.version===6)for(let W of J.rewardInfos){if(W.rewardState.eq(new NJ.default(0)))continue;const Z=NJ.default.min(new NJ.default(Q),W.rewardEndTime);if(W.rewardOpenTime.gte(Z))continue;let z=Z.sub(W.rewardLastUpdateTime).mul(W.rewardPerSecond);const j=W.totalReward.sub(W.totalRewardEmissioned);if(j.lt(z))z=j,W.rewardLastUpdateTime=W.rewardLastUpdateTime.add(j.div(W.rewardPerSecond));else W.rewardLastUpdateTime=Z;if($.amount.eq(new NJ.default(0)))continue;W.accRewardPerShare=W.accRewardPerShare.add(z.mul(J.rewardMultiplier).div($.amount)),W.totalRewardEmissioned=W.totalRewardEmissioned.add(z)}return J}static makeCreatorWithdrawFarmRewardInstructionSimple(J){const{poolKeys:$}=J,{version:H}=$;if(H===6)return this.makeCreatorWithdrawFarmRewardInstructionV6Simple(J);return M0.throwArgumentError("invalid version","version",H)}static async makeCreatorWithdrawFarmRewardInstructionV6Simple({connection:J,poolKeys:$,userKeys:H,withdrawMint:Q,makeTxVersion:W,lookupTableCache:Z,computeBudgetConfig:Y}){const z=[],j=[],V=[],U=[],C=[];let q;if(Q.equals(T0.default))q=await _0.insertCreateWrappedNativeAccount({connection:J,owner:H.owner,payer:H.payer??H.owner,instructions:z,signers:C,amount:0,instructionsType:V}),j.push(_0.makeCloseAccountInstruction({programId:m,tokenAccount:q,owner:H.owner,payer:H.payer??H.owner,instructionsType:U}));else{const w=this._selectTokenAccount({programId:m,tokenAccounts:H.tokenAccounts,mint:Q,owner:H.owner});if(w===null)q=n0(H.owner,Q,m).publicKey,z.push(_0.makeCreateAssociatedTokenAccountInstruction({programId:m,mint:Q,associatedAccount:q,owner:H.owner,payer:H.payer??H.owner,instructionsType:V}));else q=w}const K=this.makeCreatorWithdrawFarmRewardInstructionV6({poolKeys:$,userKeys:{userRewardToken:q,owner:H.owner,payer:H.payer},withdrawMint:Q});return{address:{},innerTransactions:await L0({connection:J,makeTxVersion:W,computeBudgetConfig:Y,payer:H.payer??H.owner,innerTransaction:[{instructionTypes:V,instructions:z,signers:C},K.innerTransaction,{instructionTypes:U,instructions:j,signers:[]}],lookupTableCache:Z})}}static makeCreateFarmInstructionSimple(J){const{version:$}=J.poolInfo;if($===6)return this.makeCreateFarmInstructionV6Simple(J);return M0.throwArgumentError("invalid version","version",$)}static async makeCreateFarmInstructionV6Simple({connection:J,userKeys:$,poolInfo:H,makeTxVersion:Q,lookupTableCache:W,computeBudgetConfig:Z}){const Y=$.payer??$.owner,z=g$({fromPublicKey:Y,programId:H.programId}),j=await J.getMinimumBalanceForRentExemption(kH.span),V=[],U=[],C=[],q=[],K=[];V.push(rZ.createAccountWithSeed({fromPubkey:Y,basePubkey:Y,seed:z.seed,newAccountPubkey:z.publicKey,lamports:j,space:kH.span,programId:H.programId}));const{publicKey:w,nonce:O}=aJ.getAssociatedAuthority({programId:H.programId,poolId:z.publicKey}),h=aJ.getAssociatedLedgerPoolAccount({programId:H.programId,poolId:z.publicKey,mint:H.lpMint,type:"lpVault"}),b=[],N=[];for(let u of H.rewardInfos){M0.assertArgument(u.rewardOpenTime<u.rewardEndTime,"start time error","rewardInfo.rewardOpenTime",u.rewardOpenTime),M0.assertArgument(DH[u.rewardType]!==void 0,"reward type error","rewardInfo.rewardType",u.rewardType),M0.assertArgument(H0(u.rewardPerSecond).gt(J0),"rewardPerSecond error","rewardInfo.rewardPerSecond",u.rewardPerSecond),b.push({isSet:new NJ.default(1),rewardPerSecond:H0(u.rewardPerSecond),rewardOpenTime:H0(u.rewardOpenTime),rewardEndTime:H0(u.rewardEndTime),rewardType:H0(DH[u.rewardType])});let a;if(u.rewardMint.equals(T0.default))a=await _0.insertCreateWrappedNativeAccount({connection:J,owner:$.owner,payer:$.payer??$.owner,instructions:V,signers:K,amount:H0(u.rewardEndTime).sub(H0(u.rewardOpenTime)).mul(H0(u.rewardPerSecond)),instructionsType:C}),U.push(_0.makeCloseAccountInstruction({programId:m,tokenAccount:a,owner:$.owner,payer:$.payer??$.owner,instructionsType:q}));else a=this._selectTokenAccount({programId:m,tokenAccounts:$.tokenAccounts,mint:u.rewardMint,owner:$.owner,config:{associatedOnly:!1}});if(M0.assertArgument(a!==null,"cannot found target token accounts","tokenAccounts",$.tokenAccounts),a===null)throw Error("cannot found target token accounts");const n=u.rewardMint.equals(T0.default)?r.WSOL.mint:u.rewardMint;N.push({rewardMint:n,rewardVault:aJ.getAssociatedLedgerPoolAccount({programId:H.programId,poolId:z.publicKey,mint:n,type:"rewardVault"}),userRewardToken:a})}const x=this._selectTokenAccount({programId:m,tokenAccounts:$.tokenAccounts,mint:H.lockInfo.lockMint,owner:$.owner,config:{associatedOnly:!1}});M0.assertArgument(x!==null,"cannot found lock vault","tokenAccounts",$.tokenAccounts);const k=e([P("isSet"),P("rewardPerSecond"),P("rewardOpenTime"),P("rewardEndTime"),P("rewardType")]),g=e([o("instruction"),P("nonce"),z0(k,5,"rewardTimeInfo")]),A=Buffer.alloc(g.span);g.encode({instruction:0,nonce:new NJ.default(O),rewardTimeInfo:b},A);const I=[d(m,!1),d(t0,!1),d(P$,!1),y(z.publicKey,!1),d(w,!1),y(h,!1),d(H.lpMint,!1),y(H.lockInfo.lockVault,!1),d(H.lockInfo.lockMint,!1),y(x??T0.default,!1),d($.owner,!0)];for(let u of N)I.push(...[{pubkey:u.rewardMint,isSigner:!1,isWritable:!1},{pubkey:u.rewardVault,isSigner:!1,isWritable:!0},{pubkey:u.userRewardToken,isSigner:!1,isWritable:!0}]);const T=new H$({programId:H.programId,keys:I,data:A});return{address:{farmId:z.publicKey},innerTransactions:await L0({connection:J,makeTxVersion:Q,computeBudgetConfig:Z,payer:$.payer??$.owner,innerTransaction:[{instructionTypes:C,instructions:V,signers:K},{instructionTypes:[$0.farmV6Create],instructions:[T],signers:[]},{instructionTypes:q,instructions:U,signers:[]}],lookupTableCache:W})}}static makeRestartFarmInstructionSimple(J){const{poolKeys:$}=J,{version:H}=$;if(H===6)return this.makeRestartFarmInstructionV6Simple(J);return M0.throwArgumentError("invalid version","version",H)}static async makeRestartFarmInstructionV6Simple({connection:J,poolKeys:$,userKeys:H,newRewardInfo:Q,makeTxVersion:W,lookupTableCache:Z,computeBudgetConfig:Y}){M0.assertArgument(Q.rewardOpenTime<Q.rewardEndTime,"start time error","newRewardInfo",Q);const z=Q.rewardMint.equals(T0.default)?r.WSOL.mint:Q.rewardMint,j=$.rewardInfos.find((k)=>k.rewardMint.equals(z));M0.assertArgument(j,"configuration does not exist","rewardInfo",j);const V=j?.rewardVault??T0.default,U=[],C=[],q=[],K=[],w=[];let O;if(Q.rewardMint.equals(T0.default))O=await _0.insertCreateWrappedNativeAccount({connection:J,owner:H.owner,payer:H.payer??H.owner,instructions:U,signers:w,amount:H0(Q.rewardEndTime).sub(H0(Q.rewardOpenTime)).mul(H0(Q.rewardPerSecond)),instructionsType:q}),C.push(_0.makeCloseAccountInstruction({programId:m,tokenAccount:O,owner:H.owner,payer:H.payer??H.owner,instructionsType:K}));else O=this._selectTokenAccount({programId:m,tokenAccounts:H.tokenAccounts,mint:Q.rewardMint,owner:H.owner,config:{associatedOnly:!1}});if(M0.assertArgument(O!==null,"cannot found target token accounts","tokenAccounts",H.tokenAccounts),O===null)throw Error("cannot found target token accounts");const h=e([o("instruction"),P("rewardReopenTime"),P("rewardEndTime"),P("rewardPerSecond")]),b=Buffer.alloc(h.span);h.encode({instruction:3,rewardReopenTime:H0(Q.rewardOpenTime),rewardEndTime:H0(Q.rewardEndTime),rewardPerSecond:H0(Q.rewardPerSecond)},b);const N=[d(m,!1),y($.id,!1),d($.lpVault,!1),y(V,!1),y(O,!1),d(H.owner,!0)],x=new H$({programId:$.programId,keys:N,data:b});return{address:{},innerTransactions:await L0({connection:J,makeTxVersion:W,computeBudgetConfig:Y,payer:H.payer??H.owner,innerTransaction:[{instructionTypes:q,instructions:U,signers:w},{instructionTypes:[$0.farmV6Restart],instructions:[x],signers:[]},{instructionTypes:K,instructions:C,signers:[]}],lookupTableCache:Z})}}static makeFarmCreatorAddRewardTokenInstructionSimple(J){const{poolKeys:$}=J,{version:H}=$;if(H===6)return this.makeFarmCreatorAddRewardTokenInstructionV6Simple(J);return M0.throwArgumentError("invalid version","version",H)}static async makeFarmCreatorAddRewardTokenInstructionV6Simple({connection:J,poolKeys:$,userKeys:H,newRewardInfo:Q,makeTxVersion:W,lookupTableCache:Z,computeBudgetConfig:Y}){const z=aJ.getAssociatedLedgerPoolAccount({programId:$.programId,poolId:$.id,mint:Q.rewardMint.equals(T0.default)?r.WSOL.mint:Q.rewardMint,type:"rewardVault"}),j=[],V=[],U=[],C=[],q=[];let K;if(Q.rewardMint.equals(T0.default))K=await _0.insertCreateWrappedNativeAccount({connection:J,owner:H.owner,payer:H.payer??H.owner,instructions:j,signers:q,amount:H0(Q.rewardEndTime).sub(H0(Q.rewardOpenTime)).mul(H0(Q.rewardPerSecond)),instructionsType:U}),V.push(_0.makeCloseAccountInstruction({programId:m,tokenAccount:K,owner:H.owner,payer:H.payer??H.owner,instructionsType:C}));else K=this._selectTokenAccount({programId:m,tokenAccounts:H.tokenAccounts,mint:Q.rewardMint,owner:H.owner,config:{associatedOnly:!1}});if(M0.assertArgument(K!==null,"cannot found target token accounts","tokenAccounts",H.tokenAccounts),K===null)throw Error("cannot found target token accounts");const w=Q.rewardMint.equals(T0.default)?r.WSOL.mint:Q.rewardMint,O=e([o("instruction"),P("isSet"),P("rewardPerSecond"),P("rewardOpenTime"),P("rewardEndTime"),P("rewardType")]),h=Buffer.alloc(O.span);O.encode({instruction:4,isSet:new NJ.default(1),rewardPerSecond:H0(Q.rewardPerSecond),rewardOpenTime:H0(Q.rewardOpenTime),rewardEndTime:H0(Q.rewardEndTime),rewardType:H0(DH[Q.rewardType])},h);const b=[d(m,!1),d(t0,!1),d(P$,!1),y($.id,!1),d($.authority,!1),d(w,!1),y(z,!1),y(K,!1),d(H.owner,!0)],N=new H$({programId:$.programId,keys:b,data:h});return{address:{},innerTransactions:await L0({connection:J,makeTxVersion:W,computeBudgetConfig:Y,payer:H.payer??H.owner,innerTransaction:[{instructionTypes:U,instructions:j,signers:q},{instructionTypes:[$0.farmV6CreatorAddReward],instructions:[N],signers:[]},{instructionTypes:C,instructions:V,signers:[]}],lookupTableCache:Z})}}static async makeDepositInstructionSimple({connection:J,poolKeys:$,fetchPoolInfo:H,ownerInfo:Q,amount:W,associatedOnly:Z=!0,checkCreateATAOwner:Y=!1,makeTxVersion:z,lookupTableCache:j,computeBudgetConfig:V}){const U={};for(let T of Q.tokenAccounts)if(Z){if(n0(Q.wallet,T.accountInfo.mint,T.programId).publicKey.equals(T.pubkey))U[T.accountInfo.mint.toString()]=T.pubkey}else U[T.accountInfo.mint.toString()]=T.pubkey;const C=[],q=[],K=[],w=[],O=[],{lpVault:h,apiPoolInfo:b,ledger:N}=H,x=h.mint,k=U[x.toString()];M0.assertArgument(k,"you don't have any lp","lp zero",U);const g=[];for(let T of b.rewardInfos){const u=Q.useSOLBalance&&T.rewardMint.equals(r.WSOL.mint),a=U[T.rewardMint.toString()]??await this._selectOrCreateTokenAccount({programId:m,mint:T.rewardMint,tokenAccounts:u?[]:Q.tokenAccounts,owner:Q.wallet,createInfo:{connection:J,payer:Q.feePayer,amount:0,frontInstructions:C,frontInstructionsType:K,endInstructions:u?q:[],endInstructionsType:u?w:[],signers:O},associatedOnly:u?!1:Z,checkCreateATAOwner:Y});U[T.rewardMint.toString()]=a,g.push(a)}const A=await aJ.getAssociatedLedgerAccount({programId:new T0(b.programId),poolId:new T0(b.id),owner:Q.wallet,version:b.version});if(b.version<6&&!N){const T=aJ.makeCreateAssociatedLedgerAccountInstruction({poolKeys:$,userKeys:{owner:Q.wallet,ledger:A}});C.push(...T.innerTransaction.instructions),K.push(...T.innerTransaction.instructionTypes)}const I=aJ.makeDepositInstruction({poolKeys:$,userKeys:{ledger:A,lpTokenAccount:k,owner:Q.wallet,rewardTokenAccounts:g},amount:W});return{address:I.address,innerTransactions:await L0({connection:J,makeTxVersion:z,computeBudgetConfig:V,payer:Q.feePayer,innerTransaction:[{instructionTypes:K,instructions:C,signers:O},I.innerTransaction,{instructionTypes:w,instructions:q,signers:[]}],lookupTableCache:j})}}static async makeWithdrawInstructionSimple({connection:J,fetchPoolInfo:$,ownerInfo:H,amount:Q,associatedOnly:W=!0,checkCreateATAOwner:Z=!1,makeTxVersion:Y,lookupTableCache:z,computeBudgetConfig:j}){const V={};for(let u of H.tokenAccounts)if(W){if(n0(H.wallet,u.accountInfo.mint,u.programId).publicKey.equals(u.pubkey))V[u.accountInfo.mint.toString()]=u.pubkey}else V[u.accountInfo.mint.toString()]=u.pubkey;const U=[],C=[],q=[],K=[],w=[],O=[],h=[],{lpVault:b,wrapped:N,apiPoolInfo:x}=$;if(N===void 0)throw Error("no lp");const k=b.mint,g=H.useSOLBalance&&k.equals(r.WSOL.mint),A=V[k.toString()]??await this._selectOrCreateTokenAccount({programId:m,mint:k,tokenAccounts:g?[]:H.tokenAccounts,owner:H.wallet,createInfo:{connection:J,payer:H.feePayer,amount:0,frontInstructions:U,frontInstructionsType:q,signers:h},associatedOnly:g?!1:W,checkCreateATAOwner:Z});V[k.toString()]=A;const I=[];for(let u of x.rewardInfos){const a=H.useSOLBalance&&u.rewardMint.equals(r.WSOL.mint),n=V[u.rewardMint.toString()]??await this._selectOrCreateTokenAccount({programId:m,mint:u.rewardMint,tokenAccounts:a?[]:H.tokenAccounts,owner:H.wallet,createInfo:{connection:J,payer:H.feePayer,amount:0,frontInstructions:U,frontInstructionsType:q,endInstructions:a?C:[],endInstructionsType:a?K:[],signers:h},associatedOnly:a?!1:W,checkCreateATAOwner:Z});V[u.rewardMint.toString()]=n,I.push(n)}const T=this.makeWithdrawInstruction({poolKeys:x,userKeys:{ledger:this.getAssociatedLedgerAccount({programId:x.programId,poolId:x.id,owner:H.wallet,version:x.version}),lpTokenAccount:A,rewardTokenAccounts:I,owner:H.wallet},amount:Q});return w.push(...T.innerTransaction.instructions),O.push(...T.innerTransaction.instructionTypes),{address:{},innerTransactions:await L0({connection:J,makeTxVersion:Y,computeBudgetConfig:j,payer:H.feePayer,innerTransaction:[{instructionTypes:q,instructions:U,signers:h},{instructionTypes:O,instructions:w,signers:[]},{instructionTypes:K,instructions:C,signers:[]}],lookupTableCache:z})}}static async makeHarvestAllRewardInstructionSimple({connection:J,fetchPoolInfos:$,ownerInfo:H,associatedOnly:Q=!0,checkCreateATAOwner:W=!1,makeTxVersion:Z,lookupTableCache:Y,computeBudgetConfig:z}){const j={};for(let O of H.tokenAccounts)if(Q){if(n0(H.wallet,O.accountInfo.mint,O.programId).publicKey.equals(O.pubkey))j[O.accountInfo.mint.toString()]=O.pubkey}else j[O.accountInfo.mint.toString()]=O.pubkey;const V=[],U=[],C=[],q=[],K=[],w=[];for(let{lpVault:O,wrapped:h,apiPoolInfo:b,ledger:N}of Object.values($)){if(h===void 0||N===void 0||!(h.pendingRewards.find((T)=>T.gt(J0))!==void 0||N.deposited.isZero()))continue;const x=O.mint,k=H.useSOLBalance&&x.equals(r.WSOL.mint),g=j[x.toString()]??await this._selectOrCreateTokenAccount({programId:m,mint:x,tokenAccounts:k?[]:H.tokenAccounts,owner:H.wallet,createInfo:{connection:J,payer:H.feePayer,amount:0,frontInstructions:V,frontInstructionsType:C,signers:w},associatedOnly:k?!1:Q,checkCreateATAOwner:W});j[x.toString()]=g;const A=[];for(let T of b.rewardInfos){const u=H.useSOLBalance&&T.rewardMint.equals(r.WSOL.mint),a=j[T.rewardMint.toString()]??await this._selectOrCreateTokenAccount({programId:m,mint:T.rewardMint,tokenAccounts:u?[]:H.tokenAccounts,owner:H.wallet,createInfo:{connection:J,payer:H.feePayer,amount:0,frontInstructions:V,frontInstructionsType:C,endInstructions:u?U:[],endInstructionsType:u?q:[],signers:w},associatedOnly:u?!1:Q,checkCreateATAOwner:W});j[T.rewardMint.toString()]=a,A.push(a)}const I=this.makeWithdrawInstruction({poolKeys:b,userKeys:{ledger:this.getAssociatedLedgerAccount({programId:b.programId,poolId:b.id,owner:H.wallet,version:b.version}),lpTokenAccount:g,rewardTokenAccounts:A,owner:H.wallet},amount:0});K.push(I.innerTransaction)}return{address:{},innerTransactions:await L0({connection:J,makeTxVersion:Z,computeBudgetConfig:z,payer:H.feePayer,innerTransaction:[{instructionTypes:C,instructions:V,signers:w},...K,{instructionTypes:q,instructions:U,signers:[]}],lookupTableCache:Y})}}static async makeV1InfoToV2PdaAndHarvestSimple({connection:J,wallet:$,tokenAccounts:H,programIdV3:Q,programIdV5:W,makeTxVersion:Z,lookupTableCache:Y,computeBudgetConfig:z}){const j={};for(let g of H){const A=g.accountInfo.mint,I=n0($,A,g.programId).publicKey;if(I.equals(g.pubkey))j[A.toString()]=I;if(j[A.toString()]===void 0)j[A.toString()]=g.pubkey}const V=await J.getProgramAccounts(Q,{filters:[{memcmp:{offset:40,bytes:$.toString()}}]}),U=await J.getProgramAccounts(W,{filters:[{memcmp:{offset:40,bytes:$.toString()}}]}),C={},q={};for(let g of V){const I=(g.account.data.length===N6.span?N6:HQ).decode(g.account.data),T=I.id.toString(),u=this.getAssociatedLedgerAccount({programId:Q,poolId:I.id,owner:$,version:3});if(C[T]===void 0)C[T]={pda:void 0,other:[]};if(u.equals(g.pubkey))C[T].pda=g.pubkey;else C[T].other.push(g.pubkey)}for(let g of U){const I=(g.account.data.length===g6.span?g6:k6).decode(g.account.data),T=I.id.toString(),u=this.getAssociatedLedgerAccount({programId:W,poolId:I.id,owner:$,version:5});if(q[T]===void 0)q[T]={pda:void 0,other:[]};if(u.equals(g.pubkey))q[T].pda=g.pubkey;else q[T].other.push(g.pubkey)}const K=[...Object.entries(C).filter((g)=>g[1].other.length>0).map((g)=>g[0]),...Object.entries(q).filter((g)=>g[1].other.length>0).map((g)=>g[0])],w=await J.getMultipleAccountsInfo(K.map((g)=>new T0(g))),O={};for(let g=0;g<K.length;g++){const A=K[g],I=w[g];if(I===null)continue;O[A]=I.data}const h=[],b=[],N=[],x=[],k=[];for(let[g,A]of Object.entries(C)){if(A.other.length===0)continue;if(O[g]===void 0)continue;const I=_6.decode(O[g]),[T,u]=await J.getMultipleAccountsInfo([I.lpVault,I.rewardVault]);if(T===null||u===null)throw Error("get lp and reward info error");const a=$$.decode(T.data),n=$$.decode(u.data);let Z0=j[a.mint.toString()];if(Z0===void 0)Z0=await this._selectOrCreateTokenAccount({programId:T.owner,mint:a.mint,tokenAccounts:[],owner:$,createInfo:{connection:J,payer:$,amount:0,frontInstructions:h,frontInstructionsType:b,endInstructions:[],endInstructionsType:[],signers:[]},associatedOnly:!0,checkCreateATAOwner:!0}),j[a.mint.toString()]=Z0;let _=j[n.mint.toString()];if(_===void 0)_=await this._selectOrCreateTokenAccount({programId:u.owner,mint:n.mint,tokenAccounts:[],owner:$,createInfo:{connection:J,payer:$,amount:0,frontInstructions:h,frontInstructionsType:b,endInstructions:n.mint.toString()===SJ.mint?x:[],endInstructionsType:n.mint.toString()===SJ.mint?k:[],signers:[]},associatedOnly:!0,checkCreateATAOwner:!0}),j[n.mint.toString()]=_;if(A.pda===void 0){const v=this.makeCreateAssociatedLedgerAccountInstructionV3({poolKeys:{programId:Q,id:new T0(g)},userKeys:{ledger:this.getAssociatedLedgerAccount({programId:Q,poolId:new T0(g),owner:$,version:3}),owner:$}});N.push(v.innerTransaction)}const G=this.makeDepositInstructionV3({amount:0,userKeys:{ledger:this.getAssociatedLedgerAccount({programId:Q,poolId:new T0(g),owner:$,version:3}),owner:$,lpTokenAccount:Z0,rewardTokenAccounts:[_],auxiliaryLedgers:A.other},poolKeys:{programId:Q,id:new T0(g),authority:this.getAssociatedAuthority({programId:Q,poolId:new T0(g)}).publicKey,lpVault:I.lpVault,rewardInfos:[{rewardVault:I.rewardVault}]}});N.push(G.innerTransaction)}for(let[g,A]of Object.entries(q)){if(A.other.length===0)continue;if(O[g]===void 0)continue;const I=P6.decode(O[g]),[T,u,a]=await J.getMultipleAccountsInfo([I.lpVault,I.rewardVaultA,I.rewardVaultB]);if(T===null||u===null||a===null)throw Error("get lp and reward A / B info error");const n=$$.decode(T.data),Z0=$$.decode(u.data),_=$$.decode(a.data);let G=j[n.mint.toString()];if(G===void 0)G=await this._selectOrCreateTokenAccount({programId:T.owner,mint:n.mint,tokenAccounts:[],owner:$,createInfo:{connection:J,payer:$,amount:0,frontInstructions:h,frontInstructionsType:b,endInstructions:[],endInstructionsType:[],signers:[]},associatedOnly:!0,checkCreateATAOwner:!0}),j[n.mint.toString()]=G;let v=j[Z0.mint.toString()];if(v===void 0)v=await this._selectOrCreateTokenAccount({programId:u.owner,mint:Z0.mint,tokenAccounts:[],owner:$,createInfo:{connection:J,payer:$,amount:0,frontInstructions:h,frontInstructionsType:b,endInstructions:Z0.mint.toString()===SJ.mint?x:[],endInstructionsType:Z0.mint.toString()===SJ.mint?k:[],signers:[]},associatedOnly:!0,checkCreateATAOwner:!0}),j[Z0.mint.toString()]=v;let X=j[_.mint.toString()];if(X===void 0)X=await this._selectOrCreateTokenAccount({programId:a.owner,mint:_.mint,tokenAccounts:[],owner:$,createInfo:{connection:J,payer:$,amount:0,frontInstructions:h,frontInstructionsType:b,endInstructions:_.mint.toString()===SJ.mint?x:[],endInstructionsType:_.mint.toString()===SJ.mint?k:[],signers:[]},associatedOnly:!0,checkCreateATAOwner:!0}),j[_.mint.toString()]=X;if(A.pda===void 0){const M=this.makeCreateAssociatedLedgerAccountInstructionV5({poolKeys:{programId:W,id:new T0(g)},userKeys:{ledger:this.getAssociatedLedgerAccount({programId:W,poolId:new T0(g),owner:$,version:5}),owner:$}});N.push(M.innerTransaction)}const D=this.makeDepositInstructionV5({amount:0,userKeys:{ledger:this.getAssociatedLedgerAccount({programId:W,poolId:new T0(g),owner:$,version:5}),owner:$,lpTokenAccount:G,rewardTokenAccounts:[v,X],auxiliaryLedgers:A.other},poolKeys:{programId:W,id:new T0(g),authority:this.getAssociatedAuthority({programId:W,poolId:new T0(g)}).publicKey,lpVault:I.lpVault,rewardInfos:[{rewardVault:I.rewardVaultA},{rewardVault:I.rewardVaultB}]}});N.push(D.innerTransaction)}return{address:{},innerTransactions:await L0({connection:J,makeTxVersion:Z,computeBudgetConfig:z,payer:$,innerTransaction:[{instructionTypes:b.slice(0,10),instructions:h.slice(0,10),signers:[]},...h.length>10?[{instructionTypes:b.slice(10),instructions:h.slice(10),signers:[]}]:[],...N,{instructionTypes:k,instructions:x,signers:[]}],lookupTableCache:Y})}}static async makeDepositTokenInstruction({connection:J,programId:$,governanceProgramId:H,voteWeightAddinProgramId:Q,realm:W,communityTokenMint:Z,owner:Y,poolId:z}){const j=x6(Q,W,Z).publicKey,V=this.getAssociatedLedgerAccount({programId:$,poolId:z,owner:Y,version:3}),U=await J.getAccountInfo(V);if(U===null)throw Error("user is not staker");const C=HQ.decode(U.data),q=C.deposited.sub(C.voteLockedBalance);if(q.eq(J0))throw Error("user do not has new stake amount");const K=A6($,z).publicKey,w=T6($,z).publicKey,{publicKey:O,nonce:h}=f6(Q,j,Y),b=n0(O,K,m).publicKey,{publicKey:N,nonce:x}=y6(Q,j,Y),k=I6(H,W,Z,Y).publicKey,g=[],A=n0(Y,K,m).publicKey;if(await J.getAccountInfo(A)===null)g.push(_0.makeCreateAssociatedTokenAccountInstruction({programId:m,mint:K,associatedAccount:A,owner:Y,payer:Y,instructionsType:[]}));if(await J.getAccountInfo(O)===null){const n=IZ(H,W,Y,Z,Y,k);g.push(n,mZ(Q,j,O,N,Y,Y,h,x))}const{index:u,isInit:a}=await nZ(J,j,O,K);if(!a)g.push(dZ(Q,j,O,b,Y,Y,K,u,0,void 0,0,!1));return g.push(pZ(Q,j,O,b,A,Y,V,z,K,w,$,u,q),lZ(Q,j,O,N)),{address:{},innerTransaction:{instructions:g,signers:[],lookupTableAddress:[],instructionTypes:Array(g.length).fill($0.test)}}}static async makeWithdrawTokenInstruction({connection:J,programId:$,governanceProgramId:H,voteWeightAddinProgramId:Q,realm:W,communityTokenMint:Z,owner:Y,poolId:z}){const j=x6(Q,W,Z).publicKey,V=this.getAssociatedLedgerAccount({programId:$,poolId:z,owner:Y,version:3}),U=await J.getAccountInfo(V);if(U===null)throw Error("user is not staker");const C=HQ.decode(U.data);if(C.voteLockedBalance.eq(J0))throw Error("user has vote locked balance = 0");const q=A6($,z).publicKey,K=T6($,z).publicKey,{publicKey:w}=f6(Q,j,Y),O=n0(w,q,m).publicKey,{publicKey:h}=y6(Q,j,Y),b=I6(H,W,Z,Y).publicKey,N=[],{index:x,isInit:k}=await nZ(J,j,w,q);if(!k)throw Error("deposit entry index check error");return N.push(uZ(Q,j,w,Y,b,h,O,n0(Y,q,m).publicKey,V,z,q,K,$,x,C.voteLockedBalance)),{address:{},innerTransaction:{instructions:N,signers:[],lookupTableAddress:[],instructionTypes:Array(N.length).fill($0.test)}}}}var AX=[{id:"AvbVWpBi2e4C9HPmZgShGdPoNydG4Yw8GJvG9HUcLgce",lp:t.RAY_USDT_V4,version:3},{id:"4EwbZo8BZXP5313z5A2H11MRBP15M5n6YxfmkjXESKAW",lp:B.RAY,version:3},{id:"XnRBbNMf6YcWvC1u2vBXXuMcagmRBRLu1y84mpqnKwW",lp:t.xCOPE_USDC_V4,version:5},{id:"8xhjCzfzVcP79jE7jXR2xtNaSL6aJYoDRLVT9FMjpRTC",lp:t.STEP_USDC_V4,version:5},{id:"Ef1gD9JMzWF6PNw2uc4744zouh57GyWAeVTjHHbQ2nsu",lp:t.MEDIA_USDC_V4,version:5},{id:"AxVvbT9fDFEkmdLwKUJRY5HsG2RXAZbe1dRAgJ2bDDwg",lp:t.COPE_USDC_V4,version:5},{id:"D4pYuD4tbir9KBsb7Kr63v9e86JY2UoUZeFK9eHKQFZM",lp:t.MER_USDC_V4,version:5},{id:"BLy8KuRck5bcJkQdMDLSZnL1Ka4heAZSGiwTJfEfY727",lp:t.ROPE_USDC_V4,version:5},{id:"JAP8SFagJBm6vt2LoFGNeSJ1hKDZ2p3yXb3CvBx11How",lp:t.ALEPH_USDC_V4,version:5},{id:"7U8Z6TWQMtsMcHV2htALnF9VQonnD1MrVm17YtmGEGEw",lp:t.TULIP_USDC_V4,version:5},{id:"31QSh1TwgoA9GbvkgfEEwKEm11t8CR4KiQr6WCyJr7EN",lp:t.SNY_USDC_V4,version:5},{id:"EEe8b72w5q6T86nYRNJdFcY25tznPzrd1jGjuxZ7f9mX",lp:t.BOP_RAY_V4,version:5},{id:"5PVVwSqwzkCvuiKEZwWkM35ApBnoWqF8XopsVZjPwA8z",lp:t.SLRS_USDC_V4,version:5},{id:"Bw932pURVJRYjEJwRZGWjfUNpeyz18kjMNdb833eMxoj",lp:t.SAMO_RAY_V4,version:5},{id:"BRM5bdX2mjmFGg2RAent1Whd61o9asQD16BXsC6QvEni",lp:t.LIKE_USDC_V4,version:5},{id:"HUDr9BDaAGqi37xbQHzxCyXvfMCKPTPNF8g9c9bPu1Fu",lp:t.RAY_SOL_V4,version:3},{id:"CHYrUBX2RKX8iBg7gYTkccoGNBzP44LdaazMHCLcdEgS",lp:t.RAY_USDC_V4,version:3},{id:"B6fbnZZ7sbKHR18ffEDD5Nncgp54iKN1GbCgjTRdqhS1",lp:t.RAY_ETH_V4,version:3},{id:"5DFbcYNLLy5SJiBpCCDzNSs7cWCsUbYnCkLXzcPQiKnR",lp:t.RAY_SRM_V4,version:3},{id:"GzEDEkHSFFfxKMu3Toww1nrEjtbQGJKRPNRK1Pfd59Zn",lp:t.MNGO_USDC_V4,version:5},{id:"CM9XTJfXEHceGPXhmXxheR87Ng9CZ4jiBoTVQHhs9DVN",lp:t.COPE_RAY_V4,version:5},{id:"AMcVWK66iexwwCHn8drxywdNr2UgH3vmRzLXQFdErGmL",lp:t.LIKE_RAY_V4,version:5},{id:"DJfvL6srBht8XFMWYuuKHYGainqvwXyA5icVsDne3pwN",lp:t.MEDIA_RAY_V4,version:5},{id:"21xhrT4j8QnaBvj3QjhP5kZu8sXJMCE7hzHKGtWEkdKr",lp:t.MER_RAY_V4,version:5},{id:"J61AnYYSwjtJ4wDqEqqWSBuZbiR2SDDrtF7FFobutM6a",lp:t.SLRS_RAY_V4,version:5},{id:"JEC3P83x2GEijYDwXiksuh5H6YrQt5xW6MC2GDKkMoe",lp:t.SNY_RAY_V4,version:5},{id:"BmbG9hv5PazcW3rYWvatA6HpNPkozEdkWBiU64pZxuwr",lp:t.TULIP_RAY_V4,version:5},{id:"4wvZ9SwWaHKTpshQbCSKQoPosZp9KGwUzuQdESi39qPn",lp:t.ALEPH_RAY_V4,version:5},{id:"BnYoq5y2MoH4TsBHeEZrEPowhwebHxQq7nJW1vTjPTWu",lp:t.RAY_SRM_V4,version:5},{id:"93wRz2LeQ3TJoair827VTng62MjCzYDgJjG9Q5GmQ3Pd",lp:t.ATLAS_USDC_V4,version:5},{id:"7qcihXTsRW5wS5BgK7iuD84W43ECByoJP45R3hu2r6mF",lp:t.POLIS_USDC_V4,version:5},{id:"BHHhNLdJn69K1XPJcpcw4MBY3TPetpLxhj8s4K4ydsDV",lp:t.ATLAS_RAY_V4,version:5},{id:"HHm8Pgnzc56fTUYkicPv4DqGYp5fcPZFV1V1uhixSrMk",lp:t.POLIS_RAY_V4,version:5},{id:"8GBa1cK1NxevoxiRNK6YW9tWuo2xftcA3as9Cu4nhFL7",lp:t.GRAPE_USDC_V4,version:5},{id:"HzxveT6pUMwYByqnScvTbpUv4avzkUDrDpS9D7DToEry",lp:t.LARIX_USDC_V4,version:5},{id:"Fbwy4XWMjXuP1nXg4xph4RJ9E9twVXeknXokF38PVgG1",lp:t.LARIX_RAY_V4,version:5},{id:"5gzQgxaKAU13SZeffmjjE2y9HwMJ42FxQkqJhJ5nqHeh",lp:t.stSOL_USDC_V4,version:5},{id:"914jyHBQFiroKFVCpKkzjGSaZyr4gMwgxE7snbNfGjnL",lp:t.BTC_mSOL_V4,version:5},{id:"54vUWjEmg9wfCsZF7wwq2HJu5BU3cfDFAQQQgXPECcwE",lp:t.ETH_mSOL_V4,version:5},{id:"HxhxYASqdLcR6yehT9hB9HUpgcF1R2t9HtkHdngGZ2Dh",lp:t.mSOL_USDT_V4,version:5},{id:"97N6tPMVCrAunC9embwTcffye9xC95fA5y3LauhNZ444",lp:t.MNDE_mSOL_V4,version:5},{id:"DjtZxyFBgifzpaZEzfsWXogNX5zUCnTRXJqarGe9CiSv",lp:t.mSOL_USDC_V4,version:5},{id:"7wNhbTS6XQczXs52wcVmfiodRMPfycB3YaG52dWWY6SD",lp:t.mSOL_RAY_V4,version:5},{id:"CzKUrVbP7hH8EjcHNc55ZFW33rJyLQ2r52bxCzaGTpz",lp:t.LIQ_USDC_V4,version:5},{id:"5XdeFdcJoCAPMfgYndMPcsijFBKFp2cPSCjrCZzmpTE5",lp:t.LIQ_RAY_V4,version:5},{id:"Gf3qFzKnGvMCVMQZERW2Qso5uEYxd9B9kWZZHsrMmmHj",lp:t.SYP_RAY_V4,version:5},{id:"2pQQnoNpm5LoG6sZs5toNBXi4m1Pj3ExXdggPQYyiP2x",lp:t.SYP_SOL_V4,version:5},{id:"Byt2kL5qi45pMpdAsNNciKZ8HLp7oU5jizCbyARLtQJy",lp:t.SYP_USDC_V4,version:5},{id:"8W2TqGCiFiqR1JD4sbW8uTRjV2HvFjLhkZ2tAQTYE4Gc",lp:t.WOOF_RAY_V4,version:5},{id:"FgApVk6mASrkuWNxmsFvsaAYkFKqdiwMTvYZK36A2DaC",lp:t.KIN_RAY_V4,version:5},{id:"AwUDfg4NYbLQRAcFipoJwyZTpqNvw5v6C7EypryL12Y6",lp:t.STARS_USDC_V4,version:5},{id:"Gi3Z6TXeH1ZhCCbwg6oJL8SE4LcmxmGRNhhfA6NZhwTK",lp:t.weWETH_SOL_V4,version:5},{id:"8JJSdD1ca5SDtGCEm3yBbQKek2FvJ1EbNt9q2ET3E9Jt",lp:t.weWETH_USDC_V4,version:5},{id:"6X495xkPWkw9SQFYf7yL1K8QooZyaeEQ6u7yMWNNZxNV",lp:t.weUNI_USDC_V4,version:5},{id:"AuyqPBiY6sNUpH6jx415NGcdvNdYbkbYsyVabUqEVdkj",lp:t.weSUSHI_USDC_V4,version:5},{id:"7fe8QcJ6W2kHKL1h1HMYYJoGXz2LUcwCjkxX6MX35orK",lp:t.weAXS_USDC_V4,version:5},{id:"C8BjS9DGDvC2zS3n6fTvm1rjPbA33uZ7CAvEUZ3tg7aM",lp:t.weDYDX_USDC_V4,version:5},{id:"CZZnmfvSgNVUiDBG4wN2NNcaYbsKDN4kLsc3SN8DMw6i",lp:t.weSHIB_USDC_V4,version:5},{id:"FAKzZoGVCEBDRuHN4gDswAx7PsocCorDqH6dQaxnyorT",lp:t.weSAND_USDC_V4,version:5},{id:"EBS8tc4proQE2Fj6HxU4piiZP8oiDrvyJUijDCX7P7QN",lp:t.weMANA_USDC_V4,version:5},{id:"6AxxjJhAz6APspTQM4vVCHgfzEyZgBTCogJLdai7bXYE",lp:t.wbWBNB_USDC_V4,version:5},{id:"3HGPRHH3XFFu972MR1EdS65qc1nN9sM7miZtFTi6QcEd",lp:t.wePEOPLE_USDC_V4,version:5},{id:"27bysJaX5eu5Urb5kftR66otiVc6DKK7TnifKwnpNzYu",lp:t.SRM_USDC_V4,version:5},{id:"FDnxy4NkJVG3GNMMrtUZmUmoYeYE34YRDwCYTi1yBTM",lp:t.CAVE_USDC_V4,version:5},{id:"DDRNVVJBEXEemcprVVUcrTbYnR88JyN6jjT2ypgAQHC8",lp:t.GENE_USDC_V4,version:5},{id:"GVfLbXA3dpEHPvc4do9HvMZ8TACxm3x54BVrHPMEixcr",lp:t.GENE_RAY_V4,version:5},{id:"7NZ18KhsSdJBQkJEJwhEHfdaPRNdbMd17CMoxsKxavEo",lp:t.CWAR_USDC_V4,version:5},{id:"5Mdq5o3KKPyeVVBsbnivVk9qCATjfEQ22oysXVsd2DvJ",lp:t.SONAR_USDC_V4,version:5},{id:"7W8BKbMgcVpGYvTgEK758pJgDRZJ9WafKfgkV1XCkP33",lp:t.APT_USDC_V4,version:5},{id:"CgokwBwwdYsgo8hbUMtJ3GoNM3bVjvMcmaPrVvCw4sBi",lp:t.SHILL_USDC_V4,version:5},{id:"AWbmotuJS7NLBmra9ctbfVR1BnoHmiG1HGW6hm49TuRZ",lp:t.DFL_USDC_V4,version:5},{id:"665VvECKsLpXN4fLy8GYbyQpGJRNkxRx56X93U9FVSbv",lp:t.BOKU_USDC_V4,version:5},{id:"7yk1XUWmZpWMCoFpUT985z61UNTypyBGgZF3JpKgcwmL",lp:t.MIMO_SOL_V4,version:5},{id:"E5L4Bx3Lsif7bDb9XMWi5guHUt4kkYpbqQ4CbmnRjHs1",lp:t.XTAG_USDC_V4,version:5},{id:"HtvQ5AEvu8sDM7C1oB4r5fJ5E2Q1wsJ4TADwNMqR9ccF",lp:t.TTT_USDC_V4,version:5},{id:"GUzaohfNuFbBqQTnPgPSNciv3aUvriXYjQduRE3ZkqFw",lp:t.SOL_USDC_V4,version:5},{id:"5r878BSWPtoXgnqaeFJi7BCycKZ5CodBB2vS9SeiV8q",lp:t.SOL_USDT_V4,version:5},{id:"3J3SYLeFZWKnUCsrPzikw9bcD9vRs7YNGfmg7ZSg3tsK",lp:t.RUN_USDC_V4,version:5},{id:"BYmeWrwA4ixvJhNrxWzQsA3Fsz6EtUDJTo39WYZ6o1FS",lp:t.CRWNY_RAY_V4,version:5},{id:"6VNF4rF7ESUohzNeRf3aTg61dyFjbab749RGUHCTDFQL",lp:t.CRWNY_USDC_V4,version:5},{id:"7RQDGZ1cvHcREu211R35WSKHFjTxM5dmJHeFAWag29BA",lp:t.REAL_USDC_V4,version:5},{id:"ELovJ3jDKMiWhCUCdZzPfTeVmQwhj4cvYuGwS8FfhEtJ",lp:t.BLOCK_USDC_V4,version:5},{id:"36Rf8dzq5gy4Ew2bLQEgKoCKVTku4EJPLqFYG6mzFrkr",lp:t.FRKT_SOL_V4,version:5},{id:"HXpQJeAcBCKfGY6YhZgBocZGgV4xApPVK7r8CPXfvCin",lp:t.FRKT_USDC_V4,version:5},{id:"Eqn7unnxmneDuTuXQ7EAN1wBkHMFD4LgCCAkCdPA9KbV",lp:t.MBS_USDC_V4,version:5},{id:"DtU5pZB99rVtxe5qe5hQa2rRpw7poFiqaHvMAbPgT2TM",lp:t.PRISM_USDC_V4,version:5},{id:"Gue2c9J2aRtY3aJ1HEwabQznwg2MUt9d9kUyr6otujR",lp:t.CHICKS_USDC_V4,version:5},{id:"Ej7iBkW79EdF26RxaRQfGo58PqRdzHzRmE4C2e3z3dPY",lp:t.MEAN_RAY_V4,version:5},{id:"Bd1hAsMAghtCjK38Ut4m938Ep7zyEp2TydQ7G35nPvUj",lp:t.TINY_USDC_V4,version:5},{id:"2G7qTQzw3KXm7WEMJf2izqFQWh8CLZ1wFbQVP5qo3ME9",lp:t.SCY_USDC_V4,version:5}];var J9=e([P("status"),P("nonce"),P("maxOrder"),P("depth"),P("baseDecimal"),P("quoteDecimal"),P("state"),P("resetFlag"),P("minSize"),P("volMaxCutRatio"),P("amountWaveRatio"),P("baseLotSize"),P("quoteLotSize"),P("minPriceMultiplier"),P("maxPriceMultiplier"),P("systemDecimalValue"),P("minSeparateNumerator"),P("minSeparateDenominator"),P("tradeFeeNumerator"),P("tradeFeeDenominator"),P("pnlNumerator"),P("pnlDenominator"),P("swapFeeNumerator"),P("swapFeeDenominator"),P("baseNeedTakePnl"),P("quoteNeedTakePnl"),P("quoteTotalPnl"),P("baseTotalPnl"),P("poolOpenTime"),P("punishPcAmount"),P("punishCoinAmount"),P("orderbookToInitTime"),G0("swapBaseInAmount"),G0("swapQuoteOutAmount"),P("swapBase2QuoteFee"),G0("swapQuoteInAmount"),G0("swapBaseOutAmount"),P("swapQuote2BaseFee"),c("baseVault"),c("quoteVault"),c("baseMint"),c("quoteMint"),c("lpMint"),c("openOrders"),c("marketId"),c("marketProgramId"),c("targetOrders"),c("withdrawQueue"),c("lpVault"),c("owner"),P("lpReserve"),z0(P(),3,"padding")]),$9=e([P("accountType"),P("status"),P("nonce"),P("maxOrder"),P("depth"),P("baseDecimal"),P("quoteDecimal"),P("state"),P("resetFlag"),P("minSize"),P("volMaxCutRatio"),P("amountWaveRatio"),P("baseLotSize"),P("quoteLotSize"),P("minPriceMultiplier"),P("maxPriceMultiplier"),P("systemDecimalsValue"),P("abortTradeFactor"),P("priceTickMultiplier"),P("priceTick"),P("minSeparateNumerator"),P("minSeparateDenominator"),P("tradeFeeNumerator"),P("tradeFeeDenominator"),P("pnlNumerator"),P("pnlDenominator"),P("swapFeeNumerator"),P("swapFeeDenominator"),P("baseNeedTakePnl"),P("quoteNeedTakePnl"),P("quoteTotalPnl"),P("baseTotalPnl"),P("poolOpenTime"),P("punishPcAmount"),P("punishCoinAmount"),P("orderbookToInitTime"),G0("swapBaseInAmount"),G0("swapQuoteOutAmount"),G0("swapQuoteInAmount"),G0("swapBaseOutAmount"),P("swapQuote2BaseFee"),P("swapBase2QuoteFee"),c("baseVault"),c("quoteVault"),c("baseMint"),c("quoteMint"),c("lpMint"),c("modelDataAccount"),c("openOrders"),c("marketId"),c("marketProgramId"),c("targetOrders"),c("owner"),z0(P(),64,"padding")]),m6={4:J9,5:$9};var TJ=E0(EJ(),1);import{PublicKey as h$,TransactionInstruction as IH} from"@solana/web3.js";var f0=E0(EJ(),1);import{Keypair as yY,PublicKey as i0,SystemProgram as zj} from"@solana/web3.js";var xJ=function(J){var $,H,Q,W=J.length-1,Z="",Y=J[0];if(W>0){Z+=Y;for($=1;$<W;$++){if(Q=J[$]+"",H=X0-Q.length,H)Z+=l$(H);Z+=Q}if(Y=J[$],Q=Y+"",H=X0-Q.length,H)Z+=l$(H)}else if(Y===0)return"0";for(;Y%10===0;)Y/=10;return Z+Y},eJ=function(J,$,H){if(J!==~~J||J<$||J>H)throw Error(c$+J)},QQ=function(J,$,H,Q){var W,Z,Y,z;for(Z=J[0];Z>=10;Z/=10)--$;if(--$<0)$+=X0,W=0;else W=Math.ceil(($+1)/X0),$%=X0;if(Z=bJ(10,X0-$),z=J[W]%Z|0,Q==null)if($<3){if($==0)z=z/100|0;else if($==1)z=z/10|0;Y=H<4&&z==99999||H>3&&z==49999||z==50000||z==0}else Y=(H<4&&z+1==Z||H>3&&z+1==Z/2)&&(J[W+1]/Z/100|0)==bJ(10,$-2)-1||(z==Z/2||z==0)&&(J[W+1]/Z/100|0)==0;else if($<4){if($==0)z=z/1000|0;else if($==1)z=z/100|0;else if($==2)z=z/10|0;Y=(Q||H<4)&&z==9999||!Q&&H>3&&z==4999}else Y=((Q||H<4)&&z+1==Z||!Q&&H>3&&z+1==Z/2)&&(J[W+1]/Z/1000|0)==bJ(10,$-3)-1;return Y},oQ=function(J,$,H){var Q,W=[0],Z,Y=0,z=J.length;for(;Y<z;){for(Z=W.length;Z--;)W[Z]*=$;W[0]+=d6.indexOf(J.charAt(Y++));for(Q=0;Q<W.length;Q++)if(W[Q]>H-1){if(W[Q+1]===void 0)W[Q+1]=0;W[Q+1]+=W[Q]/H|0,W[Q]%=H}}return W.reverse()},z9=function(J,$){var H,Q,W;if($.isZero())return $;if(Q=$.d.length,Q<32)H=Math.ceil(Q/3),W=(1/Z8(4,H)).toString();else H=16,W="2.3283064365386962890625e-10";J.precision+=H,$=AH(J,1,$.times(W),new J(1));for(var Z=H;Z--;){var Y=$.times($);$=Y.times(Y).minus(Y).times(8).plus(1)}return J.precision-=H,$},V0=function(J,$,H,Q){var W,Z,Y,z,j,V,U,C,q,K=J.constructor;J:if($!=null){if(C=J.d,!C)return J;for(W=1,z=C[0];z>=10;z/=10)W++;if(Z=$-W,Z<0)Z+=X0,Y=$,U=C[q=0],j=U/bJ(10,W-Y-1)%10|0;else if(q=Math.ceil((Z+1)/X0),z=C.length,q>=z)if(Q){for(;z++<=q;)C.push(0);U=j=0,W=1,Z%=X0,Y=Z-X0+1}else break J;else{U=z=C[q];for(W=1;z>=10;z/=10)W++;Z%=X0,Y=Z-X0+W,j=Y<0?0:U/bJ(10,W-Y-1)%10|0}if(Q=Q||$<0||C[q+1]!==void 0||(Y<0?U:U%bJ(10,W-Y-1)),V=H<4?(j||Q)&&(H==0||H==(J.s<0?3:2)):j>5||j==5&&(H==4||Q||H==6&&(Z>0?Y>0?U/bJ(10,W-Y):0:C[q-1])%10&1||H==(J.s<0?8:7)),$<1||!C[0]){if(C.length=0,V)$-=J.e+1,C[0]=bJ(10,(X0-$%X0)%X0),J.e=-$||0;else C[0]=J.e=0;return J}if(Z==0)C.length=q,z=1,q--;else C.length=q+1,z=bJ(10,X0-Z),C[q]=Y>0?(U/bJ(10,W-Y)%bJ(10,Y)|0)*z:0;if(V)for(;;)if(q==0){for(Z=1,Y=C[0];Y>=10;Y/=10)Z++;Y=C[0]+=z;for(z=1;Y>=10;Y/=10)z++;if(Z!=z){if(J.e++,C[0]==F$)C[0]=1}break}else{if(C[q]+=z,C[q]!=F$)break;C[q--]=0,z=1}for(Z=C.length;C[--Z]===0;)C.pop()}if(C0){if(J.e>K.maxE)J.d=null,J.e=NaN;else if(J.e<K.minE)J.e=0,J.d=[0]}return J},M$=function(J,$,H){if(!J.isFinite())return jY(J);var Q,W=J.e,Z=xJ(J.d),Y=Z.length;if($){if(H&&(Q=H-Y)>0)Z=Z.charAt(0)+"."+Z.slice(1)+l$(Q);else if(Y>1)Z=Z.charAt(0)+"."+Z.slice(1);Z=Z+(J.e<0?"e":"e+")+J.e}else if(W<0){if(Z="0."+l$(-W-1)+Z,H&&(Q=H-Y)>0)Z+=l$(Q)}else if(W>=Y){if(Z+=l$(W+1-Y),H&&(Q=H-W-1)>0)Z=Z+"."+l$(Q)}else{if((Q=W+1)<Y)Z=Z.slice(0,Q)+"."+Z.slice(Q);if(H&&(Q=H-Y)>0){if(W+1===Y)Z+=".";Z+=l$(Q)}}return Z},W8=function(J,$){var H=J[0];for($*=X0;H>=10;H/=10)$++;return $},H8=function(J,$,H){if($>Y9){if(C0=!0,H)J.precision=H;throw Error($Y)}return V0(new J(J8),$,1,!0)},G$=function(J,$,H){if($>l6)throw Error($Y);return V0(new J($8),$,H,!0)},ZY=function(J){var $=J.length-1,H=$*X0+1;if($=J[$],$){for(;$%10==0;$/=10)H--;for($=J[0];$>=10;$/=10)H++}return H},l$=function(J){var $="";for(;J--;)$+="0";return $},YY=function(J,$,H,Q){var W,Z=new J(1),Y=Math.ceil(Q/X0+4);C0=!1;for(;;){if(H%2){if(Z=Z.times($),tZ(Z.d,Y))W=!0}if(H=IJ(H/2),H===0){if(H=Z.d.length-1,W&&Z.d[H]===0)++Z.d[H];break}$=$.times($),tZ($.d,Y)}return C0=!0,Z},eZ=function(J){return J.d[J.d.length-1]&1},zY=function(J,$,H){var Q,W=new J($[0]),Z=0;for(;++Z<$.length;)if(Q=new J($[Z]),!Q.s){W=Q;break}else if(W[H](Q))W=Q;return W},u6=function(J,$){var H,Q,W,Z,Y,z,j,V=0,U=0,C=0,q=J.constructor,K=q.rounding,w=q.precision;if(!J.d||!J.d[0]||J.e>17)return new q(J.d?!J.d[0]?1:J.s<0?0:Infinity:J.s?J.s<0?0:J:NaN);if($==null)C0=!1,j=w;else j=$;z=new q(0.03125);while(J.e>-2)J=J.times(z),C+=5;Q=Math.log(bJ(2,C))/Math.LN10*2+5|0,j+=Q,H=Z=Y=new q(1),q.precision=j;for(;;){if(Z=V0(Z.times(J),j,1),H=H.times(++U),z=Y.plus(I0(Z,H,j,1)),xJ(z.d).slice(0,j)===xJ(Y.d).slice(0,j)){W=C;while(W--)Y=V0(Y.times(Y),j,1);if($==null)if(V<3&&QQ(Y.d,j-Q,K,V))q.precision=j+=10,H=Z=z=new q(1),U=0,V++;else return V0(Y,q.precision=w,K,C0=!0);else return q.precision=w,Y}Y=z}},u$=function(J,$){var H,Q,W,Z,Y,z,j,V,U,C,q,K=1,w=10,O=J,h=O.d,b=O.constructor,N=b.rounding,x=b.precision;if(O.s<0||!h||!h[0]||!O.e&&h[0]==1&&h.length==1)return new b(h&&!h[0]?(-Infinity):O.s!=1?NaN:h?0:O);if($==null)C0=!1,U=x;else U=$;if(b.precision=U+=w,H=xJ(h),Q=H.charAt(0),Math.abs(Z=O.e)<1500000000000000){while(Q<7&&Q!=1||Q==1&&H.charAt(1)>3)O=O.times(J),H=xJ(O.d),Q=H.charAt(0),K++;if(Z=O.e,Q>1)O=new b("0."+H),Z++;else O=new b(Q+"."+H.slice(1))}else return V=H8(b,U+2,x).times(Z+""),O=u$(new b(Q+"."+H.slice(1)),U-w).plus(V),b.precision=x,$==null?V0(O,x,N,C0=!0):O;C=O,j=Y=O=I0(O.minus(1),O.plus(1),U,1),q=V0(O.times(O),U,1),W=3;for(;;){if(Y=V0(Y.times(q),U,1),V=j.plus(I0(Y,new b(W),U,1)),xJ(V.d).slice(0,U)===xJ(j.d).slice(0,U)){if(j=j.times(2),Z!==0)j=j.plus(H8(b,U+2,x).times(Z+""));if(j=I0(j,new b(K),U,1),$==null)if(QQ(j.d,U-w,N,z))b.precision=U+=w,V=Y=O=I0(C.minus(1),C.plus(1),U,1),q=V0(O.times(O),U,1),W=z=1;else return V0(j,b.precision=x,N,C0=!0);else return b.precision=x,j}j=V,W+=2}},jY=function(J){return String(J.s*J.s/0)},c6=function(J,$){var H,Q,W;if((H=$.indexOf("."))>-1)$=$.replace(".","");if((Q=$.search(/e/i))>0){if(H<0)H=Q;H+=+$.slice(Q+1),$=$.substring(0,Q)}else if(H<0)H=$.length;for(Q=0;$.charCodeAt(Q)===48;Q++);for(W=$.length;$.charCodeAt(W-1)===48;--W);if($=$.slice(Q,W),$){if(W-=Q,J.e=H=H-Q-1,J.d=[],Q=(H+1)%X0,H<0)Q+=X0;if(Q<W){if(Q)J.d.push(+$.slice(0,Q));for(W-=X0;Q<W;)J.d.push(+$.slice(Q,Q+=X0));$=$.slice(Q),Q=X0-$.length}else Q-=W;for(;Q--;)$+="0";if(J.d.push(+$),C0){if(J.e>J.constructor.maxE)J.d=null,J.e=NaN;else if(J.e<J.constructor.minE)J.e=0,J.d=[0]}}else J.e=0,J.d=[0];return J},j9=function(J,$){var H,Q,W,Z,Y,z,j,V,U;if($.indexOf("_")>-1){if($=$.replace(/(\d)_(?=\d)/g,"$1"),WY.test($))return c6(J,$)}else if($==="Infinity"||$==="NaN"){if(!+$)J.s=NaN;return J.e=NaN,J.d=null,J}if(Q9.test($))H=16,$=$.toLowerCase();else if(H9.test($))H=2;else if(W9.test($))H=8;else throw Error(c$+$);if(Z=$.search(/p/i),Z>0)j=+$.slice(Z+1),$=$.substring(2,Z);else $=$.slice(2);if(Z=$.indexOf("."),Y=Z>=0,Q=J.constructor,Y)$=$.replace(".",""),z=$.length,Z=z-Z,W=YY(Q,new Q(H),Z,Z*2);V=oQ($,H,F$),U=V.length-1;for(Z=U;V[Z]===0;--Z)V.pop();if(Z<0)return new Q(J.s*0);if(J.e=W8(V,U),J.d=V,C0=!1,Y)J=I0(J,W,z*4);if(j)J=J.times(Math.abs(j)<54?bJ(2,j):WQ.pow(2,j));return C0=!0,J},V9=function(J,$){var H,Q=$.d.length;if(Q<3)return $.isZero()?$:AH(J,2,$,$);H=1.4*Math.sqrt(Q),H=H>16?16:H|0,$=$.times(1/Z8(5,H)),$=AH(J,2,$,$);var W,Z=new J(5),Y=new J(16),z=new J(20);for(;H--;)W=$.times($),$=$.times(Z.plus(W.times(Y.times(W).minus(z))));return $},AH=function(J,$,H,Q,W){var Z,Y,z,j,V=1,U=J.precision,C=Math.ceil(U/X0);C0=!1,j=H.times(H),z=new J(Q);for(;;){if(Y=I0(z.times(j),new J($++*$++),U,1),z=W?Q.plus(Y):Q.minus(Y),Q=I0(Y.times(j),new J($++*$++),U,1),Y=z.plus(Q),Y.d[C]!==void 0){for(Z=C;Y.d[Z]===z.d[Z]&&Z--;);if(Z==-1)break}Z=z,z=Q,Q=Y,Y=Z,V++}return C0=!0,Y.d.length=C+1,Y},Z8=function(J,$){var H=J;while(--$)H*=J;return H},VY=function(J,$){var H,Q=$.s<0,W=G$(J,J.precision,1),Z=W.times(0.5);if($=$.abs(),$.lte(Z))return k$=Q?4:1,$;if(H=$.divToInt(W),H.isZero())k$=Q?3:2;else{if($=$.minus(H.times(W)),$.lte(Z))return k$=eZ(H)?Q?2:3:Q?4:1,$;k$=eZ(H)?Q?1:4:Q?3:2}return $.minus(W).abs()},s6=function(J,$,H,Q){var W,Z,Y,z,j,V,U,C,q,K=J.constructor,w=H!==void 0;if(w)if(eJ(H,1,s$),Q===void 0)Q=K.rounding;else eJ(Q,0,8);else H=K.precision,Q=K.rounding;if(!J.isFinite())U=jY(J);else{if(U=M$(J),Y=U.indexOf("."),w){if(W=2,$==16)H=H*4-3;else if($==8)H=H*3-2}else W=$;if(Y>=0)U=U.replace(".",""),q=new K(1),q.e=U.length-Y,q.d=oQ(M$(q),10,W),q.e=q.d.length;C=oQ(U,10,W),Z=j=C.length;for(;C[--j]==0;)C.pop();if(!C[0])U=w?"0p+0":"0";else{if(Y<0)Z--;else J=new K(J),J.d=C,J.e=Z,J=I0(J,q,H,Q,0,W),C=J.d,Z=J.e,V=JY;if(Y=C[H],z=W/2,V=V||C[H+1]!==void 0,V=Q<4?(Y!==void 0||V)&&(Q===0||Q===(J.s<0?3:2)):Y>z||Y===z&&(Q===4||V||Q===6&&C[H-1]&1||Q===(J.s<0?8:7)),C.length=H,V){for(;++C[--H]>W-1;)if(C[H]=0,!H)++Z,C.unshift(1)}for(j=C.length;!C[j-1];--j);for(Y=0,U="";Y<j;Y++)U+=d6.charAt(C[Y]);if(w){if(j>1)if($==16||$==8){Y=$==16?4:3;for(--j;j%Y;j++)U+="0";C=oQ(U,W,$);for(j=C.length;!C[j-1];--j);for(Y=1,U="1.";Y<j;Y++)U+=d6.charAt(C[Y])}else U=U.charAt(0)+"."+U.slice(1);U=U+(Z<0?"p":"p+")+Z}else if(Z<0){for(;++Z;)U="0"+U;U="0."+U}else if(++Z>j)for(Z-=j;Z--;)U+="0";else if(Z<j)U=U.slice(0,Z)+"."+U.slice(Z)}U=($==16?"0x":$==2?"0b":$==8?"0o":"")+U}return J.s<0?"-"+U:U},tZ=function(J,$){if(J.length>$)return J.length=$,!0},G9=function(J){return new this(J).abs()},F9=function(J){return new this(J).acos()},X9=function(J){return new this(J).acosh()},U9=function(J,$){return new this(J).plus($)},D9=function(J){return new this(J).asin()},q9=function(J){return new this(J).asinh()},v9=function(J){return new this(J).atan()},C9=function(J){return new this(J).atanh()},R9=function(J,$){J=new this(J),$=new this($);var H,Q=this.precision,W=this.rounding,Z=Q+4;if(!J.s||!$.s)H=new this(NaN);else if(!J.d&&!$.d)H=G$(this,Z,1).times($.s>0?0.25:0.75),H.s=J.s;else if(!$.d||J.isZero())H=$.s<0?G$(this,Q,W):new this(0),H.s=J.s;else if(!J.d||$.isZero())H=G$(this,Z,1).times(0.5),H.s=J.s;else if($.s<0)this.precision=Z,this.rounding=1,H=this.atan(I0(J,$,Z,1)),$=G$(this,Z,1),this.precision=Q,this.rounding=W,H=J.s<0?H.minus($):H.plus($);else H=this.atan(I0(J,$,Z,1));return H},B9=function(J){return new this(J).cbrt()},M9=function(J){return V0(J=new this(J),J.e+1,2)},O9=function(J,$,H){return new this(J).clamp($,H)},L9=function(J){if(!J||typeof J!=="object")throw Error(Q8+"Object expected");var $,H,Q,W=J.defaults===!0,Z=["precision",1,s$,"rounding",0,8,"toExpNeg",-xH,0,"toExpPos",0,xH,"maxE",0,xH,"minE",-xH,0,"modulo",0,9];for($=0;$<Z.length;$+=3){if(H=Z[$],W)this[H]=p6[H];if((Q=J[H])!==void 0)if(IJ(Q)===Q&&Q>=Z[$+1]&&Q<=Z[$+2])this[H]=Q;else throw Error(c$+H+": "+Q)}if(H="crypto",W)this[H]=p6[H];if((Q=J[H])!==void 0)if(Q===!0||Q===!1||Q===0||Q===1)if(Q)if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[H]=!0;else throw Error(HY);else this[H]=!1;else throw Error(c$+H+": "+Q);return this},K9=function(J){return new this(J).cos()},h9=function(J){return new this(J).cosh()},GY=function(J){var $,H,Q;function W(Z){var Y,z,j,V=this;if(!(V instanceof W))return new W(Z);if(V.constructor=W,oZ(Z)){if(V.s=Z.s,C0)if(!Z.d||Z.e>W.maxE)V.e=NaN,V.d=null;else if(Z.e<W.minE)V.e=0,V.d=[0];else V.e=Z.e,V.d=Z.d.slice();else V.e=Z.e,V.d=Z.d?Z.d.slice():Z.d;return}if(j=typeof Z,j==="number"){if(Z===0){V.s=1/Z<0?-1:1,V.e=0,V.d=[0];return}if(Z<0)Z=-Z,V.s=-1;else V.s=1;if(Z===~~Z&&Z<1e7){for(Y=0,z=Z;z>=10;z/=10)Y++;if(C0)if(Y>W.maxE)V.e=NaN,V.d=null;else if(Y<W.minE)V.e=0,V.d=[0];else V.e=Y,V.d=[Z];else V.e=Y,V.d=[Z];return}else if(Z*0!==0){if(!Z)V.s=NaN;V.e=NaN,V.d=null;return}return c6(V,Z.toString())}else if(j!=="string")throw Error(c$+Z);if((z=Z.charCodeAt(0))===45)Z=Z.slice(1),V.s=-1;else{if(z===43)Z=Z.slice(1);V.s=1}return WY.test(Z)?c6(V,Z):j9(V,Z)}if(W.prototype=s,W.ROUND_UP=0,W.ROUND_DOWN=1,W.ROUND_CEIL=2,W.ROUND_FLOOR=3,W.ROUND_HALF_UP=4,W.ROUND_HALF_DOWN=5,W.ROUND_HALF_EVEN=6,W.ROUND_HALF_CEIL=7,W.ROUND_HALF_FLOOR=8,W.EUCLID=9,W.config=W.set=L9,W.clone=GY,W.isDecimal=oZ,W.abs=G9,W.acos=F9,W.acosh=X9,W.add=U9,W.asin=D9,W.asinh=q9,W.atan=v9,W.atanh=C9,W.atan2=R9,W.cbrt=B9,W.ceil=M9,W.clamp=O9,W.cos=K9,W.cosh=h9,W.div=E9,W.exp=S9,W.floor=w9,W.hypot=b9,W.ln=_9,W.log=P9,W.log10=g9,W.log2=N9,W.max=k9,W.min=x9,W.mod=A9,W.mul=T9,W.pow=f9,W.random=y9,W.round=I9,W.sign=m9,W.sin=d9,W.sinh=p9,W.sqrt=l9,W.sub=u9,W.sum=c9,W.tan=s9,W.tanh=a9,W.trunc=i9,J===void 0)J={};if(J){if(J.defaults!==!0){Q=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"];for($=0;$<Q.length;)if(!J.hasOwnProperty(H=Q[$++]))J[H]=this[H]}}return W.config(J),W},E9=function(J,$){return new this(J).div($)},S9=function(J){return new this(J).exp()},w9=function(J){return V0(J=new this(J),J.e+1,3)},b9=function(){var J,$,H=new this(0);C0=!1;for(J=0;J<arguments.length;)if($=new this(arguments[J++]),!$.d){if($.s)return C0=!0,new this(Infinity);H=$}else if(H.d)H=H.plus($.times($));return C0=!0,H.sqrt()},oZ=function(J){return J instanceof WQ||J&&J.toStringTag===QY||!1},_9=function(J){return new this(J).ln()},P9=function(J,$){return new this(J).log($)},N9=function(J){return new this(J).log(2)},g9=function(J){return new this(J).log(10)},k9=function(){return zY(this,arguments,"lt")},x9=function(){return zY(this,arguments,"gt")},A9=function(J,$){return new this(J).mod($)},T9=function(J,$){return new this(J).mul($)},f9=function(J,$){return new this(J).pow($)},y9=function(J){var $,H,Q,W,Z=0,Y=new this(1),z=[];if(J===void 0)J=this.precision;else eJ(J,1,s$);if(Q=Math.ceil(J/X0),!this.crypto)for(;Z<Q;)z[Z++]=Math.random()*1e7|0;else if(crypto.getRandomValues){$=crypto.getRandomValues(new Uint32Array(Q));for(;Z<Q;)if(W=$[Z],W>=4290000000)$[Z]=crypto.getRandomValues(new Uint32Array(1))[0];else z[Z++]=W%1e7}else if(crypto.randomBytes){$=crypto.randomBytes(Q*=4);for(;Z<Q;)if(W=$[Z]+($[Z+1]<<8)+($[Z+2]<<16)+(($[Z+3]&127)<<24),W>=2140000000)crypto.randomBytes(4).copy($,Z);else z.push(W%1e7),Z+=4;Z=Q/4}else throw Error(HY);if(Q=z[--Z],J%=X0,Q&&J)W=bJ(10,X0-J),z[Z]=(Q/W|0)*W;for(;z[Z]===0;Z--)z.pop();if(Z<0)H=0,z=[0];else{H=-1;for(;z[0]===0;H-=X0)z.shift();for(Q=1,W=z[0];W>=10;W/=10)Q++;if(Q<X0)H-=X0-Q}return Y.e=H,Y.d=z,Y},I9=function(J){return V0(J=new this(J),J.e+1,this.rounding)},m9=function(J){return J=new this(J),J.d?J.d[0]?J.s:0*J.s:J.s||NaN},d9=function(J){return new this(J).sin()},p9=function(J){return new this(J).sinh()},l9=function(J){return new this(J).sqrt()},u9=function(J,$){return new this(J).sub($)},c9=function(){var J=0,$=arguments,H=new this($[J]);C0=!1;for(;H.s&&++J<$.length;)H=H.plus($[J]);return C0=!0,V0(H,this.precision,this.rounding)},s9=function(J){return new this(J).tan()},a9=function(J){return new this(J).tanh()},i9=function(J){return V0(J=new this(J),J.e+1,1)};/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var xH=9000000000000000,s$=1e9,d6="0123456789abcdef",J8="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",$8="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",p6={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-xH,maxE:xH,crypto:!1},JY,k$,C0=!0,Q8="[DecimalError] ",c$=Q8+"Invalid argument: ",$Y=Q8+"Precision limit exceeded",HY=Q8+"crypto unavailable",QY="[object Decimal]",IJ=Math.floor,bJ=Math.pow,H9=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Q9=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,W9=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,WY=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,F$=1e7,X0=7,Z9=9007199254740991,Y9=J8.length-1,l6=$8.length-1,s={toStringTag:QY};s.absoluteValue=s.abs=function(){var J=new this.constructor(this);if(J.s<0)J.s=1;return V0(J)};s.ceil=function(){return V0(new this.constructor(this),this.e+1,2)};s.clampedTo=s.clamp=function(J,$){var H,Q=this,W=Q.constructor;if(J=new W(J),$=new W($),!J.s||!$.s)return new W(NaN);if(J.gt($))throw Error(c$+$);return H=Q.cmp(J),H<0?J:Q.cmp($)>0?$:new W(Q)};s.comparedTo=s.cmp=function(J){var $,H,Q,W,Z=this,Y=Z.d,z=(J=new Z.constructor(J)).d,j=Z.s,V=J.s;if(!Y||!z)return!j||!V?NaN:j!==V?j:Y===z?0:!Y^j<0?1:-1;if(!Y[0]||!z[0])return Y[0]?j:z[0]?-V:0;if(j!==V)return j;if(Z.e!==J.e)return Z.e>J.e^j<0?1:-1;Q=Y.length,W=z.length;for($=0,H=Q<W?Q:W;$<H;++$)if(Y[$]!==z[$])return Y[$]>z[$]^j<0?1:-1;return Q===W?0:Q>W^j<0?1:-1};s.cosine=s.cos=function(){var J,$,H=this,Q=H.constructor;if(!H.d)return new Q(NaN);if(!H.d[0])return new Q(1);return J=Q.precision,$=Q.rounding,Q.precision=J+Math.max(H.e,H.sd())+X0,Q.rounding=1,H=z9(Q,VY(Q,H)),Q.precision=J,Q.rounding=$,V0(k$==2||k$==3?H.neg():H,J,$,!0)};s.cubeRoot=s.cbrt=function(){var J,$,H,Q,W,Z,Y,z,j,V,U=this,C=U.constructor;if(!U.isFinite()||U.isZero())return new C(U);if(C0=!1,Z=U.s*bJ(U.s*U,0.3333333333333333),!Z||Math.abs(Z)==Infinity){if(H=xJ(U.d),J=U.e,Z=(J-H.length+1)%3)H+=Z==1||Z==-2?"0":"00";if(Z=bJ(H,0.3333333333333333),J=IJ((J+1)/3)-(J%3==(J<0?-1:2)),Z==Infinity)H="5e"+J;else H=Z.toExponential(),H=H.slice(0,H.indexOf("e")+1)+J;Q=new C(H),Q.s=U.s}else Q=new C(Z.toString());Y=(J=C.precision)+3;for(;;)if(z=Q,j=z.times(z).times(z),V=j.plus(U),Q=I0(V.plus(U).times(z),V.plus(j),Y+2,1),xJ(z.d).slice(0,Y)===(H=xJ(Q.d)).slice(0,Y))if(H=H.slice(Y-3,Y+1),H=="9999"||!W&&H=="4999"){if(!W){if(V0(z,J+1,0),z.times(z).times(z).eq(U)){Q=z;break}}Y+=4,W=1}else{if(!+H||!+H.slice(1)&&H.charAt(0)=="5")V0(Q,J+1,1),$=!Q.times(Q).times(Q).eq(U);break}return C0=!0,V0(Q,J,C.rounding,$)};s.decimalPlaces=s.dp=function(){var J,$=this.d,H=NaN;if($){if(J=$.length-1,H=(J-IJ(this.e/X0))*X0,J=$[J],J)for(;J%10==0;J/=10)H--;if(H<0)H=0}return H};s.dividedBy=s.div=function(J){return I0(this,new this.constructor(J))};s.dividedToIntegerBy=s.divToInt=function(J){var $=this,H=$.constructor;return V0(I0($,new H(J),0,1,1),H.precision,H.rounding)};s.equals=s.eq=function(J){return this.cmp(J)===0};s.floor=function(){return V0(new this.constructor(this),this.e+1,3)};s.greaterThan=s.gt=function(J){return this.cmp(J)>0};s.greaterThanOrEqualTo=s.gte=function(J){var $=this.cmp(J);return $==1||$===0};s.hyperbolicCosine=s.cosh=function(){var J,$,H,Q,W,Z=this,Y=Z.constructor,z=new Y(1);if(!Z.isFinite())return new Y(Z.s?Infinity:NaN);if(Z.isZero())return z;if(H=Y.precision,Q=Y.rounding,Y.precision=H+Math.max(Z.e,Z.sd())+4,Y.rounding=1,W=Z.d.length,W<32)J=Math.ceil(W/3),$=(1/Z8(4,J)).toString();else J=16,$="2.3283064365386962890625e-10";Z=AH(Y,1,Z.times($),new Y(1),!0);var j,V=J,U=new Y(8);for(;V--;)j=Z.times(Z),Z=z.minus(j.times(U.minus(j.times(U))));return V0(Z,Y.precision=H,Y.rounding=Q,!0)};s.hyperbolicSine=s.sinh=function(){var J,$,H,Q,W=this,Z=W.constructor;if(!W.isFinite()||W.isZero())return new Z(W);if($=Z.precision,H=Z.rounding,Z.precision=$+Math.max(W.e,W.sd())+4,Z.rounding=1,Q=W.d.length,Q<3)W=AH(Z,2,W,W,!0);else{J=1.4*Math.sqrt(Q),J=J>16?16:J|0,W=W.times(1/Z8(5,J)),W=AH(Z,2,W,W,!0);var Y,z=new Z(5),j=new Z(16),V=new Z(20);for(;J--;)Y=W.times(W),W=W.times(z.plus(Y.times(j.times(Y).plus(V))))}return Z.precision=$,Z.rounding=H,V0(W,$,H,!0)};s.hyperbolicTangent=s.tanh=function(){var J,$,H=this,Q=H.constructor;if(!H.isFinite())return new Q(H.s);if(H.isZero())return new Q(H);return J=Q.precision,$=Q.rounding,Q.precision=J+7,Q.rounding=1,I0(H.sinh(),H.cosh(),Q.precision=J,Q.rounding=$)};s.inverseCosine=s.acos=function(){var J,$=this,H=$.constructor,Q=$.abs().cmp(1),W=H.precision,Z=H.rounding;if(Q!==-1)return Q===0?$.isNeg()?G$(H,W,Z):new H(0):new H(NaN);if($.isZero())return G$(H,W+4,Z).times(0.5);return H.precision=W+6,H.rounding=1,$=$.asin(),J=G$(H,W+4,Z).times(0.5),H.precision=W,H.rounding=Z,J.minus($)};s.inverseHyperbolicCosine=s.acosh=function(){var J,$,H=this,Q=H.constructor;if(H.lte(1))return new Q(H.eq(1)?0:NaN);if(!H.isFinite())return new Q(H);return J=Q.precision,$=Q.rounding,Q.precision=J+Math.max(Math.abs(H.e),H.sd())+4,Q.rounding=1,C0=!1,H=H.times(H).minus(1).sqrt().plus(H),C0=!0,Q.precision=J,Q.rounding=$,H.ln()};s.inverseHyperbolicSine=s.asinh=function(){var J,$,H=this,Q=H.constructor;if(!H.isFinite()||H.isZero())return new Q(H);return J=Q.precision,$=Q.rounding,Q.precision=J+2*Math.max(Math.abs(H.e),H.sd())+6,Q.rounding=1,C0=!1,H=H.times(H).plus(1).sqrt().plus(H),C0=!0,Q.precision=J,Q.rounding=$,H.ln()};s.inverseHyperbolicTangent=s.atanh=function(){var J,$,H,Q,W=this,Z=W.constructor;if(!W.isFinite())return new Z(NaN);if(W.e>=0)return new Z(W.abs().eq(1)?W.s/0:W.isZero()?W:NaN);if(J=Z.precision,$=Z.rounding,Q=W.sd(),Math.max(Q,J)<2*-W.e-1)return V0(new Z(W),J,$,!0);return Z.precision=H=Q-W.e,W=I0(W.plus(1),new Z(1).minus(W),H+J,1),Z.precision=J+4,Z.rounding=1,W=W.ln(),Z.precision=J,Z.rounding=$,W.times(0.5)};s.inverseSine=s.asin=function(){var J,$,H,Q,W=this,Z=W.constructor;if(W.isZero())return new Z(W);if($=W.abs().cmp(1),H=Z.precision,Q=Z.rounding,$!==-1){if($===0)return J=G$(Z,H+4,Q).times(0.5),J.s=W.s,J;return new Z(NaN)}return Z.precision=H+6,Z.rounding=1,W=W.div(new Z(1).minus(W.times(W)).sqrt().plus(1)).atan(),Z.precision=H,Z.rounding=Q,W.times(2)};s.inverseTangent=s.atan=function(){var J,$,H,Q,W,Z,Y,z,j,V=this,U=V.constructor,C=U.precision,q=U.rounding;if(!V.isFinite()){if(!V.s)return new U(NaN);if(C+4<=l6)return Y=G$(U,C+4,q).times(0.5),Y.s=V.s,Y}else if(V.isZero())return new U(V);else if(V.abs().eq(1)&&C+4<=l6)return Y=G$(U,C+4,q).times(0.25),Y.s=V.s,Y;U.precision=z=C+10,U.rounding=1,H=Math.min(28,z/X0+2|0);for(J=H;J;--J)V=V.div(V.times(V).plus(1).sqrt().plus(1));C0=!1,$=Math.ceil(z/X0),Q=1,j=V.times(V),Y=new U(V),W=V;for(;J!==-1;)if(W=W.times(j),Z=Y.minus(W.div(Q+=2)),W=W.times(j),Y=Z.plus(W.div(Q+=2)),Y.d[$]!==void 0)for(J=$;Y.d[J]===Z.d[J]&&J--;);if(H)Y=Y.times(2<<H-1);return C0=!0,V0(Y,U.precision=C,U.rounding=q,!0)};s.isFinite=function(){return!!this.d};s.isInteger=s.isInt=function(){return!!this.d&&IJ(this.e/X0)>this.d.length-2};s.isNaN=function(){return!this.s};s.isNegative=s.isNeg=function(){return this.s<0};s.isPositive=s.isPos=function(){return this.s>0};s.isZero=function(){return!!this.d&&this.d[0]===0};s.lessThan=s.lt=function(J){return this.cmp(J)<0};s.lessThanOrEqualTo=s.lte=function(J){return this.cmp(J)<1};s.logarithm=s.log=function(J){var $,H,Q,W,Z,Y,z,j,V=this,U=V.constructor,C=U.precision,q=U.rounding,K=5;if(J==null)J=new U(10),$=!0;else{if(J=new U(J),H=J.d,J.s<0||!H||!H[0]||J.eq(1))return new U(NaN);$=J.eq(10)}if(H=V.d,V.s<0||!H||!H[0]||V.eq(1))return new U(H&&!H[0]?(-Infinity):V.s!=1?NaN:H?0:Infinity);if($)if(H.length>1)Z=!0;else{for(W=H[0];W%10===0;)W/=10;Z=W!==1}if(C0=!1,z=C+K,Y=u$(V,z),Q=$?H8(U,z+10):u$(J,z),j=I0(Y,Q,z,1),QQ(j.d,W=C,q))do if(z+=10,Y=u$(V,z),Q=$?H8(U,z+10):u$(J,z),j=I0(Y,Q,z,1),!Z){if(+xJ(j.d).slice(W+1,W+15)+1==100000000000000)j=V0(j,C+1,0);break}while(QQ(j.d,W+=10,q));return C0=!0,V0(j,C,q)};s.minus=s.sub=function(J){var $,H,Q,W,Z,Y,z,j,V,U,C,q,K=this,w=K.constructor;if(J=new w(J),!K.d||!J.d){if(!K.s||!J.s)J=new w(NaN);else if(K.d)J.s=-J.s;else J=new w(J.d||K.s!==J.s?K:NaN);return J}if(K.s!=J.s)return J.s=-J.s,K.plus(J);if(V=K.d,q=J.d,z=w.precision,j=w.rounding,!V[0]||!q[0]){if(q[0])J.s=-J.s;else if(V[0])J=new w(K);else return new w(j===3?-0:0);return C0?V0(J,z,j):J}if(H=IJ(J.e/X0),U=IJ(K.e/X0),V=V.slice(),Z=U-H,Z){if(C=Z<0,C)$=V,Z=-Z,Y=q.length;else $=q,H=U,Y=V.length;if(Q=Math.max(Math.ceil(z/X0),Y)+2,Z>Q)Z=Q,$.length=1;$.reverse();for(Q=Z;Q--;)$.push(0);$.reverse()}else{if(Q=V.length,Y=q.length,C=Q<Y,C)Y=Q;for(Q=0;Q<Y;Q++)if(V[Q]!=q[Q]){C=V[Q]<q[Q];break}Z=0}if(C)$=V,V=q,q=$,J.s=-J.s;Y=V.length;for(Q=q.length-Y;Q>0;--Q)V[Y++]=0;for(Q=q.length;Q>Z;){if(V[--Q]<q[Q]){for(W=Q;W&&V[--W]===0;)V[W]=F$-1;--V[W],V[Q]+=F$}V[Q]-=q[Q]}for(;V[--Y]===0;)V.pop();for(;V[0]===0;V.shift())--H;if(!V[0])return new w(j===3?-0:0);return J.d=V,J.e=W8(V,H),C0?V0(J,z,j):J};s.modulo=s.mod=function(J){var $,H=this,Q=H.constructor;if(J=new Q(J),!H.d||!J.s||J.d&&!J.d[0])return new Q(NaN);if(!J.d||H.d&&!H.d[0])return V0(new Q(H),Q.precision,Q.rounding);if(C0=!1,Q.modulo==9)$=I0(H,J.abs(),0,3,1),$.s*=J.s;else $=I0(H,J,0,Q.modulo,1);return $=$.times(J),C0=!0,H.minus($)};s.naturalExponential=s.exp=function(){return u6(this)};s.naturalLogarithm=s.ln=function(){return u$(this)};s.negated=s.neg=function(){var J=new this.constructor(this);return J.s=-J.s,V0(J)};s.plus=s.add=function(J){var $,H,Q,W,Z,Y,z,j,V,U,C=this,q=C.constructor;if(J=new q(J),!C.d||!J.d){if(!C.s||!J.s)J=new q(NaN);else if(!C.d)J=new q(J.d||C.s===J.s?C:NaN);return J}if(C.s!=J.s)return J.s=-J.s,C.minus(J);if(V=C.d,U=J.d,z=q.precision,j=q.rounding,!V[0]||!U[0]){if(!U[0])J=new q(C);return C0?V0(J,z,j):J}if(Z=IJ(C.e/X0),Q=IJ(J.e/X0),V=V.slice(),W=Z-Q,W){if(W<0)H=V,W=-W,Y=U.length;else H=U,Q=Z,Y=V.length;if(Z=Math.ceil(z/X0),Y=Z>Y?Z+1:Y+1,W>Y)W=Y,H.length=1;H.reverse();for(;W--;)H.push(0);H.reverse()}if(Y=V.length,W=U.length,Y-W<0)W=Y,H=U,U=V,V=H;for($=0;W;)$=(V[--W]=V[W]+U[W]+$)/F$|0,V[W]%=F$;if($)V.unshift($),++Q;for(Y=V.length;V[--Y]==0;)V.pop();return J.d=V,J.e=W8(V,Q),C0?V0(J,z,j):J};s.precision=s.sd=function(J){var $,H=this;if(J!==void 0&&J!==!!J&&J!==1&&J!==0)throw Error(c$+J);if(H.d){if($=ZY(H.d),J&&H.e+1>$)$=H.e+1}else $=NaN;return $};s.round=function(){var J=this,$=J.constructor;return V0(new $(J),J.e+1,$.rounding)};s.sine=s.sin=function(){var J,$,H=this,Q=H.constructor;if(!H.isFinite())return new Q(NaN);if(H.isZero())return new Q(H);return J=Q.precision,$=Q.rounding,Q.precision=J+Math.max(H.e,H.sd())+X0,Q.rounding=1,H=V9(Q,VY(Q,H)),Q.precision=J,Q.rounding=$,V0(k$>2?H.neg():H,J,$,!0)};s.squareRoot=s.sqrt=function(){var J,$,H,Q,W,Z,Y=this,z=Y.d,j=Y.e,V=Y.s,U=Y.constructor;if(V!==1||!z||!z[0])return new U(!V||V<0&&(!z||z[0])?NaN:z?Y:Infinity);if(C0=!1,V=Math.sqrt(+Y),V==0||V==Infinity){if($=xJ(z),($.length+j)%2==0)$+="0";if(V=Math.sqrt($),j=IJ((j+1)/2)-(j<0||j%2),V==Infinity)$="5e"+j;else $=V.toExponential(),$=$.slice(0,$.indexOf("e")+1)+j;Q=new U($)}else Q=new U(V.toString());H=(j=U.precision)+3;for(;;)if(Z=Q,Q=Z.plus(I0(Y,Z,H+2,1)).times(0.5),xJ(Z.d).slice(0,H)===($=xJ(Q.d)).slice(0,H))if($=$.slice(H-3,H+1),$=="9999"||!W&&$=="4999"){if(!W){if(V0(Z,j+1,0),Z.times(Z).eq(Y)){Q=Z;break}}H+=4,W=1}else{if(!+$||!+$.slice(1)&&$.charAt(0)=="5")V0(Q,j+1,1),J=!Q.times(Q).eq(Y);break}return C0=!0,V0(Q,j,U.rounding,J)};s.tangent=s.tan=function(){var J,$,H=this,Q=H.constructor;if(!H.isFinite())return new Q(NaN);if(H.isZero())return new Q(H);return J=Q.precision,$=Q.rounding,Q.precision=J+10,Q.rounding=1,H=H.sin(),H.s=1,H=I0(H,new Q(1).minus(H.times(H)).sqrt(),J+10,0),Q.precision=J,Q.rounding=$,V0(k$==2||k$==4?H.neg():H,J,$,!0)};s.times=s.mul=function(J){var $,H,Q,W,Z,Y,z,j,V,U=this,C=U.constructor,q=U.d,K=(J=new C(J)).d;if(J.s*=U.s,!q||!q[0]||!K||!K[0])return new C(!J.s||q&&!q[0]&&!K||K&&!K[0]&&!q?NaN:!q||!K?J.s/0:J.s*0);if(H=IJ(U.e/X0)+IJ(J.e/X0),j=q.length,V=K.length,j<V)Z=q,q=K,K=Z,Y=j,j=V,V=Y;Z=[],Y=j+V;for(Q=Y;Q--;)Z.push(0);for(Q=V;--Q>=0;){$=0;for(W=j+Q;W>Q;)z=Z[W]+K[Q]*q[W-Q-1]+$,Z[W--]=z%F$|0,$=z/F$|0;Z[W]=(Z[W]+$)%F$|0}for(;!Z[--Y];)Z.pop();if($)++H;else Z.shift();return J.d=Z,J.e=W8(Z,H),C0?V0(J,C.precision,C.rounding):J};s.toBinary=function(J,$){return s6(this,2,J,$)};s.toDecimalPlaces=s.toDP=function(J,$){var H=this,Q=H.constructor;if(H=new Q(H),J===void 0)return H;if(eJ(J,0,s$),$===void 0)$=Q.rounding;else eJ($,0,8);return V0(H,J+H.e+1,$)};s.toExponential=function(J,$){var H,Q=this,W=Q.constructor;if(J===void 0)H=M$(Q,!0);else{if(eJ(J,0,s$),$===void 0)$=W.rounding;else eJ($,0,8);Q=V0(new W(Q),J+1,$),H=M$(Q,!0,J+1)}return Q.isNeg()&&!Q.isZero()?"-"+H:H};s.toFixed=function(J,$){var H,Q,W=this,Z=W.constructor;if(J===void 0)H=M$(W);else{if(eJ(J,0,s$),$===void 0)$=Z.rounding;else eJ($,0,8);Q=V0(new Z(W),J+W.e+1,$),H=M$(Q,!1,J+Q.e+1)}return W.isNeg()&&!W.isZero()?"-"+H:H};s.toFraction=function(J){var $,H,Q,W,Z,Y,z,j,V,U,C,q,K=this,w=K.d,O=K.constructor;if(!w)return new O(K);if(V=H=new O(1),Q=j=new O(0),$=new O(Q),Z=$.e=ZY(w)-K.e-1,Y=Z%X0,$.d[0]=bJ(10,Y<0?X0+Y:Y),J==null)J=Z>0?$:V;else{if(z=new O(J),!z.isInt()||z.lt(V))throw Error(c$+z);J=z.gt($)?Z>0?$:V:z}C0=!1,z=new O(xJ(w)),U=O.precision,O.precision=Z=w.length*X0*2;for(;;){if(C=I0(z,$,0,1,1),W=H.plus(C.times(Q)),W.cmp(J)==1)break;H=Q,Q=W,W=V,V=j.plus(C.times(W)),j=W,W=$,$=z.minus(C.times(W)),z=W}return W=I0(J.minus(H),Q,0,1,1),j=j.plus(W.times(V)),H=H.plus(W.times(Q)),j.s=V.s=K.s,q=I0(V,Q,Z,1).minus(K).abs().cmp(I0(j,H,Z,1).minus(K).abs())<1?[V,Q]:[j,H],O.precision=U,C0=!0,q};s.toHexadecimal=s.toHex=function(J,$){return s6(this,16,J,$)};s.toNearest=function(J,$){var H=this,Q=H.constructor;if(H=new Q(H),J==null){if(!H.d)return H;J=new Q(1),$=Q.rounding}else{if(J=new Q(J),$===void 0)$=Q.rounding;else eJ($,0,8);if(!H.d)return J.s?H:J;if(!J.d){if(J.s)J.s=H.s;return J}}if(J.d[0])C0=!1,H=I0(H,J,0,$,1).times(J),C0=!0,V0(H);else J.s=H.s,H=J;return H};s.toNumber=function(){return+this};s.toOctal=function(J,$){return s6(this,8,J,$)};s.toPower=s.pow=function(J){var $,H,Q,W,Z,Y,z=this,j=z.constructor,V=+(J=new j(J));if(!z.d||!J.d||!z.d[0]||!J.d[0])return new j(bJ(+z,V));if(z=new j(z),z.eq(1))return z;if(Q=j.precision,Z=j.rounding,J.eq(1))return V0(z,Q,Z);if($=IJ(J.e/X0),$>=J.d.length-1&&(H=V<0?-V:V)<=Z9)return W=YY(j,z,H,Q),J.s<0?new j(1).div(W):V0(W,Q,Z);if(Y=z.s,Y<0){if($<J.d.length-1)return new j(NaN);if((J.d[$]&1)==0)Y=1;if(z.e==0&&z.d[0]==1&&z.d.length==1)return z.s=Y,z}if(H=bJ(+z,V),$=H==0||!isFinite(H)?IJ(V*(Math.log("0."+xJ(z.d))/Math.LN10+z.e+1)):new j(H+"").e,$>j.maxE+1||$<j.minE-1)return new j($>0?Y/0:0);if(C0=!1,j.rounding=z.s=1,H=Math.min(12,($+"").length),W=u6(J.times(u$(z,Q+H)),Q),W.d){if(W=V0(W,Q+5,1),QQ(W.d,Q,Z)){if($=Q+10,W=V0(u6(J.times(u$(z,$+H)),$),$+5,1),+xJ(W.d).slice(Q+1,Q+15)+1==100000000000000)W=V0(W,Q+1,0)}}return W.s=Y,C0=!0,j.rounding=Z,V0(W,Q,Z)};s.toPrecision=function(J,$){var H,Q=this,W=Q.constructor;if(J===void 0)H=M$(Q,Q.e<=W.toExpNeg||Q.e>=W.toExpPos);else{if(eJ(J,1,s$),$===void 0)$=W.rounding;else eJ($,0,8);Q=V0(new W(Q),J,$),H=M$(Q,J<=Q.e||Q.e<=W.toExpNeg,J)}return Q.isNeg()&&!Q.isZero()?"-"+H:H};s.toSignificantDigits=s.toSD=function(J,$){var H=this,Q=H.constructor;if(J===void 0)J=Q.precision,$=Q.rounding;else if(eJ(J,1,s$),$===void 0)$=Q.rounding;else eJ($,0,8);return V0(new Q(H),J,$)};s.toString=function(){var J=this,$=J.constructor,H=M$(J,J.e<=$.toExpNeg||J.e>=$.toExpPos);return J.isNeg()&&!J.isZero()?"-"+H:H};s.truncated=s.trunc=function(){return V0(new this.constructor(this),this.e+1,1)};s.valueOf=s.toJSON=function(){var J=this,$=J.constructor,H=M$(J,J.e<=$.toExpNeg||J.e>=$.toExpPos);return J.isNeg()?"-"+H:H};var I0=function(){function J(Q,W,Z){var Y,z=0,j=Q.length;for(Q=Q.slice();j--;)Y=Q[j]*W+z,Q[j]=Y%Z|0,z=Y/Z|0;if(z)Q.unshift(z);return Q}function $(Q,W,Z,Y){var z,j;if(Z!=Y)j=Z>Y?1:-1;else for(z=j=0;z<Z;z++)if(Q[z]!=W[z]){j=Q[z]>W[z]?1:-1;break}return j}function H(Q,W,Z,Y){var z=0;for(;Z--;)Q[Z]-=z,z=Q[Z]<W[Z]?1:0,Q[Z]=z*Y+Q[Z]-W[Z];for(;!Q[0]&&Q.length>1;)Q.shift()}return function(Q,W,Z,Y,z,j){var V,U,C,q,K,w,O,h,b,N,x,k,g,A,I,T,u,a,n,Z0,_=Q.constructor,G=Q.s==W.s?1:-1,v=Q.d,X=W.d;if(!v||!v[0]||!X||!X[0])return new _(!Q.s||!W.s||(v?X&&v[0]==X[0]:!X)?NaN:v&&v[0]==0||!X?G*0:G/0);if(j)K=1,U=Q.e-W.e;else j=F$,K=X0,U=IJ(Q.e/K)-IJ(W.e/K);n=X.length,u=v.length,b=new _(G),N=b.d=[];for(C=0;X[C]==(v[C]||0);C++);if(X[C]>(v[C]||0))U--;if(Z==null)A=Z=_.precision,Y=_.rounding;else if(z)A=Z+(Q.e-W.e)+1;else A=Z;if(A<0)N.push(1),w=!0;else{if(A=A/K+2|0,C=0,n==1){q=0,X=X[0],A++;for(;(C<u||q)&&A--;C++)I=q*j+(v[C]||0),N[C]=I/X|0,q=I%X|0;w=q||C<u}else{if(q=j/(X[0]+1)|0,q>1)X=J(X,q,j),v=J(v,q,j),n=X.length,u=v.length;T=n,x=v.slice(0,n),k=x.length;for(;k<n;)x[k++]=0;if(Z0=X.slice(),Z0.unshift(0),a=X[0],X[1]>=j/2)++a;do{if(q=0,V=$(X,x,n,k),V<0){if(g=x[0],n!=k)g=g*j+(x[1]||0);if(q=g/a|0,q>1){if(q>=j)q=j-1;if(O=J(X,q,j),h=O.length,k=x.length,V=$(O,x,h,k),V==1)q--,H(O,n<h?Z0:X,h,j)}else{if(q==0)V=q=1;O=X.slice()}if(h=O.length,h<k)O.unshift(0);if(H(x,O,k,j),V==-1){if(k=x.length,V=$(X,x,n,k),V<1)q++,H(x,n<k?Z0:X,k,j)}k=x.length}else if(V===0)q++,x=[0];if(N[C++]=q,V&&x[0])x[k++]=v[T]||0;else x=[v[T]],k=1}while((T++<u||x[0]!==void 0)&&A--);w=x[0]!==void 0}if(!N[0])N.shift()}if(K==1)b.e=U,JY=w;else{for(C=1,q=N[0];q>=10;q/=10)C++;b.e=C+U*K-1,V0(b,z?Z+b.e+1:Z,Y,w)}return b}}();s[Symbol.for("nodejs.util.inspect.custom")]=s.toString;s[Symbol.toStringTag]="Decimal";var WQ=s.constructor=GY(p6);J8=new WQ(J8);$8=new WQ($8);var F0=WQ;import{TransactionInstruction as X$} from"@solana/web3.js";function FY(J,$,H,Q,W,Z,Y,z,j,V,U,C,q,K){const w=e([G0("sqrtPriceX64"),P("startTime")]),O=[{pubkey:H,isSigner:!0,isWritable:!0},{pubkey:Q,isSigner:!1,isWritable:!1},{pubkey:$,isSigner:!1,isWritable:!0},{pubkey:Z,isSigner:!1,isWritable:!1},{pubkey:j,isSigner:!1,isWritable:!1},{pubkey:Y,isSigner:!1,isWritable:!0},{pubkey:V,isSigner:!1,isWritable:!0},{pubkey:W,isSigner:!1,isWritable:!1},{pubkey:C,isSigner:!1,isWritable:!0},{pubkey:z,isSigner:!1,isWritable:!1},{pubkey:U,isSigner:!1,isWritable:!1},{pubkey:t0,isSigner:!1,isWritable:!1},{pubkey:v$,isSigner:!1,isWritable:!1}],h=Buffer.alloc(w.span);w.encode({sqrtPriceX64:q,startTime:K},h);const b=Buffer.from([...U$.createPool,...h]);return new X$({keys:O,programId:J,data:b})}function XY(J,$,H,Q,W,Z,Y,z,j,V,U,C,q,K,w,O,h,b,N,x,k,g,A,I,T,u){const a=e([kJ("tickLowerIndex"),kJ("tickUpperIndex"),kJ("tickArrayLowerStartIndex"),kJ("tickArrayUpperStartIndex"),G0("liquidity"),P("amountMaxA"),P("amountMaxB"),cJ("withMetadata"),o("optionBaseFlag"),cJ("baseFlag")]),n=[...u?[{pubkey:u,isSigner:!1,isWritable:!0}]:[]],Z0=[{pubkey:$,isSigner:!0,isWritable:!0},{pubkey:Q,isSigner:!1,isWritable:!1},{pubkey:W,isSigner:!0,isWritable:!0},{pubkey:Z,isSigner:!1,isWritable:!0},{pubkey:Y,isSigner:!1,isWritable:!0},{pubkey:H,isSigner:!1,isWritable:!0},{pubkey:z,isSigner:!1,isWritable:!0},{pubkey:j,isSigner:!1,isWritable:!0},{pubkey:V,isSigner:!1,isWritable:!0},{pubkey:U,isSigner:!1,isWritable:!0},{pubkey:C,isSigner:!1,isWritable:!0},{pubkey:q,isSigner:!1,isWritable:!0},{pubkey:K,isSigner:!1,isWritable:!0},{pubkey:w,isSigner:!1,isWritable:!0},{pubkey:v$,isSigner:!1,isWritable:!1},{pubkey:t0,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:tJ,isSigner:!1,isWritable:!1},{pubkey:SH,isSigner:!1,isWritable:!1},{pubkey:W$,isSigner:!1,isWritable:!1},{pubkey:O,isSigner:!1,isWritable:!1},{pubkey:h,isSigner:!1,isWritable:!1},...n],_=Buffer.alloc(a.span);a.encode({tickLowerIndex:b,tickUpperIndex:N,tickArrayLowerStartIndex:x,tickArrayUpperStartIndex:k,liquidity:g,amountMaxA:A,amountMaxB:I,withMetadata:T==="create",baseFlag:!1,optionBaseFlag:0},_);const G=Buffer.from([...U$.openPosition,..._]);return new X$({keys:Z0,programId:J,data:G})}function UY(J,$,H,Q,W,Z,Y,z,j,V,U,C,q,K,w,O,h,b,N,x,k,g,A,I,T,u){const a=e([kJ("tickLowerIndex"),kJ("tickUpperIndex"),kJ("tickArrayLowerStartIndex"),kJ("tickArrayUpperStartIndex"),G0("liquidity"),P("amountMaxA"),P("amountMaxB"),cJ("withMetadata"),o("optionBaseFlag"),cJ("baseFlag")]),n=[...u?[{pubkey:u,isSigner:!1,isWritable:!0}]:[]],Z0=[{pubkey:$,isSigner:!0,isWritable:!0},{pubkey:Q,isSigner:!1,isWritable:!1},{pubkey:W,isSigner:!0,isWritable:!0},{pubkey:Z,isSigner:!1,isWritable:!0},{pubkey:Y,isSigner:!1,isWritable:!0},{pubkey:H,isSigner:!1,isWritable:!0},{pubkey:z,isSigner:!1,isWritable:!0},{pubkey:j,isSigner:!1,isWritable:!0},{pubkey:V,isSigner:!1,isWritable:!0},{pubkey:U,isSigner:!1,isWritable:!0},{pubkey:C,isSigner:!1,isWritable:!0},{pubkey:q,isSigner:!1,isWritable:!0},{pubkey:K,isSigner:!1,isWritable:!0},{pubkey:w,isSigner:!1,isWritable:!0},{pubkey:v$,isSigner:!1,isWritable:!1},{pubkey:t0,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:tJ,isSigner:!1,isWritable:!1},{pubkey:SH,isSigner:!1,isWritable:!1},{pubkey:W$,isSigner:!1,isWritable:!1},{pubkey:O,isSigner:!1,isWritable:!1},{pubkey:h,isSigner:!1,isWritable:!1},...n],_=Buffer.alloc(a.span);a.encode({tickLowerIndex:b,tickUpperIndex:N,tickArrayLowerStartIndex:x,tickArrayUpperStartIndex:k,liquidity:J0,amountMaxA:A==="MintA"?I:T,amountMaxB:A==="MintA"?T:I,withMetadata:g==="create",baseFlag:A==="MintA",optionBaseFlag:1},_);const G=Buffer.from([...U$.openPosition,..._]);return new X$({keys:Z0,programId:J,data:G})}function DY(J,$,H,Q,W){const Z=e([]),Y=[{pubkey:$,isSigner:!0,isWritable:!0},{pubkey:H,isSigner:!1,isWritable:!0},{pubkey:Q,isSigner:!1,isWritable:!0},{pubkey:W,isSigner:!1,isWritable:!0},{pubkey:t0,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!1}],z=Buffer.alloc(Z.span);Z.encode({},z);const j=Buffer.from([...U$.closePosition,...z]);return new X$({keys:Y,programId:J,data:j})}function qY(J,$,H,Q,W,Z,Y,z,j,V,U,C,q,K,w,O,h,b){const N=e([G0("liquidity"),P("amountMaxA"),P("amountMaxB"),o("optionBaseFlag"),cJ("baseFlag")]),x=[...b?[{pubkey:b,isSigner:!1,isWritable:!0}]:[]],k=[{pubkey:$,isSigner:!0,isWritable:!1},{pubkey:H,isSigner:!1,isWritable:!1},{pubkey:W,isSigner:!1,isWritable:!0},{pubkey:Z,isSigner:!1,isWritable:!0},{pubkey:Q,isSigner:!1,isWritable:!0},{pubkey:Y,isSigner:!1,isWritable:!0},{pubkey:z,isSigner:!1,isWritable:!0},{pubkey:j,isSigner:!1,isWritable:!0},{pubkey:V,isSigner:!1,isWritable:!0},{pubkey:U,isSigner:!1,isWritable:!0},{pubkey:C,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:W$,isSigner:!1,isWritable:!1},{pubkey:q,isSigner:!1,isWritable:!1},{pubkey:K,isSigner:!1,isWritable:!1},...x],g=Buffer.alloc(N.span);N.encode({liquidity:w,amountMaxA:O,amountMaxB:h,optionBaseFlag:0,baseFlag:!1},g);const A=Buffer.from([...U$.increaseLiquidity,...g]);return new X$({keys:k,programId:J,data:A})}function vY(J,$,H,Q,W,Z,Y,z,j,V,U,C,q,K,w,O,h,b){const N=e([G0("liquidity"),P("amountMaxA"),P("amountMaxB"),o("optionBaseFlag"),cJ("baseFlag")]),x=[...b?[{pubkey:b,isSigner:!1,isWritable:!0}]:[]],k=[{pubkey:$,isSigner:!0,isWritable:!1},{pubkey:H,isSigner:!1,isWritable:!1},{pubkey:W,isSigner:!1,isWritable:!0},{pubkey:Z,isSigner:!1,isWritable:!0},{pubkey:Q,isSigner:!1,isWritable:!0},{pubkey:Y,isSigner:!1,isWritable:!0},{pubkey:z,isSigner:!1,isWritable:!0},{pubkey:j,isSigner:!1,isWritable:!0},{pubkey:V,isSigner:!1,isWritable:!0},{pubkey:U,isSigner:!1,isWritable:!0},{pubkey:C,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:W$,isSigner:!1,isWritable:!1},{pubkey:q,isSigner:!1,isWritable:!1},{pubkey:K,isSigner:!1,isWritable:!1},...x],g=Buffer.alloc(N.span);N.encode({liquidity:J0,amountMaxA:w==="MintA"?O:h,amountMaxB:w==="MintA"?h:O,baseFlag:w==="MintA",optionBaseFlag:1},g);const A=Buffer.from([...U$.increaseLiquidity,...g]);return new X$({keys:k,programId:J,data:A})}function CY(J,$,H,Q,W,Z,Y,z,j,V,U,C,q,K,w,O,h,b,N){const x=e([G0("liquidity"),P("amountMinA"),P("amountMinB")]),k=[...N?[{pubkey:N,isSigner:!1,isWritable:!0}]:[],...w.map((T)=>[{pubkey:T.poolRewardVault,isSigner:!1,isWritable:!0},{pubkey:T.ownerRewardVault,isSigner:!1,isWritable:!0},{pubkey:T.rewardMint,isSigner:!1,isWritable:!1}]).flat()],g=[{pubkey:$,isSigner:!0,isWritable:!1},{pubkey:H,isSigner:!1,isWritable:!1},{pubkey:Q,isSigner:!1,isWritable:!0},{pubkey:W,isSigner:!1,isWritable:!0},{pubkey:Z,isSigner:!1,isWritable:!0},{pubkey:U,isSigner:!1,isWritable:!0},{pubkey:C,isSigner:!1,isWritable:!0},{pubkey:Y,isSigner:!1,isWritable:!0},{pubkey:z,isSigner:!1,isWritable:!0},{pubkey:j,isSigner:!1,isWritable:!0},{pubkey:V,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:W$,isSigner:!1,isWritable:!1},{pubkey:cH,isSigner:!1,isWritable:!1},{pubkey:q,isSigner:!1,isWritable:!1},{pubkey:K,isSigner:!1,isWritable:!1},...k],A=Buffer.alloc(x.span);x.encode({liquidity:O,amountMinA:h,amountMinB:b},A);const I=Buffer.from([...U$.decreaseLiquidity,...A]);return new X$({keys:g,programId:J,data:I})}function a6(J,$,H,Q,W,Z,Y,z,j,V,U,C,q,K,w,O,h){const b=e([P("amount"),P("otherAmountThreshold"),G0("sqrtPriceLimitX64"),cJ("isBaseInput")]),N=[...h?[{pubkey:h,isSigner:!1,isWritable:!0}]:[],...U.map((A)=>({pubkey:A,isSigner:!1,isWritable:!0}))],x=[{pubkey:$,isSigner:!0,isWritable:!1},{pubkey:Q,isSigner:!1,isWritable:!1},{pubkey:H,isSigner:!1,isWritable:!0},{pubkey:W,isSigner:!1,isWritable:!0},{pubkey:Z,isSigner:!1,isWritable:!0},{pubkey:Y,isSigner:!1,isWritable:!0},{pubkey:z,isSigner:!1,isWritable:!0},{pubkey:C,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:W$,isSigner:!1,isWritable:!1},{pubkey:cH,isSigner:!1,isWritable:!1},{pubkey:j,isSigner:!1,isWritable:!1},{pubkey:V,isSigner:!1,isWritable:!1},...N],k=Buffer.alloc(b.span);b.encode({amount:q,otherAmountThreshold:K,sqrtPriceLimitX64:w,isBaseInput:O},k);const g=Buffer.from([...U$.swap,...k]);return new X$({keys:x,programId:J,data:g})}function RY(J,$,H,Q,W,Z,Y,z,j,V,U,C){const q=e([P("openTime"),P("endTime"),G0("emissionsPerSecondX64")]),K=[{pubkey:$,isSigner:!0,isWritable:!0},{pubkey:Z,isSigner:!1,isWritable:!0},{pubkey:W,isSigner:!1,isWritable:!1},{pubkey:H,isSigner:!1,isWritable:!0},{pubkey:Q,isSigner:!1,isWritable:!0},{pubkey:z,isSigner:!1,isWritable:!1},{pubkey:j,isSigner:!1,isWritable:!0},{pubkey:Y,isSigner:!1,isWritable:!1},{pubkey:t0,isSigner:!1,isWritable:!1},{pubkey:v$,isSigner:!1,isWritable:!1}],w=Buffer.alloc(q.span);q.encode({openTime:H0(V),endTime:H0(U),emissionsPerSecondX64:C},w);const O=Buffer.from([...U$.initReward,...w]);return new X$({keys:K,programId:J,data:O})}function BY(J,$,H,Q,W,Z,Y,z,j,V,U,C){const q=e([o("rewardIndex"),G0("emissionsPerSecondX64"),P("openTime"),P("endTime")]),K=[{pubkey:$,isSigner:!0,isWritable:!0},{pubkey:W,isSigner:!1,isWritable:!1},{pubkey:H,isSigner:!1,isWritable:!0},{pubkey:Q,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:W$,isSigner:!1,isWritable:!1},{pubkey:Y,isSigner:!1,isWritable:!0},{pubkey:Z,isSigner:!1,isWritable:!0},{pubkey:z,isSigner:!1,isWritable:!0}],w=Buffer.alloc(q.span);q.encode({rewardIndex:j,emissionsPerSecondX64:C,openTime:H0(V),endTime:H0(U)},w);const O=Buffer.from([...U$.setRewardEmissions,...w]);return new X$({keys:K,programId:J,data:O})}function MY(J,$,H,Q,W,Z,Y){const z=e([o("rewardIndex")]),j=[{pubkey:$,isSigner:!0,isWritable:!0},{pubkey:Q,isSigner:!1,isWritable:!0},{pubkey:H,isSigner:!1,isWritable:!0},{pubkey:W,isSigner:!1,isWritable:!0},{pubkey:Z,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:W$,isSigner:!1,isWritable:!1},{pubkey:cH,isSigner:!1,isWritable:!1}],V=Buffer.alloc(z.span);z.encode({rewardIndex:Y},V);const U=Buffer.from([...U$.collectReward,...V]);return new X$({keys:j,programId:J,data:U})}var U$={createPool:[233,146,209,142,207,104,64,188],initReward:[95,135,192,196,242,129,230,68],setRewardEmissions:[112,52,167,75,32,201,211,137],openPosition:[77,184,74,214,112,86,241,199],closePosition:[123,134,81,0,49,68,98,98],increaseLiquidity:[133,29,89,223,69,238,176,10],decreaseLiquidity:[58,127,188,62,79,82,196,96],swap:[43,4,237,11,26,201,30,98],collectReward:[18,237,166,197,34,16,213,144]};var NY=E0(EJ(),1);var x$=E0(EJ(),1);var A$=new x$.default(-1),O$=new x$.default(1).shln(64),Y8=new x$.default(1).shln(128),i6=O$.sub(k0),YQ=64,OY=Y8.subn(1),AJ=-443636,mJ=-AJ,L$=new x$.default("4295048016"),K$=new x$.default("79226673521066979257578248091"),LY=16,KY="59543866431248",hY="184467440737095516",EY="15793534762490258745",z8=new x$.default(10).pow(new x$.default(6)),ZQ;(function(J){J[J.rate_500=500]="rate_500",J[J.rate_3000=3000]="rate_3000",J[J.rate_10000=1e4]="rate_10000"})(ZQ||(ZQ={}));var tX={[ZQ.rate_500]:10,[ZQ.rate_3000]:60,[ZQ.rate_10000]:200},j8=new x$.default("18446744073700000000");function V8(J){const $=new ArrayBuffer(4);return new DataView($).setInt32(0,J,!1),new Uint8Array($)}function r6(J,$){let H=0;for(let Q=J-1;Q>=0;Q--)if(!$.testn(Q))H++;else break;return H}function n6(J,$){let H=0;for(let Q=0;Q<J;Q++)if(!$.testn(Q))H++;else break;return H}function zQ(J,$){for(let H=0;H<J;H++)if($.testn(H))return!1;return!0}function SY(J,$){if(zQ(J,$))return null;else return r6(J,$)}function wY(J,$){if(zQ(J,$))return null;else return n6(J,$)}function _Y(J,$,H,Q){return h0([r9,$.toBuffer(),H.toBuffer(),Q.toBuffer()],J)}function e6(J,$,H){return h0([n9,$.toBuffer(),H.toBuffer()],J)}function PY(J,$,H){return h0([e9,$.toBuffer(),H.toBuffer()],J)}function m0(J,$,H){return h0([t9,$.toBuffer(),V8(H)],J)}function TH(J,$,H,Q){return h0([bY,$.toBuffer(),V8(H),V8(Q)],J)}function a$(J,$){return h0([bY,$.toBuffer()],J)}function t6(J){return h0([Buffer.from("metadata","utf8"),SH.toBuffer(),J.toBuffer()],SH)}function G8(J){return h0([o9],J)}function D$(J,$){return h0([Jj,$.toBuffer()],J)}var WU=Buffer.from("amm_config","utf8"),r9=Buffer.from("pool","utf8"),n9=Buffer.from("pool_vault","utf8"),e9=Buffer.from("pool_reward_vault","utf8"),bY=Buffer.from("position","utf8"),t9=Buffer.from("tick_array","utf8"),o9=Buffer.from("operation","utf8"),Jj=Buffer.from("pool_tick_array_bitmap_extension","utf8");var $j=15;class P0{static async getTickArrays(J,$,H,Q,W,Z,Y){const z=[],j=v0.getTickArrayStartIndexByTick(Q,W),V=v0.getInitializedTickArrayInRange(Z,Y,W,j,Math.floor($j/2));for(let q=0;q<V.length;q++){const{publicKey:K}=m0($,H,V[q]);z.push(K)}const U=(await J$(J,z)).map((q)=>q!==null?jQ.decode(q.data):null),C={};for(let q=0;q<z.length;q++){const K=U[q];if(K===null)continue;C[K.startTickIndex]={...K,address:z[q]}}return C}static nextInitializedTick(J,$,H,Q,W,Z){let{initializedTick:Y,tickArrayAddress:z,tickArrayStartTickIndex:j}=this.nextInitializedTickInOneArray(J,$,H,Q,W,Z);while(Y==null||Y.liquidityGross.lten(0)){if(j=v0.getNextTickArrayStartIndex(j,W,Z),this.checkIsValidStartIndex(j,W))throw new Error("No enough initialized tickArray");const V=H[j];if(V===void 0)continue;const{nextTick:U,tickArrayAddress:C,tickArrayStartTickIndex:q}=this.firstInitializedTickInOneArray(J,$,V,Z);[Y,z,j]=[U,C,q]}if(Y==null)throw new Error("No invaild tickArray cache");return{nextTick:Y,tickArrayAddress:z,tickArrayStartTickIndex:j}}static nextInitializedTickArray(J,$,H,Q,W){const Z=Math.floor(J/P0.tickCount($)),Y=H?v0.searchLowBitFromStart(Q,W,Z-1,1,$):v0.searchHightBitFromStart(Q,W,Z+1,1,$);return Y.length>0?{isExist:!0,nextStartIndex:Y[0]}:{isExist:!1,nextStartIndex:0}}static firstInitializedTickInOneArray(J,$,H,Q){let W=void 0;if(Q){let Y=_J-1;while(Y>=0){const z=H.ticks[Y];if(z.liquidityGross.gtn(0)){W=z;break}Y=Y-1}}else{let Y=0;while(Y<_J){const z=H.ticks[Y];if(z.liquidityGross.gtn(0)){W=z;break}Y=Y+1}}const{publicKey:Z}=m0(J,$,H.startTickIndex);return{nextTick:W,tickArrayAddress:Z,tickArrayStartTickIndex:H.startTickIndex}}static nextInitializedTickInOneArray(J,$,H,Q,W,Z){const Y=v0.getTickArrayStartIndexByTick(Q,W);let z=Math.floor((Q-Y)/W);const j=H[Y];if(j==null)return{initializedTick:void 0,tickArrayAddress:void 0,tickArrayStartTickIndex:Y};let V=void 0;if(Z)while(z>=0){const C=j.ticks[z];if(C.liquidityGross.gtn(0)){V=C;break}z=z-1}else{z=z+1;while(z<_J){const C=j.ticks[z];if(C.liquidityGross.gtn(0)){V=C;break}z=z+1}}const{publicKey:U}=m0(J,$,Y);return{initializedTick:V,tickArrayAddress:U,tickArrayStartTickIndex:j.startTickIndex}}static getArrayStartIndex(J,$){const H=this.tickCount($);return Math.floor(J/H)*H}static checkIsValidStartIndex(J,$){if(v0.checkIsOutOfBoundary(J)){if(J>mJ)return!1;const H=v0.getTickArrayStartIndexByTick(AJ,$);return J==H}return J%this.tickCount($)==0}static tickCount(J){return _J*J}}var _J=60,qH=512;class v0{static getTickArrayAddressByTick(J,$,H,Q){const W=v0.getTickArrayStartIndexByTick(H,Q),{publicKey:Z}=m0(J,$,W);return Z}static getTickOffsetInArray(J,$){if(J%$!=0)throw new Error("tickIndex % tickSpacing not equal 0");const H=v0.getTickArrayStartIndexByTick(J,$),Q=Math.floor((J-H)/$);if(Q<0||Q>=_J)throw new Error("tick offset in array overflow");return Q}static getTickArrayBitIndex(J,$){const H=P0.tickCount($);let Q=J/H;if(J<0&&J%H!=0)Q=Math.ceil(Q)-1;else Q=Math.floor(Q);return Q}static getTickArrayStartIndexByTick(J,$){return this.getTickArrayBitIndex(J,$)*P0.tickCount($)}static getTickArrayOffsetInBitmapByTick(J,$){const H=$*_J,Q=Math.floor(J/H)+512;return Math.abs(Q)}static checkTickArrayIsInitialized(J,$,H){const Q=H*_J,W=Math.floor($/Q)+512,Z=Math.abs(W);return{isInitialized:J.testn(Z),startIndex:(Z-512)*Q}}static getNextTickArrayStartIndex(J,$,H){return H?J-$*_J:J+$*_J}static mergeTickArrayBitmap(J){let $=new NY.default(0);for(let H=0;H<J.length;H++)$=$.add(J[H].shln(64*H));return $}static getInitializedTickArrayInRange(J,$,H,Q,W){const Z=Math.floor(Q/(H*_J));return[...v0.searchLowBitFromStart(J,$,Z-1,W,H),...v0.searchHightBitFromStart(J,$,Z,W,H)]}static getAllInitializedTickArrayStartIndex(J,$,H){return v0.searchHightBitFromStart(J,$,0,qH,H)}static getAllInitializedTickArrayInfo(J,$,H,Q,W){const Z=[],Y=v0.getAllInitializedTickArrayStartIndex(H,Q,W);for(let z of Y){const{publicKey:j}=m0(J,$,z);Z.push({tickArrayStartIndex:z,tickArrayAddress:j})}return Z}static getAllInitializedTickInTickArray(J){return J.ticks.filter(($)=>$.liquidityGross.gtn(0))}static searchLowBitFromStart(J,$,H,Q,W){const Z=[...[...$.negativeTickArrayBitmap].reverse(),J.slice(0,8),J.slice(8,16),...$.positiveTickArrayBitmap].map((j)=>v0.mergeTickArrayBitmap(j)),Y=[];while(H>=-7680){const j=Math.floor((H+7680)/512),V=(H+7680)%512;if(Z[j].testn(V))Y.push(H);if(H--,Y.length===Q)break}const z=P0.tickCount(W);return Y.map((j)=>j*z)}static searchHightBitFromStart(J,$,H,Q,W){const Z=[...[...$.negativeTickArrayBitmap].reverse(),J.slice(0,8),J.slice(8,16),...$.positiveTickArrayBitmap].map((j)=>v0.mergeTickArrayBitmap(j)),Y=[];while(H<7680){const j=Math.floor((H+7680)/512),V=(H+7680)%512;if(Z[j].testn(V))Y.push(H);if(H++,Y.length===Q)break}const z=P0.tickCount(W);return Y.map((j)=>j*z)}static checkIsOutOfBoundary(J){return J<AJ||J>mJ}static nextInitTick(J,$,H,Q){if(P0.getArrayStartIndex($,H)!=J.startTickIndex)return null;let Z=Math.floor(($-J.startTickIndex)/H);if(Q)while(Z>=0){if(J.ticks[Z].liquidityGross.gtn(0))return J.ticks[Z];Z=Z-1}else{Z=Z+1;while(Z<_J){if(J.ticks[Z].liquidityGross.gtn(0))return J.ticks[Z];Z=Z+1}}return null}static firstInitializedTick(J,$){if($){let H=_J-1;while(H>=0){if(J.ticks[H].liquidityGross.gtn(0))return J.ticks[H];H=H-1}}else{let H=0;while(H<_J){if(J.ticks[H].liquidityGross.gtn(0))return J.ticks[H];H=H+1}}throw Error(`firstInitializedTick check error: ${J} - ${$}`)}}var fH=14;class i${static maxTickInTickarrayBitmap(J){return J*_J*qH}static getBitmapTickBoundary(J,$){const H=this.maxTickInTickarrayBitmap($);let Q=Math.floor(Math.abs(J)/H);if(J<0&&Math.abs(J)%H!=0)Q+=1;const W=H*Q;return J<0?{minValue:-W,maxValue:-W+H}:{minValue:W,maxValue:W+H}}static nextInitializedTickArrayStartIndex(J,$,H,Q){if(!P0.checkIsValidStartIndex($,H))throw Error("nextInitializedTickArrayStartIndex check error");const W=this.maxTickInTickarrayBitmap(H),Z=Q?$-P0.tickCount(H):$+P0.tickCount(H);if(Z<-W||Z>=W)return{isInit:!1,tickIndex:$};const Y=H*_J;let z=Z/Y+512;if(Z<0&&Z%Y!=0)z--;const j=Math.abs(z);if(Q){const V=J.shln(1024-j-1),U=SY(1024,V);if(U!==null)return{isInit:!0,tickIndex:(j-U-512)*Y};else return{isInit:!1,tickIndex:-W}}else{const V=J.shrn(j),U=wY(1024,V);if(U!==null)return{isInit:!0,tickIndex:(j+U-512)*Y};else return{isInit:!1,tickIndex:W-P0.tickCount(H)}}}}class F8{static getBitmapOffset(J,$){if(!P0.checkIsValidStartIndex(J,$))throw new Error("No enough initialized tickArray");this.checkExtensionBoundary(J,$);const H=i$.maxTickInTickarrayBitmap($);let Q=Math.floor(Math.abs(J)/H)-1;if(J<0&&Math.abs(J)%H===0)Q--;return Q}static getBitmap(J,$,H){const Q=this.getBitmapOffset(J,$);if(J<0)return{offset:Q,tickarrayBitmap:H.negativeTickArrayBitmap[Q]};else return{offset:Q,tickarrayBitmap:H.positiveTickArrayBitmap[Q]}}static checkExtensionBoundary(J,$){const{positiveTickBoundary:H,negativeTickBoundary:Q}=this.extensionTickBoundary($);if(J>=Q&&J<H)throw Error("checkExtensionBoundary -> InvalidTickArrayBoundary")}static extensionTickBoundary(J){const $=i$.maxTickInTickarrayBitmap(J),H=-$;if(mJ<=$)throw Error(`extensionTickBoundary check error: ${mJ}, ${$}`);if(H<=AJ)throw Error(`extensionTickBoundary check error: ${H}, ${AJ}`);return{positiveTickBoundary:$,negativeTickBoundary:H}}static checkTickArrayIsInit(J,$,H){const{tickarrayBitmap:Q}=this.getBitmap(J,$,H),W=this.tickArrayOffsetInBitmap(J,$);return{isInitialized:v0.mergeTickArrayBitmap(Q).testn(W),startIndex:J}}static nextInitializedTickArrayFromOneBitmap(J,$,H,Q){const W=P0.tickCount($),Z=H?J-W:J+W,Y=P0.getArrayStartIndex(AJ,$),z=P0.getArrayStartIndex(mJ,$);if(Z<Y||Z>z)return{isInit:!1,tickIndex:Z};const{tickarrayBitmap:j}=this.getBitmap(Z,$,Q);return this.nextInitializedTickArrayInBitmap(j,Z,$,H)}static nextInitializedTickArrayInBitmap(J,$,H,Q){const{minValue:W,maxValue:Z}=i$.getBitmapTickBoundary($,H),Y=this.tickArrayOffsetInBitmap($,H);if(Q){const z=v0.mergeTickArrayBitmap(J).shln(qH-1-Y),j=zQ(512,z)?null:r6(512,z);if(j!==null)return{isInit:!0,tickIndex:$-j*P0.tickCount(H)};else return{isInit:!1,tickIndex:W}}else{const z=v0.mergeTickArrayBitmap(J).shrn(Y),j=zQ(512,z)?null:n6(512,z);if(j!==null)return{isInit:!0,tickIndex:$+j*P0.tickCount(H)};else return{isInit:!1,tickIndex:Z-P0.tickCount(H)}}}static tickArrayOffsetInBitmap(J,$){const H=Math.abs(J)%i$.maxTickInTickarrayBitmap($);let Q=Math.floor(H/P0.tickCount($));if(J<0&&H!=0)Q=qH-Q;return Q}}var hU=e([p0(8),o("bump"),UH("index"),c(""),yJ("protocolFeeRate"),yJ("tradeFeeRate"),UH("tickSpacing"),yJ("fundFeeRate"),z0(yJ(),1,"padding"),c("fundOwner"),z0(P(),3,"padding")]),Hj=e([yJ("blockTimestamp"),G0("sqrtPriceX64"),G0("cumulativeTimePriceX64"),z0(G0(),1,"")]),o6=e([p0(8),cJ("initialized"),c("poolId"),z0(Hj,1000,"observations"),z0(G0(),5,"")]),Qj=e([o("rewardState"),P("openTime"),P("endTime"),P("lastUpdateTime"),G0("emissionsPerSecondX64"),P("rewardTotalEmissioned"),P("rewardClaimed"),c("tokenMint"),c("tokenVault"),c("creator"),G0("rewardGrowthGlobalX64")]),gY=e([p0(8),o("bump"),c("ammConfig"),c("creator"),c("mintA"),c("mintB"),c("vaultA"),c("vaultB"),c("observationId"),o("mintDecimalsA"),o("mintDecimalsB"),UH("tickSpacing"),G0("liquidity"),G0("sqrtPriceX64"),kJ("tickCurrent"),UH("observationIndex"),UH("observationUpdateDuration"),G0("feeGrowthGlobalX64A"),G0("feeGrowthGlobalX64B"),P("protocolFeesTokenA"),P("protocolFeesTokenB"),G0("swapInAmountTokenA"),G0("swapOutAmountTokenB"),G0("swapInAmountTokenB"),G0("swapOutAmountTokenA"),o("status"),z0(o(),7,""),z0(Qj,3,"rewardInfos"),z0(P(),16,"tickArrayBitmap"),P("totalFeesTokenA"),P("totalFeesClaimedTokenA"),P("totalFeesTokenB"),P("totalFeesClaimedTokenB"),P("fundFeesTokenA"),P("fundFeesTokenB"),P("startTime"),z0(P(),57,"padding")]),Wj=e([G0("growthInsideLastX64"),P("rewardAmountOwed")]),kY=e([p0(8),o("bump"),c("nftMint"),c("poolId"),kJ("tickLower"),kJ("tickUpper"),G0("liquidity"),G0("feeGrowthInsideLastX64A"),G0("feeGrowthInsideLastX64B"),P("tokenFeesOwedA"),P("tokenFeesOwedB"),z0(Wj,3,"rewardInfos"),z0(P(),8,"")]),EU=e([p0(8),o("bump"),c("poolId"),kJ("tickLowerIndex"),kJ("tickUpperIndex"),G0("liquidity"),G0("feeGrowthInsideLastX64A"),G0("feeGrowthInsideLastX64B"),P("tokenFeesOwedA"),P("tokenFeesOwedB"),z0(G0(),3,"rewardGrowthInside"),z0(P(),8,"")]),Zj=e([kJ("tick"),AZ("liquidityNet"),G0("liquidityGross"),G0("feeGrowthOutsideX64A"),G0("feeGrowthOutsideX64B"),z0(G0(),3,"rewardGrowthsOutsideX64"),z0(yJ(),13,"")]),jQ=e([p0(8),c("poolId"),kJ("startTickIndex"),z0(Zj,_J,"ticks"),o("initializedTickCount"),z0(o(),115,"")]),xY=e([p0(329),z0(c(),100,"whitelistMints")]),AY=e([p0(8),c("poolId"),z0(z0(P(),8),fH,"positiveTickArrayBitmap"),z0(z0(P(),8),fH,"negativeTickArrayBitmap")]);var B0=E0(EJ(),1);var fY=E0(EJ(),1);import{PublicKey as TY} from"@solana/web3.js";class Q${static getOutputAmountAndRemainAccounts(J,$,H,Q,W,Z=!1){const Y=H.equals(J.mintA.mint),z=[],{isExist:j,startIndex:V,nextAccountMeta:U}=this.getFirstInitializedTickArray(J,Y);if(!j||V===void 0||!U)throw new Error("Invalid tick array");try{const b=this.preInitializedTickArrayStartIndex(J,Y);if(b.isExist){const{publicKey:N}=m0(J.programId,J.id,b.nextStartIndex);z.push(N)}}catch(b){}z.push(U);const{allTrade:C,amountSpecifiedRemaining:q,amountCalculated:K,accounts:w,sqrtPriceX64:O,feeAmount:h}=VQ.swapCompute(J.programId,J.id,$,J.tickArrayBitmap,J.exBitmapInfo,Y,J.ammConfig.tradeFeeRate,J.liquidity,J.tickCurrent,J.tickSpacing,J.sqrtPriceX64,Q,V,W,Z);return z.push(...w),{allTrade:C,realTradeAmountIn:Q.sub(q),expectedAmountOut:K.mul(A$),remainingAccounts:z,executionPrice:O,feeAmount:h}}static getInputAmountAndRemainAccounts(J,$,H,Q,W){const Z=H.equals(J.mintB.mint),Y=[],{isExist:z,startIndex:j,nextAccountMeta:V}=this.getFirstInitializedTickArray(J,Z);if(!z||j===void 0||!V)throw new Error("Invalid tick array");try{const w=this.preInitializedTickArrayStartIndex(J,Z);if(w.isExist){const{publicKey:O}=m0(J.programId,J.id,w.nextStartIndex);Y.push(O)}}catch(w){}Y.push(V);const{amountCalculated:U,accounts:C,sqrtPriceX64:q,feeAmount:K}=VQ.swapCompute(J.programId,J.id,$,J.tickArrayBitmap,J.exBitmapInfo,Z,J.ammConfig.tradeFeeRate,J.liquidity,J.tickCurrent,J.tickSpacing,J.sqrtPriceX64,Q.mul(A$),j,W);return Y.push(...C),{expectedAmountIn:U,remainingAccounts:Y,executionPrice:q,feeAmount:K}}static getFirstInitializedTickArray(J,$){const{isInitialized:H,startIndex:Q}=Q$.isOverflowDefaultTickarrayBitmap(J.tickSpacing,[J.tickCurrent])?F8.checkTickArrayIsInit(P0.getArrayStartIndex(J.tickCurrent,J.tickSpacing),J.tickSpacing,J.exBitmapInfo):v0.checkTickArrayIsInitialized(v0.mergeTickArrayBitmap(J.tickArrayBitmap),J.tickCurrent,J.tickSpacing);if(H){const{publicKey:Y}=m0(J.programId,J.id,Q);return{isExist:!0,startIndex:Q,nextAccountMeta:Y}}const{isExist:W,nextStartIndex:Z}=this.nextInitializedTickArrayStartIndex(J,P0.getArrayStartIndex(J.tickCurrent,J.tickSpacing),$);if(W){const{publicKey:Y}=m0(J.programId,J.id,Z);return{isExist:!0,startIndex:Z,nextAccountMeta:Y}}return{isExist:!1,nextAccountMeta:void 0,startIndex:void 0}}static preInitializedTickArrayStartIndex(J,$){const H=Math.floor(J.tickCurrent/P0.tickCount(J.tickSpacing)),Q=!$?v0.searchLowBitFromStart(J.tickArrayBitmap,J.exBitmapInfo,H-1,1,J.tickSpacing):v0.searchHightBitFromStart(J.tickArrayBitmap,J.exBitmapInfo,H+1,1,J.tickSpacing);return Q.length>0?{isExist:!0,nextStartIndex:Q[0]}:{isExist:!1,nextStartIndex:0}}static nextInitializedTickArrayStartIndex(J,$,H){$=P0.getArrayStartIndex($,J.tickSpacing);while(!0){const{isInit:Q,tickIndex:W}=i$.nextInitializedTickArrayStartIndex(v0.mergeTickArrayBitmap(J.tickArrayBitmap),$,J.tickSpacing,H);if(Q)return{isExist:!0,nextStartIndex:W};$=W;const{isInit:Z,tickIndex:Y}=F8.nextInitializedTickArrayFromOneBitmap($,J.tickSpacing,H,J.exBitmapInfo);if(Z)return{isExist:!0,nextStartIndex:Y};if($=Y,$<AJ||$>mJ)return{isExist:!1,nextStartIndex:0}}}static async updatePoolRewardInfos({connection:J,apiPoolInfo:$,chainTime:H,poolLiquidity:Q,rewardInfos:W}){const Z=[];for(let Y=0;Y<W.length;Y++){const z=W[Y],j=$.rewardInfos[Y]?.programId??(await J.getAccountInfo(z.tokenMint))?.owner;if(j===void 0)throw Error("get new reward mint info error");const V={...z,perSecond:K0.x64ToDecimal(z.emissionsPerSecondX64),remainingRewards:void 0,tokenProgramId:new TY(j)};if(V.tokenMint.equals(TY.default))continue;if(H<=V.openTime.toNumber()||Q.eq(J0)){Z.push(V);continue}const U=new fY.default(Math.min(V.endTime.toNumber(),H)),C=U.sub(V.lastUpdateTime),q=K0.mulDivFloor(C,V.emissionsPerSecondX64,Q),K=V.rewardGrowthGlobalX64.add(q),w=K0.mulDivFloor(C,V.emissionsPerSecondX64,O$),O=V.rewardTotalEmissioned.add(w);Z.push({...V,rewardGrowthGlobalX64:K,rewardTotalEmissioned:O,lastUpdateTime:U})}return Z}static isOverflowDefaultTickarrayBitmap(J,$){const{maxTickBoundary:H,minTickBoundary:Q}=this.tickRange(J);for(let W of $){const Z=v0.getTickArrayStartIndexByTick(W,J);if(Z>=H||Z<Q)return!0}return!1}static tickRange(J){let $=i$.maxTickInTickarrayBitmap(J),H=-$;if($>mJ)$=mJ;if(H<AJ)H=AJ;return{maxTickBoundary:$,minTickBoundary:H}}static get_tick_array_offset(J,$){if(!P0.checkIsValidStartIndex(J,$))throw new Error("No enough initialized tickArray");return J/P0.tickCount($)*qH}}var gJ=function(J,$){return JW(J.mul($),64,256)},Yj=function(J,$,H){const Q=J.toTwos(H).shln($);return Q.imaskn(H+1),Q.fromTwos(H)},JW=function(J,$,H){const Q=J.toTwos(H).shrn($);return Q.imaskn(H-$+1),Q.fromTwos(H-$)};class K0{static mulDivRoundingUp(J,$,H){const Q=J.mul($);let W=Q.div(H);if(!Q.mod(H).eq(J0))W=W.add(k0);return W}static mulDivFloor(J,$,H){if(H.eq(J0))throw new Error("division by 0");return J.mul($).div(H)}static mulDivCeil(J,$,H){if(H.eq(J0))throw new Error("division by 0");return J.mul($).add(H.sub(k0)).div(H)}static x64ToDecimal(J,$){return new F0(J.toString()).div(F0.pow(2,64)).toDecimalPlaces($)}static decimalToX64(J){return new B0.default(J.mul(F0.pow(2,64)).floor().toFixed())}static wrappingSubU128(J,$){return J.add(Y8).sub($).mod(Y8)}}class S0{static sqrtPriceX64ToPrice(J,$,H){return K0.x64ToDecimal(J).pow(2).mul(F0.pow(10,$-H))}static priceToSqrtPriceX64(J,$,H){return K0.decimalToX64(J.mul(F0.pow(10,H-$)).sqrt())}static getNextSqrtPriceX64FromInput(J,$,H,Q){if(!J.gt(J0))throw new Error("sqrtPriceX64 must greater than 0");if(!$.gt(J0))throw new Error("liquidity must greater than 0");return Q?this.getNextSqrtPriceFromTokenAmountARoundingUp(J,$,H,!0):this.getNextSqrtPriceFromTokenAmountBRoundingDown(J,$,H,!0)}static getNextSqrtPriceX64FromOutput(J,$,H,Q){if(!J.gt(J0))throw new Error("sqrtPriceX64 must greater than 0");if(!$.gt(J0))throw new Error("liquidity must greater than 0");return Q?this.getNextSqrtPriceFromTokenAmountBRoundingDown(J,$,H,!1):this.getNextSqrtPriceFromTokenAmountARoundingUp(J,$,H,!1)}static getNextSqrtPriceFromTokenAmountARoundingUp(J,$,H,Q){if(H.eq(J0))return J;const W=$.shln(YQ);if(Q){const Z=W,Y=W.add(H.mul(J));if(Y.gte(Z))return K0.mulDivCeil(Z,J,Y);return K0.mulDivRoundingUp(Z,k0,Z.div(J).add(H))}else{const Z=H.mul(J);if(!W.gt(Z))throw new Error("getNextSqrtPriceFromTokenAmountARoundingUp,liquidityLeftShift must gt amountMulSqrtPrice");const Y=W.sub(Z);return K0.mulDivCeil(W,J,Y)}}static getNextSqrtPriceFromTokenAmountBRoundingDown(J,$,H,Q){const W=H.shln(YQ);if(Q)return J.add(W.div($));else{const Z=K0.mulDivRoundingUp(W,k0,$);if(!J.gt(Z))throw new Error("getNextSqrtPriceFromTokenAmountBRoundingDown sqrtPriceX64 must gt amountDivLiquidity");return J.sub(Z)}}static getSqrtPriceX64FromTick(J){if(!Number.isInteger(J))throw new Error("tick must be integer");if(J<AJ||J>mJ)throw new Error("tick must be in MIN_TICK and MAX_TICK");const $=J<0?J*-1:J;let H=($&1)!=0?new B0.default("18445821805675395072"):new B0.default("18446744073709551616");if(($&2)!=0)H=gJ(H,new B0.default("18444899583751176192"));if(($&4)!=0)H=gJ(H,new B0.default("18443055278223355904"));if(($&8)!=0)H=gJ(H,new B0.default("18439367220385607680"));if(($&16)!=0)H=gJ(H,new B0.default("18431993317065453568"));if(($&32)!=0)H=gJ(H,new B0.default("18417254355718170624"));if(($&64)!=0)H=gJ(H,new B0.default("18387811781193609216"));if(($&128)!=0)H=gJ(H,new B0.default("18329067761203558400"));if(($&256)!=0)H=gJ(H,new B0.default("18212142134806163456"));if(($&512)!=0)H=gJ(H,new B0.default("17980523815641700352"));if(($&1024)!=0)H=gJ(H,new B0.default("17526086738831433728"));if(($&2048)!=0)H=gJ(H,new B0.default("16651378430235570176"));if(($&4096)!=0)H=gJ(H,new B0.default("15030750278694412288"));if(($&8192)!=0)H=gJ(H,new B0.default("12247334978884435968"));if(($&16384)!=0)H=gJ(H,new B0.default("8131365268886854656"));if(($&32768)!=0)H=gJ(H,new B0.default("3584323654725218816"));if(($&65536)!=0)H=gJ(H,new B0.default("696457651848324352"));if(($&131072)!=0)H=gJ(H,new B0.default("26294789957507116"));if(($&262144)!=0)H=gJ(H,new B0.default("37481735321082"));if(J>0)H=OY.div(H);return H}static getTickFromPrice(J,$,H){return S0.getTickFromSqrtPriceX64(S0.priceToSqrtPriceX64(J,$,H))}static getTickFromSqrtPriceX64(J){if(J.gt(K$)||J.lt(L$))throw new Error("Provided sqrtPrice is not within the supported sqrtPrice range.");const $=J.bitLength()-1,H=new B0.default($-64),Q=Yj(H,32,128);let W=new B0.default("8000000000000000","hex"),Z=0,Y=new B0.default(0),z=$>=64?J.shrn($-63):J.shln(63-$);while(W.gt(new B0.default(0))&&Z<LY){z=z.mul(z);const K=z.shrn(127);z=z.shrn(63+K.toNumber()),Y=Y.add(W.mul(K)),W=W.shrn(1),Z+=1}const j=Y.shrn(32),U=Q.add(j).mul(new B0.default(KY)),C=JW(U.sub(new B0.default(hY)),64,128).toNumber(),q=JW(U.add(new B0.default(EY)),64,128).toNumber();if(C==q)return C;else return S0.getSqrtPriceX64FromTick(q).lte(J)?q:C}}class X8{static getTickWithPriceAndTickspacing(J,$,H,Q){let Z=S0.getTickFromSqrtPriceX64(S0.priceToSqrtPriceX64(J,H,Q))/$;if(Z<0)Z=Math.floor(Z);else Z=Math.ceil(Z);return Z*$}static roundPriceWithTickspacing(J,$,H,Q){const W=X8.getTickWithPriceAndTickspacing(J,$,H,Q),Z=S0.getSqrtPriceX64FromTick(W);return S0.sqrtPriceX64ToPrice(Z,H,Q)}}class A0{static addDelta(J,$){return J.add($)}static getTokenAmountAFromLiquidity(J,$,H,Q){if(J.gt($))[J,$]=[$,J];if(!J.gt(J0))throw new Error("sqrtPriceX64A must greater than 0");const W=H.ushln(YQ),Z=$.sub(J);return Q?K0.mulDivRoundingUp(K0.mulDivCeil(W,Z,$),k0,J):K0.mulDivFloor(W,Z,$).div(J)}static getTokenAmountBFromLiquidity(J,$,H,Q){if(J.gt($))[J,$]=[$,J];if(!J.gt(J0))throw new Error("sqrtPriceX64A must greater than 0");return Q?K0.mulDivCeil(H,$.sub(J),O$):K0.mulDivFloor(H,$.sub(J),O$)}static getLiquidityFromTokenAmountA(J,$,H,Q){if(J.gt($))[J,$]=[$,J];const W=H.mul(J).mul($),Z=$.sub(J),Y=W.div(Z);if(Q)return K0.mulDivRoundingUp(Y,k0,i6);else return Y.shrn(YQ)}static getLiquidityFromTokenAmountB(J,$,H){if(J.gt($))[J,$]=[$,J];return K0.mulDivFloor(H,i6,$.sub(J))}static getLiquidityFromTokenAmounts(J,$,H,Q,W){if($.gt(H))[$,H]=[H,$];if(J.lte($))return A0.getLiquidityFromTokenAmountA($,H,Q,!1);else if(J.lt(H)){const Z=A0.getLiquidityFromTokenAmountA(J,H,Q,!1),Y=A0.getLiquidityFromTokenAmountB($,J,W);return Z.lt(Y)?Z:Y}else return A0.getLiquidityFromTokenAmountB($,H,W)}static getAmountsFromLiquidity(J,$,H,Q,W){if($.gt(H))[$,H]=[H,$];if(J.lte($))return{amountA:A0.getTokenAmountAFromLiquidity($,H,Q,W),amountB:new B0.default(0)};else if(J.lt(H)){const Z=A0.getTokenAmountAFromLiquidity(J,H,Q,W),Y=A0.getTokenAmountBFromLiquidity($,J,Q,W);return{amountA:Z,amountB:Y}}else return{amountA:new B0.default(0),amountB:A0.getTokenAmountBFromLiquidity($,H,Q,W)}}static getAmountsFromLiquidityWithSlippage(J,$,H,Q,W,Z,Y){const{amountA:z,amountB:j}=A0.getAmountsFromLiquidity(J,$,H,Q,Z),V=W?1+Y:1-Y,U=new B0.default(new F0(z.toString()).mul(V).toFixed(0)),C=new B0.default(new F0(j.toString()).mul(V).toFixed(0));return{amountSlippageA:U,amountSlippageB:C}}}class VQ{static swapCompute(J,$,H,Q,W,Z,Y,z,j,V,U,C,q,K,w=!1){if(C.eq(J0))throw new Error("amountSpecified must not be 0");if(!K)K=Z?L$.add(k0):K$.sub(k0);if(Z){if(K.lt(L$))throw new Error("sqrtPriceX64 must greater than MIN_SQRT_PRICE_X64");if(K.gte(U))throw new Error("sqrtPriceX64 must smaller than current")}else{if(K.gt(K$))throw new Error("sqrtPriceX64 must smaller than MAX_SQRT_PRICE_X64");if(K.lte(U))throw new Error("sqrtPriceX64 must greater than current")}const O=C.gt(J0),h={amountSpecifiedRemaining:C,amountCalculated:J0,sqrtPriceX64:U,tick:j>q?Math.min(q+P0.tickCount(V)-1,j):q,accounts:[],liquidity:z,feeAmount:new B0.default(0)};let b=q,N=H[q],x=0;while(!h.amountSpecifiedRemaining.eq(J0)&&!h.sqrtPriceX64.eq(K)){if(x>10);const k={};k.sqrtPriceStartX64=h.sqrtPriceX64;const g=v0.nextInitTick(N,h.tick,V,Z);let A=g?g:null,I=null;if(!A?.liquidityGross.gtn(0)){const u=Q$.nextInitializedTickArrayStartIndex({tickCurrent:h.tick,tickSpacing:V,tickArrayBitmap:Q,exBitmapInfo:W},b,Z);if(!u.isExist){if(w)return{allTrade:!1,amountSpecifiedRemaining:h.amountSpecifiedRemaining,amountCalculated:h.amountCalculated,feeAmount:h.feeAmount,sqrtPriceX64:h.sqrtPriceX64,liquidity:h.liquidity,tickCurrent:h.tick,accounts:h.accounts};throw Error("swapCompute LiquidityInsufficient")}b=u.nextStartIndex;const{publicKey:a}=m0(J,$,b);I=a,N=H[b];try{A=v0.firstInitializedTick(N,Z)}catch(n){throw Error("not found next tick info")}}if(k.tickNext=A.tick,k.initialized=A.liquidityGross.gtn(0),q!==b&&I)h.accounts.push(I),q=b;if(k.tickNext<AJ)k.tickNext=AJ;else if(k.tickNext>mJ)k.tickNext=mJ;k.sqrtPriceNextX64=S0.getSqrtPriceX64FromTick(k.tickNext);let T;if(Z&&k.sqrtPriceNextX64.lt(K)||!Z&&k.sqrtPriceNextX64.gt(K))T=K;else T=k.sqrtPriceNextX64;if([h.sqrtPriceX64,k.amountIn,k.amountOut,k.feeAmount]=VQ.swapStepCompute(h.sqrtPriceX64,T,h.liquidity,h.amountSpecifiedRemaining,Y),h.feeAmount=h.feeAmount.add(k.feeAmount),O)h.amountSpecifiedRemaining=h.amountSpecifiedRemaining.sub(k.amountIn.add(k.feeAmount)),h.amountCalculated=h.amountCalculated.sub(k.amountOut);else h.amountSpecifiedRemaining=h.amountSpecifiedRemaining.add(k.amountOut),h.amountCalculated=h.amountCalculated.add(k.amountIn.add(k.feeAmount));if(h.sqrtPriceX64.eq(k.sqrtPriceNextX64)){if(k.initialized){let u=A.liquidityNet;if(Z)u=u.mul(A$);h.liquidity=A0.addDelta(h.liquidity,u)}h.tick=Z?k.tickNext-1:k.tickNext}else if(h.sqrtPriceX64!=k.sqrtPriceStartX64)h.tick=S0.getTickFromSqrtPriceX64(h.sqrtPriceX64);++x}try{const{nextStartIndex:k,isExist:g}=P0.nextInitializedTickArray(h.tick,V,Z,Q,W);if(g&&q!==k)h.accounts.push(m0(J,$,k).publicKey),q=k}catch(k){}return{allTrade:!0,amountSpecifiedRemaining:J0,amountCalculated:h.amountCalculated,feeAmount:h.feeAmount,sqrtPriceX64:h.sqrtPriceX64,liquidity:h.liquidity,tickCurrent:h.tick,accounts:h.accounts}}static swapStepCompute(J,$,H,Q,W){const Z={sqrtPriceX64Next:new B0.default(0),amountIn:new B0.default(0),amountOut:new B0.default(0),feeAmount:new B0.default(0)},Y=J.gte($),z=Q.gte(J0);if(z){const V=K0.mulDivFloor(Q,z8.sub(new B0.default(W.toString())),z8);if(Z.amountIn=Y?A0.getTokenAmountAFromLiquidity($,J,H,!0):A0.getTokenAmountBFromLiquidity(J,$,H,!0),V.gte(Z.amountIn))Z.sqrtPriceX64Next=$;else Z.sqrtPriceX64Next=S0.getNextSqrtPriceX64FromInput(J,H,V,Y)}else if(Z.amountOut=Y?A0.getTokenAmountBFromLiquidity($,J,H,!1):A0.getTokenAmountAFromLiquidity(J,$,H,!1),Q.mul(A$).gte(Z.amountOut))Z.sqrtPriceX64Next=$;else Z.sqrtPriceX64Next=S0.getNextSqrtPriceX64FromOutput(J,H,Q.mul(A$),Y);const j=$.eq(Z.sqrtPriceX64Next);if(Y){if(!(j&&z))Z.amountIn=A0.getTokenAmountAFromLiquidity(Z.sqrtPriceX64Next,J,H,!0);if(!(j&&!z))Z.amountOut=A0.getTokenAmountBFromLiquidity(Z.sqrtPriceX64Next,J,H,!1)}else Z.amountIn=j&&z?Z.amountIn:A0.getTokenAmountBFromLiquidity(J,Z.sqrtPriceX64Next,H,!0),Z.amountOut=j&&!z?Z.amountOut:A0.getTokenAmountAFromLiquidity(J,Z.sqrtPriceX64Next,H,!1);if(!z&&Z.amountOut.gt(Q.mul(A$)))Z.amountOut=Q.mul(A$);if(z&&!Z.sqrtPriceX64Next.eq($))Z.feeAmount=Q.sub(Z.amountIn);else Z.feeAmount=K0.mulDivCeil(Z.amountIn,new B0.default(W),z8.sub(new B0.default(W)));return[Z.sqrtPriceX64Next,Z.amountIn,Z.amountOut,Z.feeAmount]}}var vH=E0(EJ(),1);class U8{static getfeeGrowthInside(J,$,H){let Q=new vH.default(0),W=new vH.default(0);if(J.tickCurrent>=$.tick)Q=$.feeGrowthOutsideX64A,W=$.feeGrowthOutsideX64B;else Q=J.feeGrowthGlobalX64A.sub($.feeGrowthOutsideX64A),W=J.feeGrowthGlobalX64B.sub($.feeGrowthOutsideX64B);let Z=new vH.default(0),Y=new vH.default(0);if(J.tickCurrent<H.tick)Z=H.feeGrowthOutsideX64A,Y=H.feeGrowthOutsideX64B;else Z=J.feeGrowthGlobalX64A.sub(H.feeGrowthOutsideX64A),Y=J.feeGrowthGlobalX64B.sub(H.feeGrowthOutsideX64B);const z=K0.wrappingSubU128(K0.wrappingSubU128(J.feeGrowthGlobalX64A,Q),Z),j=K0.wrappingSubU128(K0.wrappingSubU128(J.feeGrowthGlobalX64B,W),Y);return{feeGrowthInsideX64A:z,feeGrowthInsideBX64:j}}static GetPositionFees(J,$,H,Q){const{feeGrowthInsideX64A:W,feeGrowthInsideBX64:Z}=this.getfeeGrowthInside(J,H,Q),Y=K0.mulDivFloor(K0.wrappingSubU128(W,$.feeGrowthInsideLastX64A),$.liquidity,O$),z=$.tokenFeesOwedA.add(Y),j=K0.mulDivFloor(K0.wrappingSubU128(Z,$.feeGrowthInsideLastX64B),$.liquidity,O$),V=$.tokenFeesOwedB.add(j);return{tokenFeeAmountA:z,tokenFeeAmountB:V}}static GetPositionRewards(J,$,H,Q){const W=[],Z=this.getRewardGrowthInside(J.tickCurrent,H,Q,J.rewardInfos);for(let Y=0;Y<Z.length;Y++){const z=Z[Y],j=$.rewardInfos[Y],V=K0.wrappingSubU128(z,j.growthInsideLastX64),U=K0.mulDivFloor(V,$.liquidity,O$),C=j.rewardAmountOwed.add(U);W.push(C)}return W}static getRewardGrowthInside(J,$,H,Q){const W=[];for(let Z=0;Z<Q.length;Z++){let Y=new vH.default(0);if($.liquidityGross.eqn(0))Y=Q[Z].rewardGrowthGlobalX64;else if(J<$.tick)Y=Q[Z].rewardGrowthGlobalX64.sub($.rewardGrowthsOutsideX64[Z]);else Y=$.rewardGrowthsOutsideX64[Z];let z=new vH.default(0);if(H.liquidityGross.eqn(0));else if(J<H.tick)z=H.rewardGrowthsOutsideX64[Z];else z=Q[Z].rewardGrowthGlobalX64.sub(H.rewardGrowthsOutsideX64[Z]);W.push(K0.wrappingSubU128(K0.wrappingSubU128(Q[Z].rewardGrowthGlobalX64,Y),z))}return W}}var e0=U0.from("Clmm");class D8 extends V${static makeMockPoolInfo({programId:J,mint1:$,mint2:H,ammConfig:Q,createPoolInstructionSimpleAddress:W,initialPrice:Z,startTime:Y,owner:z}){const[j,V,U]=new f0.default($.mint.toBuffer()).gt(new f0.default(H.mint.toBuffer()))?[H,$,new F0(1).div(Z)]:[$,H,Z],C=S0.priceToSqrtPriceX64(U,j.decimals,V.decimals);return{id:W.poolId,mintA:{programId:W.mintProgramIdA,mint:W.mintA,vault:W.mintAVault,decimals:j.decimals},mintB:{programId:W.mintProgramIdB,mint:W.mintB,vault:W.mintBVault,decimals:V.decimals},ammConfig:Q,observationId:W.observationId,creator:z,programId:J,version:6,tickSpacing:Q.tickSpacing,liquidity:J0,sqrtPriceX64:C,currentPrice:U,tickCurrent:0,observationIndex:0,observationUpdateDuration:0,feeGrowthGlobalX64A:J0,feeGrowthGlobalX64B:J0,protocolFeesTokenA:J0,protocolFeesTokenB:J0,swapInAmountTokenA:J0,swapOutAmountTokenB:J0,swapInAmountTokenB:J0,swapOutAmountTokenA:J0,tickArrayBitmap:[],rewardInfos:[],day:{volume:0,volumeFee:0,feeA:0,feeB:0,feeApr:0,rewardApr:{A:0,B:0,C:0},apr:0,priceMax:0,priceMin:0},week:{volume:0,volumeFee:0,feeA:0,feeB:0,feeApr:0,rewardApr:{A:0,B:0,C:0},apr:0,priceMax:0,priceMin:0},month:{volume:0,volumeFee:0,feeA:0,feeB:0,feeApr:0,rewardApr:{A:0,B:0,C:0},apr:0,priceMax:0,priceMin:0},tvl:0,lookupTableAccount:i0.default,startTime:Y.toNumber(),exBitmapInfo:{poolId:W.poolId,positiveTickArrayBitmap:Array.from({length:fH},()=>Array.from({length:8},()=>new f0.default(0))),negativeTickArrayBitmap:Array.from({length:fH},()=>Array.from({length:8},()=>new f0.default(0)))}}}static async makeCreatePoolInstructionSimple({makeTxVersion:J,connection:$,programId:H,owner:Q,payer:W,mint1:Z,mint2:Y,ammConfig:z,initialPrice:j,startTime:V,computeBudgetConfig:U,lookupTableCache:C}){const[q,K,w]=new f0.default(Z.mint.toBuffer()).gt(new f0.default(Y.mint.toBuffer()))?[Y,Z,new F0(1).div(j)]:[Z,Y,j],O=S0.priceToSqrtPriceX64(w,q.decimals,K.decimals),h=await this.makeCreatePoolInstructions({connection:$,programId:H,owner:Q,mintA:q,mintB:K,ammConfigId:z.id,initialPriceX64:O,startTime:V});return{address:{...h.address,mintA:q.mint,mintB:K.mint,mintProgramIdA:q.programId,mintProgramIdB:K.programId},innerTransactions:await L0({connection:$,makeTxVersion:J,computeBudgetConfig:U,payer:W,innerTransaction:[h.innerTransaction],lookupTableCache:C})}}static async makeOpenPositionFromLiquidityInstructionSimple({makeTxVersion:J,connection:$,poolInfo:H,ownerInfo:Q,amountMaxA:W,amountMaxB:Z,tickLower:Y,tickUpper:z,liquidity:j,associatedOnly:V=!0,checkCreateATAOwner:U=!1,withMetadata:C="create",getEphemeralSigners:q,computeBudgetConfig:K,lookupTableCache:w}){const O=[],h=[],b=[],N=[],x=[],k=Q.useSOLBalance&&H.mintA.mint.equals(r.WSOL.mint),g=Q.useSOLBalance&&H.mintB.mint.equals(r.WSOL.mint),A=await this._selectOrCreateTokenAccount({programId:H.mintA.programId,mint:H.mintA.mint,tokenAccounts:k?[]:Q.tokenAccounts,owner:Q.wallet,createInfo:k||W.eq(J0)?{connection:$,payer:Q.feePayer,amount:W,frontInstructions:O,endInstructions:h,frontInstructionsType:b,endInstructionsType:N,signers:x}:void 0,associatedOnly:k?!1:V,checkCreateATAOwner:U}),I=await this._selectOrCreateTokenAccount({programId:H.mintB.programId,mint:H.mintB.mint,tokenAccounts:g?[]:Q.tokenAccounts,owner:Q.wallet,createInfo:g||Z.eq(J0)?{connection:$,payer:Q.feePayer,amount:Z,frontInstructions:O,endInstructions:h,frontInstructionsType:b,endInstructionsType:N,signers:x}:void 0,associatedOnly:g?!1:V,checkCreateATAOwner:U});e0.assertArgument(A!==void 0&&I!==void 0,"cannot found target token accounts","tokenAccounts",Q.tokenAccounts);const T=await this.makeOpenPositionFromLiquidityInstructions({poolInfo:H,ownerInfo:{...Q,tokenAccountA:A,tokenAccountB:I},tickLower:Y,tickUpper:z,liquidity:j,amountMaxA:W,amountMaxB:Z,withMetadata:C,getEphemeralSigners:q});return{address:T.address,innerTransactions:await L0({connection:$,makeTxVersion:J,computeBudgetConfig:K,payer:Q.feePayer,innerTransaction:[{instructionTypes:b,instructions:O,signers:x},T.innerTransaction,{instructionTypes:N,instructions:h,signers:[]}],lookupTableCache:w})}}static async makeOpenPositionFromBaseInstructionSimple({connection:J,poolInfo:$,ownerInfo:H,tickLower:Q,tickUpper:W,base:Z,baseAmount:Y,otherAmountMax:z,associatedOnly:j=!0,checkCreateATAOwner:V=!1,computeBudgetConfig:U,withMetadata:C="create",makeTxVersion:q,lookupTableCache:K,getEphemeralSigners:w}){const O=[],h=[],b=[],N=[],x=[],k=H.useSOLBalance&&$.mintA.mint.equals(r.WSOL.mint),g=H.useSOLBalance&&$.mintB.mint.equals(r.WSOL.mint),A=await this._selectOrCreateTokenAccount({programId:$.mintA.programId,mint:$.mintA.mint,tokenAccounts:k?[]:H.tokenAccounts,owner:H.wallet,createInfo:k?{connection:J,payer:H.feePayer,amount:Z==="MintA"?Y:z,frontInstructions:O,endInstructions:h,frontInstructionsType:b,endInstructionsType:N,signers:x}:void 0,associatedOnly:k?!1:j,checkCreateATAOwner:V}),I=await this._selectOrCreateTokenAccount({programId:$.mintB.programId,mint:$.mintB.mint,tokenAccounts:g?[]:H.tokenAccounts,owner:H.wallet,createInfo:g?{connection:J,payer:H.feePayer,amount:Z==="MintA"?z:Y,frontInstructions:O,endInstructions:h,frontInstructionsType:b,endInstructionsType:N,signers:x}:void 0,associatedOnly:g?!1:j,checkCreateATAOwner:V});e0.assertArgument(A!==void 0&&I!==void 0,"cannot found target token accounts","tokenAccounts",H.tokenAccounts);const T=await this.makeOpenPositionFromBaseInstructions({poolInfo:$,ownerInfo:{...H,tokenAccountA:A,tokenAccountB:I},tickLower:Q,tickUpper:W,base:Z,baseAmount:Y,otherAmountMax:z,withMetadata:C,getEphemeralSigners:w});return{address:T.address,innerTransactions:await L0({connection:J,makeTxVersion:q,computeBudgetConfig:U,payer:H.feePayer,innerTransaction:[{instructionTypes:b,instructions:O,signers:x},T.innerTransaction,{instructionTypes:N,instructions:h,signers:[]}],lookupTableCache:K})}}static async makeIncreasePositionFromLiquidityInstructionSimple({connection:J,poolInfo:$,ownerPosition:H,ownerInfo:Q,amountMaxA:W,amountMaxB:Z,liquidity:Y,associatedOnly:z=!0,checkCreateATAOwner:j=!1,computeBudgetConfig:V,makeTxVersion:U,lookupTableCache:C}){const q=[],K=[],w=[],O=[],h=[],b=Q.useSOLBalance&&$.mintA.mint.equals(r.WSOL.mint),N=Q.useSOLBalance&&$.mintB.mint.equals(r.WSOL.mint),x=await this._selectOrCreateTokenAccount({programId:$.mintA.programId,mint:$.mintA.mint,tokenAccounts:b?[]:Q.tokenAccounts,owner:Q.wallet,createInfo:b?{connection:J,payer:Q.feePayer,amount:W,frontInstructions:q,endInstructions:K,frontInstructionsType:w,endInstructionsType:O,signers:h}:void 0,associatedOnly:b?!1:z,checkCreateATAOwner:j}),k=await this._selectOrCreateTokenAccount({programId:$.mintB.programId,mint:$.mintB.mint,tokenAccounts:N?[]:Q.tokenAccounts,owner:Q.wallet,createInfo:N?{connection:J,payer:Q.feePayer,amount:Z,frontInstructions:q,endInstructions:K,frontInstructionsType:w,endInstructionsType:O,signers:h}:void 0,associatedOnly:N?!1:z,checkCreateATAOwner:j});e0.assertArgument(!!x||!!k,"cannot found target token accounts","tokenAccounts",Q.tokenAccounts);const g=this.makeIncreasePositionFromLiquidityInstructions({poolInfo:$,ownerPosition:H,ownerInfo:{wallet:Q.wallet,tokenAccountA:x,tokenAccountB:k},liquidity:Y,amountMaxA:W,amountMaxB:Z});return{address:g.address,innerTransactions:await L0({connection:J,makeTxVersion:U,computeBudgetConfig:V,payer:Q.feePayer,innerTransaction:[{instructionTypes:w,instructions:q,signers:h},g.innerTransaction,{instructionTypes:O,instructions:K,signers:[]}],lookupTableCache:C})}}static async makeIncreasePositionFromBaseInstructionSimple({connection:J,poolInfo:$,ownerPosition:H,ownerInfo:Q,base:W,baseAmount:Z,otherAmountMax:Y,associatedOnly:z=!0,checkCreateATAOwner:j=!1,computeBudgetConfig:V,makeTxVersion:U,lookupTableCache:C}){const q=[],K=[],w=[],O=[],h=[],b=Q.useSOLBalance&&$.mintA.mint.equals(r.WSOL.mint),N=Q.useSOLBalance&&$.mintB.mint.equals(r.WSOL.mint),x=await this._selectOrCreateTokenAccount({programId:$.mintA.programId,mint:$.mintA.mint,tokenAccounts:b?[]:Q.tokenAccounts,owner:Q.wallet,createInfo:b?{connection:J,payer:Q.feePayer,amount:W==="MintA"?Z:Y,frontInstructions:q,endInstructions:K,frontInstructionsType:w,endInstructionsType:O,signers:h}:void 0,associatedOnly:b?!1:z,checkCreateATAOwner:j}),k=await this._selectOrCreateTokenAccount({programId:$.mintB.programId,mint:$.mintB.mint,tokenAccounts:N?[]:Q.tokenAccounts,owner:Q.wallet,createInfo:N?{connection:J,payer:Q.feePayer,amount:W==="MintA"?Y:Z,frontInstructions:q,endInstructions:K,frontInstructionsType:w,endInstructionsType:O,signers:h}:void 0,associatedOnly:N?!1:z,checkCreateATAOwner:j});e0.assertArgument(!!x||!!k,"cannot found target token accounts","tokenAccounts",Q.tokenAccounts);const g=this.makeIncreasePositionFromBaseInstructions({poolInfo:$,ownerPosition:H,ownerInfo:{wallet:Q.wallet,tokenAccountA:x,tokenAccountB:k},base:W,baseAmount:Z,otherAmountMax:Y});return{address:g.address,innerTransactions:await L0({connection:J,makeTxVersion:U,computeBudgetConfig:V,payer:Q.feePayer,innerTransaction:[{instructionTypes:w,instructions:q,signers:h},g.innerTransaction,{instructionTypes:O,instructions:K,signers:[]}],lookupTableCache:C})}}static async makeDecreaseLiquidityInstructionSimple({connection:J,poolInfo:$,ownerPosition:H,ownerInfo:Q,liquidity:W,amountMinA:Z,amountMinB:Y,associatedOnly:z=!0,checkCreateATAOwner:j=!1,computeBudgetConfig:V,makeTxVersion:U,lookupTableCache:C}){const q=[],K=[],w=[],O=[],h=[],b=Q.useSOLBalance&&$.mintA.mint.equals(r.WSOL.mint),N=Q.useSOLBalance&&$.mintB.mint.equals(r.WSOL.mint),x=await this._selectOrCreateTokenAccount({programId:$.mintA.programId,mint:$.mintA.mint,tokenAccounts:b?[]:Q.tokenAccounts,owner:Q.wallet,createInfo:{connection:J,payer:Q.feePayer,amount:0,frontInstructions:q,frontInstructionsType:w,endInstructions:b?K:[],endInstructionsType:b?O:[],signers:h},associatedOnly:b?!1:z,checkCreateATAOwner:j}),k=await this._selectOrCreateTokenAccount({programId:$.mintB.programId,mint:$.mintB.mint,tokenAccounts:N?[]:Q.tokenAccounts,owner:Q.wallet,createInfo:{connection:J,payer:Q.feePayer,amount:0,frontInstructions:q,frontInstructionsType:w,endInstructions:N?K:[],endInstructionsType:N?O:[],signers:h},associatedOnly:N?!1:z,checkCreateATAOwner:j}),g=[];for(let T of $.rewardInfos){const u=Q.useSOLBalance&&T.tokenMint.equals(r.WSOL.mint),a=T.tokenMint.equals($.mintA.mint)?x:T.tokenMint.equals($.mintB.mint)?k:await this._selectOrCreateTokenAccount({programId:T.tokenProgramId,mint:T.tokenMint,tokenAccounts:u?[]:Q.tokenAccounts,owner:Q.wallet,createInfo:{connection:J,payer:Q.feePayer,amount:0,frontInstructions:q,frontInstructionsType:w,endInstructions:u?K:[],endInstructionsType:u?O:[],signers:h},associatedOnly:u?!1:z,checkCreateATAOwner:j});g.push(a)}e0.assertArgument(!!x||!!k,"cannot found target token accounts","tokenAccounts",Q.tokenAccounts);const A=this.makeDecreaseLiquidityInstructions({poolInfo:$,ownerPosition:H,ownerInfo:{wallet:Q.wallet,tokenAccountA:x,tokenAccountB:k,rewardAccounts:g},liquidity:W,amountMinA:Z,amountMinB:Y}),I=Q.closePosition?this.makeClosePositionInstructions({poolInfo:$,ownerInfo:Q,ownerPosition:H}):{address:{},innerTransaction:{instructions:[],signers:[],instructionTypes:[]}};return{address:A.address,innerTransactions:await L0({connection:J,makeTxVersion:U,computeBudgetConfig:V,payer:Q.feePayer,innerTransaction:[{instructionTypes:w,instructions:q,signers:h},A.innerTransaction,{instructionTypes:O,instructions:K,signers:[]},I.innerTransaction],lookupTableCache:C})}}static async makeSwapBaseInInstructionSimple({connection:J,poolInfo:$,ownerInfo:H,inputMint:Q,amountIn:W,amountOutMin:Z,priceLimit:Y,remainingAccounts:z,associatedOnly:j=!0,checkCreateATAOwner:V=!1,computeBudgetConfig:U,makeTxVersion:C,lookupTableCache:q}){const K=[],w=[],O=[],h=[],b=[];let N;if(!Y||Y.equals(new F0(0)))N=Q.equals($.mintA.mint)?L$.add(k0):K$.sub(k0);else N=S0.priceToSqrtPriceX64(Y,$.mintA.decimals,$.mintB.decimals);const x=$.mintA.mint.equals(Q),k=H.useSOLBalance&&$.mintA.mint.equals(r.WSOL.mint),g=H.useSOLBalance&&$.mintB.mint.equals(r.WSOL.mint),A=await this._selectOrCreateTokenAccount({programId:$.mintA.programId,mint:$.mintA.mint,tokenAccounts:k?[]:H.tokenAccounts,owner:H.wallet,createInfo:k||!x?{connection:J,payer:H.feePayer,amount:x?W:0,frontInstructions:K,endInstructions:w,frontInstructionsType:O,endInstructionsType:h,signers:b}:void 0,associatedOnly:k?!1:j,checkCreateATAOwner:V}),I=await this._selectOrCreateTokenAccount({programId:$.mintB.programId,mint:$.mintB.mint,tokenAccounts:g?[]:H.tokenAccounts,owner:H.wallet,createInfo:g||x?{connection:J,payer:H.feePayer,amount:x?0:W,frontInstructions:K,endInstructions:w,frontInstructionsType:O,endInstructionsType:h,signers:b}:void 0,associatedOnly:g?!1:j,checkCreateATAOwner:V});e0.assertArgument(!!A||!!I,"cannot found target token accounts","tokenAccounts",H.tokenAccounts);const T=this.makeSwapBaseInInstructions({poolInfo:$,ownerInfo:{wallet:H.wallet,tokenAccountA:A,tokenAccountB:I},inputMint:Q,amountIn:W,amountOutMin:Z,sqrtPriceLimitX64:N,remainingAccounts:z});return{address:T.address,innerTransactions:await L0({connection:J,makeTxVersion:C,computeBudgetConfig:U,payer:H.feePayer,innerTransaction:[{instructionTypes:O,instructions:K,signers:b},T.innerTransaction,{instructionTypes:h,instructions:w,signers:[]}],lookupTableCache:q})}}static async makeSwapBaseOutInstructionSimple({connection:J,poolInfo:$,ownerInfo:H,outputMint:Q,amountOut:W,amountInMax:Z,priceLimit:Y,remainingAccounts:z,associatedOnly:j=!0,checkCreateATAOwner:V=!1,computeBudgetConfig:U,makeTxVersion:C,lookupTableCache:q}){const K=[],w=[],O=[],h=[],b=[];let N;if(!Y||Y.equals(new F0(0)))N=Q.equals($.mintB.mint)?L$.add(k0):K$.sub(k0);else N=S0.priceToSqrtPriceX64(Y,$.mintA.decimals,$.mintB.decimals);const x=$.mintA.mint.equals(Q),k=H.useSOLBalance&&$.mintA.mint.equals(r.WSOL.mint),g=H.useSOLBalance&&$.mintB.mint.equals(r.WSOL.mint),A=await this._selectOrCreateTokenAccount({programId:$.mintA.programId,mint:$.mintA.mint,tokenAccounts:k?[]:H.tokenAccounts,owner:H.wallet,createInfo:k||!x?{connection:J,payer:H.feePayer,amount:x?Z:0,frontInstructions:K,endInstructions:w,frontInstructionsType:O,endInstructionsType:h,signers:b}:void 0,associatedOnly:k?!1:j,checkCreateATAOwner:V}),I=await this._selectOrCreateTokenAccount({programId:$.mintB.programId,mint:$.mintB.mint,tokenAccounts:g?[]:H.tokenAccounts,owner:H.wallet,createInfo:g||x?{connection:J,payer:H.feePayer,amount:x?0:Z,frontInstructions:K,endInstructions:w,frontInstructionsType:O,endInstructionsType:h,signers:b}:void 0,associatedOnly:g?!1:j,checkCreateATAOwner:V});e0.assertArgument(!!A||!!I,"cannot found target token accounts","tokenAccounts",H.tokenAccounts);const T=this.makeSwapBaseOutInstructions({poolInfo:$,ownerInfo:{wallet:H.wallet,tokenAccountA:A,tokenAccountB:I},outputMint:Q,amountOut:W,amountInMax:Z,sqrtPriceLimitX64:N,remainingAccounts:z});return{address:T.address,innerTransactions:await L0({connection:J,makeTxVersion:C,computeBudgetConfig:U,payer:H.feePayer,innerTransaction:[{instructionTypes:O,instructions:K,signers:b},T.innerTransaction,{instructionTypes:h,instructions:w,signers:[]}],lookupTableCache:q})}}static async makeCLosePositionInstructionSimple({poolInfo:J,ownerPosition:$,ownerInfo:H,makeTxVersion:Q,lookupTableCache:W,connection:Z}){const Y=this.makeClosePositionInstructions({poolInfo:J,ownerInfo:H,ownerPosition:$});return{address:Y.address,innerTransactions:await L0({connection:Z,makeTxVersion:Q,computeBudgetConfig:void 0,payer:H.feePayer,innerTransaction:[Y.innerTransaction],lookupTableCache:W})}}static async makeInitRewardInstructionSimple({connection:J,poolInfo:$,ownerInfo:H,rewardInfo:Q,chainTime:W,associatedOnly:Z=!0,checkCreateATAOwner:Y=!1,makeTxVersion:z,lookupTableCache:j}){e0.assertArgument(Q.endTime>Q.openTime,"reward time error","rewardInfo",Q),e0.assertArgument(Q.openTime>W,"reward must be paid later","rewardInfo",Q);const V=[],U=[],C=[],q=[],K=[],w=H.useSOLBalance&&Q.mint.equals(r.WSOL.mint),O=Q.perSecond.mul(Q.endTime-Q.openTime),h=await this._selectOrCreateTokenAccount({programId:Q.programId,mint:Q.mint,tokenAccounts:w?[]:H.tokenAccounts,owner:H.wallet,createInfo:w?{connection:J,payer:H.feePayer,amount:new f0.default(new F0(O.toFixed(0)).gte(O)?O.toFixed(0):O.add(1).toFixed(0)),frontInstructions:V,endInstructions:U,frontInstructionsType:C,endInstructionsType:q,signers:K}:void 0,associatedOnly:w?!1:Z,checkCreateATAOwner:Y});e0.assertArgument(h,"no money","ownerRewardAccount",H.tokenAccounts);const b=this.makeInitRewardInstructions({poolInfo:$,ownerInfo:{wallet:H.wallet,tokenAccount:h},rewardInfo:{programId:Q.programId,mint:Q.mint,openTime:Q.openTime,endTime:Q.endTime,emissionsPerSecondX64:K0.decimalToX64(Q.perSecond)}});return{address:b.address,innerTransactions:await L0({connection:J,makeTxVersion:z,computeBudgetConfig:void 0,payer:H.feePayer,innerTransaction:[{instructionTypes:C,instructions:V,signers:K},b.innerTransaction,{instructionTypes:q,instructions:U,signers:[]}],lookupTableCache:j})}}static async makeInitRewardsInstructionSimple({connection:J,poolInfo:$,ownerInfo:H,rewardInfos:Q,associatedOnly:W=!0,checkCreateATAOwner:Z=!1,computeBudgetConfig:Y,makeTxVersion:z,lookupTableCache:j}){for(let h of Q)e0.assertArgument(h.endTime>h.openTime,"reward time error","rewardInfo",h);const V=[],U=[],C=[],q=[],K=[],w=[];for(let h of Q){const b=H.useSOLBalance&&h.mint.equals(r.WSOL.mint),N=h.perSecond.mul(h.endTime-h.openTime),x=await this._selectOrCreateTokenAccount({programId:h.programId,mint:h.mint,tokenAccounts:b?[]:H.tokenAccounts,owner:H.wallet,createInfo:b?{connection:J,payer:H.feePayer,amount:new f0.default(new F0(N.toFixed(0)).gte(N)?N.toFixed(0):N.add(1).toFixed(0)),frontInstructions:V,endInstructions:U,frontInstructionsType:C,endInstructionsType:q,signers:w}:void 0,associatedOnly:b?!1:W,checkCreateATAOwner:Z});e0.assertArgument(x,"no money","ownerRewardAccount",H.tokenAccounts),K.push(this.makeInitRewardInstructions({poolInfo:$,ownerInfo:{wallet:H.wallet,tokenAccount:x},rewardInfo:{programId:h.programId,mint:h.mint,openTime:h.openTime,endTime:h.endTime,emissionsPerSecondX64:K0.decimalToX64(h.perSecond)}}))}let O={};for(let h of K)O={...O,...h.address};return{address:O,innerTransactions:await L0({connection:J,makeTxVersion:z,computeBudgetConfig:Y,payer:H.feePayer,innerTransaction:[{instructionTypes:C,instructions:V,signers:w},...K.map((h)=>h.innerTransaction),{instructionTypes:q,instructions:U,signers:[]}],lookupTableCache:j})}}static async makeSetRewardInstructionSimple({connection:J,poolInfo:$,ownerInfo:H,rewardInfo:Q,chainTime:W,associatedOnly:Z=!0,checkCreateATAOwner:Y=!1,makeTxVersion:z,lookupTableCache:j}){e0.assertArgument(Q.endTime>Q.openTime,"reward time error","rewardInfo",Q),e0.assertArgument(Q.openTime>W,"reward must be paid later","rewardInfo",Q);const V=[],U=[],C=[],q=[],K=[],w=H.useSOLBalance&&Q.mint.equals(r.WSOL.mint),O=await this._selectOrCreateTokenAccount({programId:Q.programId,mint:Q.mint,tokenAccounts:w?[]:H.tokenAccounts,owner:H.wallet,createInfo:w?{connection:J,payer:H.feePayer,amount:new f0.default(new F0(Q.perSecond.sub(Q.endTime-Q.openTime).toFixed(0)).gte(Q.perSecond.sub(Q.endTime-Q.openTime))?Q.perSecond.sub(Q.endTime-Q.openTime).toFixed(0):Q.perSecond.sub(Q.endTime-Q.openTime).add(1).toFixed(0)),frontInstructions:V,endInstructions:U,frontInstructionsType:C,endInstructionsType:q,signers:K}:void 0,associatedOnly:w?!1:Z,checkCreateATAOwner:Y});e0.assertArgument(O,"no money","ownerRewardAccount",H.tokenAccounts);const h=this.makeSetRewardInstructions({poolInfo:$,ownerInfo:{wallet:H.wallet,tokenAccount:O},rewardInfo:{mint:Q.mint,openTime:Q.openTime,endTime:Q.endTime,emissionsPerSecondX64:K0.decimalToX64(Q.perSecond)}});return{address:h.address,innerTransactions:await L0({connection:J,makeTxVersion:z,computeBudgetConfig:void 0,payer:H.feePayer,innerTransaction:[{instructionTypes:C,instructions:V,signers:K},h.innerTransaction,{instructionTypes:q,instructions:U,signers:[]}],lookupTableCache:j})}}static async makeSetRewardsInstructionSimple({connection:J,poolInfo:$,ownerInfo:H,rewardInfos:Q,chainTime:W,associatedOnly:Z=!0,checkCreateATAOwner:Y=!1,computeBudgetConfig:z,makeTxVersion:j,lookupTableCache:V}){const U=[],C=[],q=[],K=[],w=[],O=[];for(let b of Q){e0.assertArgument(b.endTime>b.openTime,"reward time error","rewardInfo",b),e0.assertArgument(b.openTime>W,"reward must be paid later","rewardInfo",b);const N=H.useSOLBalance&&b.mint.equals(r.WSOL.mint),x=await this._selectOrCreateTokenAccount({programId:b.programId,mint:b.mint,tokenAccounts:N?[]:H.tokenAccounts,owner:H.wallet,createInfo:N?{connection:J,payer:H.feePayer,amount:new f0.default(new F0(b.perSecond.sub(b.endTime-b.openTime).toFixed(0)).gte(b.perSecond.sub(b.endTime-b.openTime))?b.perSecond.sub(b.endTime-b.openTime).toFixed(0):b.perSecond.sub(b.endTime-b.openTime).add(1).toFixed(0)),frontInstructions:U,endInstructions:C,frontInstructionsType:q,endInstructionsType:K,signers:O}:void 0,associatedOnly:N?!1:Z,checkCreateATAOwner:Y});e0.assertArgument(x,"no money","ownerRewardAccount",H.tokenAccounts),w.push(this.makeSetRewardInstructions({poolInfo:$,ownerInfo:{wallet:H.wallet,tokenAccount:x},rewardInfo:{mint:b.mint,openTime:b.openTime,endTime:b.endTime,emissionsPerSecondX64:K0.decimalToX64(b.perSecond)}}))}let h={};for(let b of w)h={...h,...b.address};return{address:h,innerTransactions:await L0({connection:J,makeTxVersion:j,computeBudgetConfig:z,payer:H.feePayer,innerTransaction:[{instructionTypes:q,instructions:U,signers:O},...w.map((b)=>b.innerTransaction),{instructionTypes:K,instructions:C,signers:[]}],lookupTableCache:V})}}static async makeCollectRewardInstructionSimple({connection:J,poolInfo:$,ownerInfo:H,rewardMint:Q,associatedOnly:W=!0,checkCreateATAOwner:Z=!1,computeBudgetConfig:Y,makeTxVersion:z,lookupTableCache:j}){const V=[],U=[],C=[],q=[],K=[],w=$.rewardInfos.find((N)=>N.tokenMint.equals(Q));if(e0.assertArgument(w!==void 0,"reward mint error","not found reward mint",Q),w===void 0)throw Error("reward mint error");const O=H.useSOLBalance&&Q.equals(r.WSOL.mint),h=await this._selectOrCreateTokenAccount({programId:w.tokenProgramId,mint:Q,tokenAccounts:O?[]:H.tokenAccounts,owner:H.wallet,createInfo:{connection:J,payer:H.feePayer,amount:0,frontInstructions:V,endInstructions:O?U:[],frontInstructionsType:C,endInstructionsType:q,signers:K},associatedOnly:O?!1:W,checkCreateATAOwner:Z});e0.assertArgument(h,"no money","ownerRewardAccount",H.tokenAccounts);const b=this.makeCollectRewardInstructions({poolInfo:$,ownerInfo:{wallet:H.wallet,tokenAccount:h},rewardMint:Q});return{address:b.address,innerTransactions:await L0({connection:J,makeTxVersion:z,computeBudgetConfig:Y,payer:H.feePayer,innerTransaction:[{instructionTypes:C,instructions:V,signers:K},b.innerTransaction,{instructionTypes:q,instructions:U,signers:[]}],lookupTableCache:j})}}static async makeCollectRewardsInstructionSimple({connection:J,poolInfo:$,ownerInfo:H,rewardMints:Q,associatedOnly:W=!0,checkCreateATAOwner:Z=!1,computeBudgetConfig:Y,makeTxVersion:z,lookupTableCache:j}){const V=[],U=[],C=[],q=[],K=[],w=[];for(let h of Q){const b=$.rewardInfos.find((k)=>k.tokenMint.equals(h));if(e0.assertArgument(b!==void 0,"reward mint error","not found reward mint",h),b===void 0)throw Error("reward mint error");const N=H.useSOLBalance&&h.equals(r.WSOL.mint),x=await this._selectOrCreateTokenAccount({programId:b.tokenProgramId,mint:h,tokenAccounts:N?[]:H.tokenAccounts,owner:H.wallet,createInfo:{connection:J,payer:H.feePayer,amount:0,frontInstructions:V,endInstructions:N?U:[],signers:w,frontInstructionsType:C,endInstructionsType:q},associatedOnly:N?!1:W,checkCreateATAOwner:Z});e0.assertArgument(x,"no money","ownerRewardAccount",H.tokenAccounts),K.push(this.makeCollectRewardInstructions({poolInfo:$,ownerInfo:{wallet:H.wallet,tokenAccount:x},rewardMint:h}))}let O={};for(let h of K)O={...O,...h.address};return{address:O,innerTransactions:await L0({connection:J,makeTxVersion:z,computeBudgetConfig:Y,payer:H.feePayer,innerTransaction:[{instructionTypes:C,instructions:V,signers:w},...K.map((h)=>h.innerTransaction),{instructionTypes:q,instructions:U,signers:[]}],lookupTableCache:j})}}static async makeHarvestAllRewardInstructionSimple({connection:J,fetchPoolInfos:$,ownerInfo:H,associatedOnly:Q=!0,checkCreateATAOwner:W=!1,makeTxVersion:Z,lookupTableCache:Y}){const z={};for(let w of H.tokenAccounts)if(Q){if(n0(H.wallet,w.accountInfo.mint,w.programId).publicKey.equals(w.pubkey))z[w.accountInfo.mint.toString()]=w.pubkey}else z[w.accountInfo.mint.toString()]=w.pubkey;const j=[],V=[],U=[],C=[],q=[],K=[];for(let w of Object.values($)){if(w.positionAccount===void 0)continue;if(!w.positionAccount.find((g)=>!g.tokenFeeAmountA.isZero()||!g.tokenFeeAmountB.isZero()||g.rewardInfos.find((A)=>!A.pendingReward.isZero())))continue;const O=w.state,h=H.useSOLBalance&&O.mintA.mint.equals(r.WSOL.mint),b=H.useSOLBalance&&O.mintB.mint.equals(r.WSOL.mint),N=z[O.mintA.mint.toString()]??await this._selectOrCreateTokenAccount({programId:O.mintA.programId,mint:O.mintA.mint,tokenAccounts:h?[]:H.tokenAccounts,owner:H.wallet,createInfo:{connection:J,payer:H.feePayer,amount:0,frontInstructions:j,frontInstructionsType:U,endInstructions:h?V:[],endInstructionsType:h?C:[],signers:K},associatedOnly:h?!1:Q,checkCreateATAOwner:W}),x=z[O.mintB.mint.toString()]??await this._selectOrCreateTokenAccount({programId:O.mintB.programId,mint:O.mintB.mint,tokenAccounts:b?[]:H.tokenAccounts,owner:H.wallet,createInfo:{connection:J,payer:H.feePayer,amount:0,frontInstructions:j,frontInstructionsType:U,endInstructions:b?V:[],endInstructionsType:b?C:[],signers:K},associatedOnly:b?!1:Q,checkCreateATAOwner:W});z[O.mintA.mint.toString()]=N,z[O.mintB.mint.toString()]=x;const k=[];for(let g of O.rewardInfos){const A=H.useSOLBalance&&g.tokenMint.equals(r.WSOL.mint),I=z[g.tokenMint.toString()]??await this._selectOrCreateTokenAccount({programId:g.tokenProgramId,mint:g.tokenMint,tokenAccounts:A?[]:H.tokenAccounts,owner:H.wallet,createInfo:{connection:J,payer:H.feePayer,amount:0,frontInstructions:j,endInstructions:A?V:[],frontInstructionsType:U,endInstructionsType:C,signers:K},associatedOnly:A?!1:Q,checkCreateATAOwner:W});z[g.tokenMint.toString()]=I,k.push(I)}for(let g of w.positionAccount)q.push(this.makeDecreaseLiquidityInstructions({poolInfo:O,ownerPosition:g,ownerInfo:{wallet:H.wallet,tokenAccountA:N,tokenAccountB:x,rewardAccounts:k},liquidity:J0,amountMinA:J0,amountMinB:J0}))}return{address:{},innerTransactions:await L0({connection:J,makeTxVersion:Z,computeBudgetConfig:void 0,payer:H.feePayer,innerTransaction:[{instructionTypes:U,instructions:j,signers:K},...q.map((w)=>w.innerTransaction),{instructionTypes:C,instructions:V,signers:[]}],lookupTableCache:Y})}}static async makeCreatePoolInstructions({connection:J,programId:$,owner:H,mintA:Q,mintB:W,ammConfigId:Z,initialPriceX64:Y,startTime:z}){const j=g$({fromPublicKey:H,programId:$}),V=_Y($,Z,Q.mint,W.mint).publicKey,U=e6($,V,Q.mint).publicKey,C=e6($,V,W.mint).publicKey,q=[zj.createAccountWithSeed({fromPubkey:H,basePubkey:H,seed:j.seed,newAccountPubkey:j.publicKey,lamports:await J.getMinimumBalanceForRentExemption(o6.span),space:o6.span,programId:$}),FY($,V,H,Z,j.publicKey,Q.mint,U,Q.programId,W.mint,C,W.programId,D$($,V).publicKey,Y,z)];return{address:{observationId:j.publicKey,poolId:V,mintAVault:U,mintBVault:C},innerTransaction:{instructions:q,signers:[],instructionTypes:[$0.createAccount,$0.clmmCreatePool],lookupTableAddress:[]}}}static async makeOpenPositionFromLiquidityInstructions({poolInfo:J,ownerInfo:$,tickLower:H,tickUpper:Q,liquidity:W,amountMaxA:Z,amountMaxB:Y,withMetadata:z,getEphemeralSigners:j}){const V=[];let U;if(j)U=new i0((await j(1))[0]);else{const k=yY.generate();V.push(k),U=k.publicKey}const C=v0.getTickArrayStartIndexByTick(H,J.ammConfig.tickSpacing),q=v0.getTickArrayStartIndexByTick(Q,J.ammConfig.tickSpacing),{publicKey:K}=m0(J.programId,J.id,C),{publicKey:w}=m0(J.programId,J.id,q),{publicKey:O}=n0($.wallet,U,m),{publicKey:h}=t6(U),{publicKey:b}=a$(J.programId,U),{publicKey:N}=TH(J.programId,J.id,H,Q),x=XY(J.programId,$.feePayer,J.id,$.wallet,U,O,h,N,K,w,b,$.tokenAccountA,$.tokenAccountB,J.mintA.vault,J.mintB.vault,J.mintA.mint,J.mintB.mint,H,Q,C,q,W,Z,Y,z,Q$.isOverflowDefaultTickarrayBitmap(J.tickSpacing,[C,q])?D$(J.programId,J.id).publicKey:void 0);return{address:{nftMint:U,tickArrayLower:K,tickArrayUpper:w,positionNftAccount:O,metadataAccount:h,personalPosition:b,protocolPosition:N},innerTransaction:{instructions:[x],signers:V,instructionTypes:[$0.clmmOpenPosition],lookupTableAddress:[J.lookupTableAccount].filter((k)=>k&&!k.equals(i0.default))}}}static async makeOpenPositionFromBaseInstructions({poolInfo:J,ownerInfo:$,tickLower:H,tickUpper:Q,base:W,baseAmount:Z,otherAmountMax:Y,withMetadata:z,getEphemeralSigners:j}){const V=[];let U;if(j)U=new i0((await j(1))[0]);else{const k=yY.generate();V.push(k),U=k.publicKey}const C=v0.getTickArrayStartIndexByTick(H,J.ammConfig.tickSpacing),q=v0.getTickArrayStartIndexByTick(Q,J.ammConfig.tickSpacing),{publicKey:K}=m0(J.programId,J.id,C),{publicKey:w}=m0(J.programId,J.id,q),{publicKey:O}=n0($.wallet,U,m),{publicKey:h}=t6(U),{publicKey:b}=a$(J.programId,U),{publicKey:N}=TH(J.programId,J.id,H,Q),x=UY(J.programId,$.feePayer,J.id,$.wallet,U,O,h,N,K,w,b,$.tokenAccountA,$.tokenAccountB,J.mintA.vault,J.mintB.vault,J.mintA.mint,J.mintB.mint,H,Q,C,q,z,W,Z,Y,Q$.isOverflowDefaultTickarrayBitmap(J.tickSpacing,[C,q])?D$(J.programId,J.id).publicKey:void 0);return{address:{nftMint:U,tickArrayLower:K,tickArrayUpper:w,positionNftAccount:O,metadataAccount:h,personalPosition:b,protocolPosition:N},innerTransaction:{instructions:[x],signers:V,instructionTypes:[$0.clmmOpenPosition],lookupTableAddress:[J.lookupTableAccount].filter((k)=>k&&!k.equals(i0.default))}}}static makeIncreasePositionFromLiquidityInstructions({poolInfo:J,ownerPosition:$,ownerInfo:H,liquidity:Q,amountMaxA:W,amountMaxB:Z}){const Y=v0.getTickArrayStartIndexByTick($.tickLower,J.ammConfig.tickSpacing),z=v0.getTickArrayStartIndexByTick($.tickUpper,J.ammConfig.tickSpacing),{publicKey:j}=m0(J.programId,J.id,Y),{publicKey:V}=m0(J.programId,J.id,z),{publicKey:U}=n0(H.wallet,$.nftMint,m),{publicKey:C}=a$(J.programId,$.nftMint),{publicKey:q}=TH(J.programId,J.id,$.tickLower,$.tickUpper);return{address:{tickArrayLower:j,tickArrayUpper:V,positionNftAccount:U,personalPosition:C,protocolPosition:q},innerTransaction:{instructions:[qY(J.programId,H.wallet,U,C,J.id,q,j,V,H.tokenAccountA,H.tokenAccountB,J.mintA.vault,J.mintB.vault,J.mintA.mint,J.mintB.mint,Q,W,Z,Q$.isOverflowDefaultTickarrayBitmap(J.tickSpacing,[Y,z])?D$(J.programId,J.id).publicKey:void 0)],signers:[],instructionTypes:[$0.clmmIncreasePosition],lookupTableAddress:[J.lookupTableAccount].filter((K)=>K&&!K.equals(i0.default))}}}static makeIncreasePositionFromBaseInstructions({poolInfo:J,ownerPosition:$,ownerInfo:H,base:Q,baseAmount:W,otherAmountMax:Z}){const Y=v0.getTickArrayStartIndexByTick($.tickLower,J.ammConfig.tickSpacing),z=v0.getTickArrayStartIndexByTick($.tickUpper,J.ammConfig.tickSpacing),{publicKey:j}=m0(J.programId,J.id,Y),{publicKey:V}=m0(J.programId,J.id,z),{publicKey:U}=n0(H.wallet,$.nftMint,m),{publicKey:C}=a$(J.programId,$.nftMint),{publicKey:q}=TH(J.programId,J.id,$.tickLower,$.tickUpper);return{address:{tickArrayLower:j,tickArrayUpper:V,positionNftAccount:U,personalPosition:C,protocolPosition:q},innerTransaction:{instructions:[vY(J.programId,H.wallet,U,C,J.id,q,j,V,H.tokenAccountA,H.tokenAccountB,J.mintA.vault,J.mintB.vault,J.mintA.mint,J.mintB.mint,Q,W,Z,Q$.isOverflowDefaultTickarrayBitmap(J.tickSpacing,[Y,z])?D$(J.programId,J.id).publicKey:void 0)],signers:[],instructionTypes:[$0.clmmIncreasePosition],lookupTableAddress:[J.lookupTableAccount].filter((K)=>K&&!K.equals(i0.default))}}}static makeDecreaseLiquidityInstructions({poolInfo:J,ownerPosition:$,ownerInfo:H,liquidity:Q,amountMinA:W,amountMinB:Z}){const Y=v0.getTickArrayStartIndexByTick($.tickLower,J.ammConfig.tickSpacing),z=v0.getTickArrayStartIndexByTick($.tickUpper,J.ammConfig.tickSpacing),{publicKey:j}=m0(J.programId,J.id,Y),{publicKey:V}=m0(J.programId,J.id,z),{publicKey:U}=n0(H.wallet,$.nftMint,m),{publicKey:C}=a$(J.programId,$.nftMint),{publicKey:q}=TH(J.programId,J.id,$.tickLower,$.tickUpper),K=[];for(let w=0;w<J.rewardInfos.length;w++)K.push({poolRewardVault:J.rewardInfos[w].tokenVault,ownerRewardVault:H.rewardAccounts[w],rewardMint:J.rewardInfos[w].tokenMint});return{address:{tickArrayLower:j,tickArrayUpper:V,positionNftAccount:U,personalPosition:C,protocolPosition:q},innerTransaction:{instructions:[CY(J.programId,H.wallet,U,C,J.id,q,j,V,H.tokenAccountA,H.tokenAccountB,J.mintA.vault,J.mintB.vault,J.mintA.mint,J.mintB.mint,K,Q,W,Z,Q$.isOverflowDefaultTickarrayBitmap(J.tickSpacing,[Y,z])?D$(J.programId,J.id).publicKey:void 0)],signers:[],instructionTypes:[$0.clmmDecreasePosition],lookupTableAddress:[J.lookupTableAccount].filter((w)=>w&&!w.equals(i0.default))}}}static makeClosePositionInstructions({poolInfo:J,ownerInfo:$,ownerPosition:H}){const{publicKey:Q}=n0($.wallet,H.nftMint,m),{publicKey:W}=a$(J.programId,H.nftMint);return{address:{positionNftAccount:Q,personalPosition:W},innerTransaction:{instructions:[DY(J.programId,$.wallet,H.nftMint,Q,W)],signers:[],instructionTypes:[$0.clmmClosePosition],lookupTableAddress:[J.lookupTableAccount].filter((Z)=>Z&&!Z.equals(i0.default))}}}static makeSwapBaseInInstructions({poolInfo:J,ownerInfo:$,inputMint:H,amountIn:Q,amountOutMin:W,sqrtPriceLimitX64:Z,remainingAccounts:Y}){const z=J.mintA.mint.equals(H);return{address:{},innerTransaction:{instructions:[a6(J.programId,$.wallet,J.id,J.ammConfig.id,z?$.tokenAccountA:$.tokenAccountB,z?$.tokenAccountB:$.tokenAccountA,z?J.mintA.vault:J.mintB.vault,z?J.mintB.vault:J.mintA.vault,z?J.mintA.mint:J.mintB.mint,z?J.mintB.mint:J.mintA.mint,Y,J.observationId,Q,W,Z,!0,D$(J.programId,J.id).publicKey)],signers:[],lookupTableAddress:[J.lookupTableAccount].filter((j)=>j&&!j.equals(i0.default)),instructionTypes:[$0.clmmSwapBaseIn]}}}static makeSwapBaseOutInstructions({poolInfo:J,ownerInfo:$,outputMint:H,amountOut:Q,amountInMax:W,sqrtPriceLimitX64:Z,remainingAccounts:Y}){const z=J.mintA.mint.equals(H);return{address:{},innerTransaction:{instructions:[a6(J.programId,$.wallet,J.id,J.ammConfig.id,z?$.tokenAccountB:$.tokenAccountA,z?$.tokenAccountA:$.tokenAccountB,z?J.mintB.vault:J.mintA.vault,z?J.mintA.vault:J.mintB.vault,z?J.mintB.mint:J.mintA.mint,z?J.mintA.mint:J.mintB.mint,Y,J.observationId,Q,W,Z,!1,D$(J.programId,J.id).publicKey)],signers:[],lookupTableAddress:[J.lookupTableAccount].filter((j)=>j&&!j.equals(i0.default)),instructionTypes:[$0.clmmSwapBaseOut]}}}static makeInitRewardInstructions({poolInfo:J,ownerInfo:$,rewardInfo:H}){const Q=PY(J.programId,J.id,H.mint).publicKey,W=G8(J.programId).publicKey;return{address:{poolRewardVault:Q,operationId:W},innerTransaction:{instructions:[RY(J.programId,$.wallet,J.id,W,J.ammConfig.id,$.tokenAccount,H.programId,H.mint,Q,H.openTime,H.endTime,H.emissionsPerSecondX64)],signers:[],instructionTypes:[$0.clmmInitReward],lookupTableAddress:[J.lookupTableAccount].filter((Z)=>Z&&!Z.equals(i0.default))}}}static makeSetRewardInstructions({poolInfo:J,ownerInfo:$,rewardInfo:H}){let Q,W,Z;for(let z=0;z<J.rewardInfos.length;z++)if(J.rewardInfos[z].tokenMint.equals(H.mint))Q=z,W=J.rewardInfos[z].tokenVault,Z=J.rewardInfos[z].tokenMint;if(Q===void 0||W===void 0||Z===void 0)throw Error("reward mint check error");const Y=G8(J.programId).publicKey;return{address:{rewardVault:W,operationId:Y},innerTransaction:{instructions:[BY(J.programId,$.wallet,J.id,Y,J.ammConfig.id,$.tokenAccount,W,Z,Q,H.openTime,H.endTime,H.emissionsPerSecondX64)],signers:[],instructionTypes:[$0.clmmInitReward],lookupTableAddress:[J.lookupTableAccount].filter((z)=>z&&!z.equals(i0.default))}}}static makeCollectRewardInstructions({poolInfo:J,ownerInfo:$,rewardMint:H}){let Q,W;for(let Z=0;Z<J.rewardInfos.length;Z++)if(J.rewardInfos[Z].tokenMint.equals(H))Q=Z,W=J.rewardInfos[Z].tokenVault;if(Q===void 0||W===void 0)throw Error("reward mint check error");return{address:{rewardVault:W},innerTransaction:{instructions:[MY(J.programId,$.wallet,J.id,$.tokenAccount,W,H,Q)],signers:[],instructionTypes:[$0.clmmInitReward],lookupTableAddress:[J.lookupTableAccount].filter((Z)=>Z&&!Z.equals(i0.default))}}}static getLiquidityAmountOutFromAmountIn({poolInfo:J,inputA:$,tickLower:H,tickUpper:Q,amount:W,slippage:Z,add:Y,token2022Infos:z,epochInfo:j,amountHasFee:V}){const U=J.sqrtPriceX64,C=S0.getSqrtPriceX64FromTick(H),q=S0.getSqrtPriceX64FromTick(Q),K=Y?1-Z:1+Z,w=sJ(W,z[$?J.mintA.mint.toString():J.mintB.mint.toString()]?.feeConfig,j,!V),O=new f0.default(new F0(w.amount.sub(w.fee??J0).toString()).mul(K).toFixed(0));let h;if(U.lte(C))h=$?A0.getLiquidityFromTokenAmountA(C,q,O,!Y):new f0.default(0);else if(U.lte(q)){const b=A0.getLiquidityFromTokenAmountA(U,q,O,!Y),N=A0.getLiquidityFromTokenAmountB(C,U,O);h=$?b:N}else h=$?new f0.default(0):A0.getLiquidityFromTokenAmountB(C,q,O);return this.getAmountsFromLiquidity({poolInfo:J,tickLower:H,tickUpper:Q,liquidity:h,slippage:Z,add:Y,token2022Infos:z,epochInfo:j,amountAddFee:V})}static getLiquidityFromAmounts({poolInfo:J,tickLower:$,tickUpper:H,amountA:Q,amountB:W,slippage:Z,add:Y,token2022Infos:z,epochInfo:j,amountHasFee:V}){const[U,C,q,K]=$<H?[$,H,Q,W]:[H,$,W,Q],w=J.sqrtPriceX64,O=S0.getSqrtPriceX64FromTick(U),h=S0.getSqrtPriceX64FromTick(C),[b,N]=[sJ(q,z[J.mintA.mint.toString()]?.feeConfig,j,!V),sJ(K,z[J.mintB.mint.toString()]?.feeConfig,j,!V)],x=A0.getLiquidityFromTokenAmounts(w,O,h,b.amount.sub(b.fee??J0),N.amount.sub(N.fee??J0));return this.getAmountsFromLiquidity({poolInfo:J,tickLower:$,tickUpper:H,liquidity:x,slippage:Z,add:Y,token2022Infos:z,epochInfo:j,amountAddFee:!V})}static getAmountsFromLiquidity({poolInfo:J,tickLower:$,tickUpper:H,liquidity:Q,slippage:W,add:Z,token2022Infos:Y,epochInfo:z,amountAddFee:j}){const V=S0.getSqrtPriceX64FromTick($),U=S0.getSqrtPriceX64FromTick(H),C=Z?1+W:1-W,q=A0.getAmountsFromLiquidity(J.sqrtPriceX64,V,U,Q,Z),[K,w]=[sJ(q.amountA,Y[J.mintA.mint.toString()]?.feeConfig,z,j),sJ(q.amountB,Y[J.mintB.mint.toString()]?.feeConfig,z,j)],[O,h]=[sJ(new f0.default(new F0(q.amountA.toString()).mul(C).toFixed(0)),Y[J.mintA.mint.toString()]?.feeConfig,z,j),sJ(new f0.default(new F0(q.amountB.toString()).mul(C).toFixed(0)),Y[J.mintB.mint.toString()]?.feeConfig,z,j)];return{liquidity:Q,amountA:K,amountB:w,amountSlippageA:O,amountSlippageB:h,expirationTime:JQ(K.expirationTime,w.expirationTime)}}static getPriceAndTick({poolInfo:J,price:$,baseIn:H}){const Q=H?$:new F0(1).div($),W=X8.getTickWithPriceAndTickspacing(Q,J.ammConfig.tickSpacing,J.mintA.decimals,J.mintB.decimals),Z=S0.getSqrtPriceX64FromTick(W),Y=S0.sqrtPriceX64ToPrice(Z,J.mintA.decimals,J.mintB.decimals);return H?{tick:W,price:Y}:{tick:W,price:new F0(1).div(Y)}}static getTickPrice({poolInfo:J,tick:$,baseIn:H}){const Q=S0.getSqrtPriceX64FromTick($),W=S0.sqrtPriceX64ToPrice(Q,J.mintA.decimals,J.mintB.decimals);return H?{tick:$,price:W,tickSqrtPriceX64:Q}:{tick:$,price:new F0(1).div(W),tickSqrtPriceX64:Q}}static computeAmountOutFormat({poolInfo:J,tickArrayCache:$,token2022Infos:H,epochInfo:Q,amountIn:W,currencyOut:Z,slippage:Y,catchLiquidityInsufficient:z=!1}){const j=W instanceof O0,V=(j?W.token:r.WSOL).mint,U=W.raw,C=Y.numerator.toNumber()/Y.denominator.toNumber(),{allTrade:q,realAmountIn:K,amountOut:w,minAmountOut:O,expirationTime:h,currentPrice:b,executionPrice:N,priceImpact:x,fee:k,remainingAccounts:g}=this.computeAmountOut({poolInfo:J,tickArrayCache:$,baseMint:V,amountIn:U,slippage:C,token2022Infos:H,epochInfo:Q,catchLiquidityInsufficient:z}),A={...K,amount:j?new O0(W.token,K.amount):new r0(Y$.SOL,K.amount),fee:K.fee===void 0?void 0:j?new O0(W.token,K.fee):new r0(Y$.SOL,K.fee)},I={...w,amount:Z instanceof r?new O0(Z,w.amount):new r0(Z,w.amount),fee:w.fee===void 0?void 0:Z instanceof r?new O0(Z,w.fee):new r0(Z,w.fee)},T={...O,amount:Z instanceof r?new O0(Z,O.amount):new r0(Z,O.amount),fee:O.fee===void 0?void 0:Z instanceof r?new O0(Z,O.fee):new r0(Z,O.fee)},u=new PJ(j?W.token:W.currency,new f0.default(10).pow(new f0.default(20+(j?W.token:W.currency).decimals)),Z instanceof r?Z:r.WSOL,b.mul(new F0(10**(20+(Z instanceof r?Z:r.WSOL).decimals))).toFixed(0)),a=new PJ(j?W.token:W.currency,new f0.default(10).pow(new f0.default(20+(j?W.token:W.currency).decimals)),Z instanceof r?Z:r.WSOL,N.mul(new F0(10**(20+(Z instanceof r?Z:r.WSOL).decimals))).toFixed(0)),n=j?new O0(W.token,k):new r0(W.currency,k);return{allTrade:q,realAmountIn:A,amountOut:I,minAmountOut:T,expirationTime:h,currentPrice:u,executionPrice:a,priceImpact:x,fee:n,remainingAccounts:g}}static async computeAmountOutAndCheckToken({connection:J,poolInfo:$,tickArrayCache:H,baseMint:Q,amountIn:W,slippage:Z,priceLimit:Y=new F0(0),catchLiquidityInsufficient:z=!1}){const j=await J.getEpochInfo(),V=await b6({connection:J,mints:[$.mintA,$.mintB].filter((U)=>U.programId.equals(W$)).map((U)=>U.mint)});return this.computeAmountOut({poolInfo:$,tickArrayCache:H,baseMint:Q,amountIn:W,slippage:Z,priceLimit:Y,token2022Infos:V,epochInfo:j,catchLiquidityInsufficient:z})}static computeAmountOut({poolInfo:J,tickArrayCache:$,baseMint:H,token2022Infos:Q,epochInfo:W,amountIn:Z,slippage:Y,priceLimit:z=new F0(0),catchLiquidityInsufficient:j=!1}){let V;if(z.equals(new F0(0)))V=H.equals(J.mintA.mint)?L$.add(k0):K$.sub(k0);else V=S0.priceToSqrtPriceX64(z,J.mintA.decimals,J.mintB.decimals);const U=sJ(Z,Q[H.toString()]?.feeConfig,W,!1),{allTrade:C,realTradeAmountIn:q,expectedAmountOut:K,remainingAccounts:w,executionPrice:O,feeAmount:h}=Q$.getOutputAmountAndRemainAccounts(J,$,H,U.amount.sub(U.fee??J0),V,j),b=sJ(q,Q[H.toString()]?.feeConfig,W,!0),N=J.mintA.mint.equals(H)?J.mintB.mint:J.mintA.mint,x=sJ(K,Q[N.toString()]?.feeConfig,W,!1),k=S0.sqrtPriceX64ToPrice(O,J.mintA.decimals,J.mintB.decimals),g=H.equals(J.mintA.mint)?k:new F0(1).div(k),A=K.mul(new f0.default(Math.floor((1-Y)*10000000000))).div(new f0.default(10000000000)),I=sJ(A,Q[N.toString()]?.feeConfig,W,!1),T=J.mintA.mint.equals(H)?J.currentPrice:new F0(1).div(J.currentPrice),u=new F0(g).sub(T).abs(),a=T,n=new uJ(new F0(u).mul(1000000000000000).toFixed(0),new F0(a).mul(1000000000000000).toFixed(0));return{allTrade:C,realAmountIn:b,amountOut:x,minAmountOut:I,expirationTime:JQ(b.expirationTime,x.expirationTime),currentPrice:J.currentPrice,executionPrice:g,priceImpact:n,fee:h,remainingAccounts:w}}static async computeAmountInAndCheckToken({connection:J,poolInfo:$,tickArrayCache:H,baseMint:Q,amountOut:W,slippage:Z,priceLimit:Y=new F0(0)}){const z=await J.getEpochInfo(),j=await b6({connection:J,mints:[$.mintA,$.mintB].filter((V)=>V.programId.equals(W$)).map((V)=>V.mint)});return this.computeAmountIn({poolInfo:$,tickArrayCache:H,baseMint:Q,amountOut:W,slippage:Z,priceLimit:Y,token2022Infos:j,epochInfo:z})}static computeAmountIn({poolInfo:J,tickArrayCache:$,baseMint:H,token2022Infos:Q,epochInfo:W,amountOut:Z,slippage:Y,priceLimit:z=new F0(0)}){let j;if(z.equals(new F0(0)))j=H.equals(J.mintB.mint)?L$.add(k0):K$.sub(k0);else j=S0.priceToSqrtPriceX64(z,J.mintA.decimals,J.mintB.decimals);const V=sJ(Z,Q[H.toString()]?.feeConfig,W,!0),{expectedAmountIn:U,remainingAccounts:C,executionPrice:q,feeAmount:K}=Q$.getInputAmountAndRemainAccounts(J,$,H,V.amount.sub(V.fee??J0),j),w=J.mintA.mint.equals(H)?J.mintB.mint:J.mintA.mint,O=sJ(U,Q[w.toString()]?.feeConfig,W,!0),h=S0.sqrtPriceX64ToPrice(q,J.mintA.decimals,J.mintB.decimals),b=H.equals(J.mintA.mint)?h:new F0(1).div(h),N=U.mul(new f0.default(Math.floor((1+Y)*10000000000))).div(new f0.default(10000000000)),x=sJ(N,Q[w.toString()]?.feeConfig,W,!0),k=J.mintA.mint.equals(H)?J.currentPrice:new F0(1).div(J.currentPrice),g=new F0(b).sub(k).abs(),A=k,I=new uJ(new F0(g).mul(1000000000000000).toFixed(0),new F0(A).mul(1000000000000000).toFixed(0));return{amountIn:O,maxAmountIn:x,realAmountOut:V,expirationTime:JQ(O.expirationTime,V.expirationTime),currentPrice:J.currentPrice,executionPrice:b,priceImpact:I,fee:K,remainingAccounts:C}}static estimateAprsForPriceRangeMultiplier({poolInfo:J,aprType:$,positionTickLowerIndex:H,positionTickUpperIndex:Q}){const W=J[$],Z=this.getTickPrice({poolInfo:J,tick:H,baseIn:!0}).price.toNumber(),Y=this.getTickPrice({poolInfo:J,tick:Q,baseIn:!0}).price.toNumber(),z=Math.max(Z,W.priceMin),V=Math.min(Y,W.priceMax)-z,U=Y-Z,C=W.priceMax-W.priceMin;let q;if(V<=0)q=0;else if(U===V)q=C/V;else if(C===V)q=V/U;else q=V/C*(V/U);return{feeApr:W.feeApr*q,rewardsApr:[W.rewardApr.A*q,W.rewardApr.B*q,W.rewardApr.C*q],apr:W.apr*q}}static estimateAprsForPriceRangeDelta({poolInfo:J,aprType:$,mintPrice:H,rewardMintDecimals:Q,liquidity:W,positionTickLowerIndex:Z,positionTickUpperIndex:Y,chainTime:z}){const j=$==="day"?1:$==="week"?7:$==="month"?30:0,V=J[$],U=H[J.mintA.mint.toString()],C=H[J.mintB.mint.toString()],q=J.mintA.decimals,K=J.mintB.decimals;if(!V||!U||!C)return{feeApr:0,rewardsApr:[0,0,0],apr:0};const w=S0.getSqrtPriceX64FromTick(Z),O=S0.getSqrtPriceX64FromTick(Y),{amountSlippageA:h,amountSlippageB:b}=A0.getAmountsFromLiquidityWithSlippage(J.sqrtPriceX64,w,O,J.liquidity,!1,!1,0),{amountSlippageA:N,amountSlippageB:x}=A0.getAmountsFromLiquidityWithSlippage(J.sqrtPriceX64,w,O,W,!1,!1,0),k=new F0(h.toString()).div(new F0(10).pow(q)).mul(U.toFixed(q)).add(new F0(b.toString()).div(new F0(10).pow(K)).mul(C.toFixed(K))),g=new F0(N.toString()).div(new F0(10).pow(q)).mul(U.toFixed(q)).add(new F0(x.toString()).div(new F0(10).pow(K)).mul(C.toFixed(K))),A=g.div(k.add(g)).div(g),T=new F0(V.volumeFee).mul(365).div(j).mul(A).mul(100).toNumber(),u=31536000,a=J.rewardInfos.map((n)=>{const Z0=Q[n.tokenMint.toString()],_=H[n.tokenMint.toString()];if(z<n.openTime.toNumber()||z>n.endTime.toNumber()||n.perSecond.equals(0)||!_||Z0===void 0)return 0;return new F0(_.toFixed(Z0)).mul(n.perSecond.mul(u)).div(new F0(10).pow(Z0)).mul(A).mul(100).toNumber()});return{feeApr:T,rewardsApr:a,apr:T+a.reduce((n,Z0)=>n+Z0,0)}}static async fetchMultiplePoolInfos({connection:J,poolKeys:$,ownerInfo:H,chainTime:Q,batchRequest:W=!1,updateOwnerRewardAndFee:Z=!0}){const Y=await J$(J,$.map((q)=>new i0(q.id)),{batchRequest:W}),z={};for(let q=0;q<$.length;q++){const K=$[q],w=Y[q];if(w===null)continue;z[K.id]=D$(w.owner,new i0(K.id)).publicKey}const j=await this.fetchExBitmaps({connection:J,exBitmapAddress:Object.values(z),batchRequest:W}),V=[],U={},C=[];for(let q=0;q<$.length;q++){const K=$[q],w=Y[q],O=j[z[K.id].toString()];if(w===null)continue;const h=gY.decode(w.data);if(U[K.id]={state:{id:new i0(K.id),mintA:{programId:new i0(K.mintProgramIdA),mint:h.mintA,vault:h.vaultA,decimals:h.mintDecimalsA},mintB:{programId:new i0(K.mintProgramIdB),mint:h.mintB,vault:h.vaultB,decimals:h.mintDecimalsB},observationId:h.observationId,ammConfig:{...K.ammConfig,id:new i0(K.ammConfig.id)},creator:h.creator,programId:w.owner,version:6,tickSpacing:h.tickSpacing,liquidity:h.liquidity,sqrtPriceX64:h.sqrtPriceX64,currentPrice:S0.sqrtPriceX64ToPrice(h.sqrtPriceX64,h.mintDecimalsA,h.mintDecimalsB),tickCurrent:h.tickCurrent,observationIndex:h.observationIndex,observationUpdateDuration:h.observationUpdateDuration,feeGrowthGlobalX64A:h.feeGrowthGlobalX64A,feeGrowthGlobalX64B:h.feeGrowthGlobalX64B,protocolFeesTokenA:h.protocolFeesTokenA,protocolFeesTokenB:h.protocolFeesTokenB,swapInAmountTokenA:h.swapInAmountTokenA,swapOutAmountTokenB:h.swapOutAmountTokenB,swapInAmountTokenB:h.swapInAmountTokenB,swapOutAmountTokenA:h.swapOutAmountTokenA,tickArrayBitmap:h.tickArrayBitmap,rewardInfos:await Q$.updatePoolRewardInfos({connection:J,apiPoolInfo:K,chainTime:Q,poolLiquidity:h.liquidity,rewardInfos:h.rewardInfos.filter((b)=>!b.tokenMint.equals(i0.default))}),day:K.day,week:K.week,month:K.month,tvl:K.tvl,lookupTableAccount:K.lookupTableAccount?new i0(K.lookupTableAccount):i0.default,startTime:h.startTime.toNumber(),exBitmapInfo:O}},H)C.push(...U[K.id].state.rewardInfos.filter((b)=>b.creator.equals(H.wallet)));if(!V.find((b)=>b.equals(w.owner)))V.push(w.owner)}if(H){const q=H.tokenAccounts.filter((h)=>h.accountInfo.amount.eq(new f0.default(1))).map((h)=>h.accountInfo.mint),K=[];for(let h of q)for(let b of V)K.push(a$(b,h).publicKey);const w=await J$(J,K,{batchRequest:W}),O={};for(let h of w){if(h===null)continue;const b=kY.decode(h.data),N=b.poolId.toString(),x=U[N];if(x===void 0)continue;const k=x.state,g=this.getTickPrice({poolInfo:k,tick:b.tickLower,baseIn:!0}),A=this.getTickPrice({poolInfo:k,tick:b.tickUpper,baseIn:!0}),{amountA:I,amountB:T}=A0.getAmountsFromLiquidity(k.sqrtPriceX64,g.tickSqrtPriceX64,A.tickSqrtPriceX64,b.liquidity,!1),u=1/(1-Math.sqrt(Math.sqrt(g.price.div(A.price).toNumber())));U[N].positionAccount=[...U[N].positionAccount??[],{poolId:b.poolId,nftMint:b.nftMint,priceLower:g.price,priceUpper:A.price,amountA:I,amountB:T,tickLower:b.tickLower,tickUpper:b.tickUpper,liquidity:b.liquidity,feeGrowthInsideLastX64A:b.feeGrowthInsideLastX64A,feeGrowthInsideLastX64B:b.feeGrowthInsideLastX64B,tokenFeesOwedA:b.tokenFeesOwedA,tokenFeesOwedB:b.tokenFeesOwedB,rewardInfos:b.rewardInfos.map((Z0)=>({...Z0,pendingReward:new f0.default(0)})),leverage:u,tokenFeeAmountA:new f0.default(0),tokenFeeAmountB:new f0.default(0)}];const a=v0.getTickArrayAddressByTick(U[N].state.programId,b.poolId,b.tickLower,U[N].state.tickSpacing),n=v0.getTickArrayAddressByTick(U[N].state.programId,b.poolId,b.tickUpper,U[N].state.tickSpacing);O[`${U[N].state.programId.toString()}-${b.poolId.toString()}-${b.tickLower}`]=a,O[`${U[N].state.programId.toString()}-${b.poolId.toString()}-${b.tickUpper}`]=n}if(Z){const h=Object.values(O),b=await J$(J,h,{batchRequest:W}),N={};for(let x=0;x<h.length;x++){const k=b[x];if(k===null)continue;const g=h[x];N[g.toString()]={address:g,...jQ.decode(k.data)}}for(let{state:x,positionAccount:k}of Object.values(U)){if(!k)continue;for(let g of k){const A=`${x.programId.toString()}-${x.id.toString()}-${g.tickLower}`,I=`${x.programId.toString()}-${x.id.toString()}-${g.tickUpper}`,T=N[O[A].toString()],u=N[O[I].toString()],a=T.ticks[v0.getTickOffsetInArray(g.tickLower,x.tickSpacing)],n=u.ticks[v0.getTickOffsetInArray(g.tickUpper,x.tickSpacing)],{tokenFeeAmountA:Z0,tokenFeeAmountB:_}=U8.GetPositionFees(x,g,a,n),G=U8.GetPositionRewards(x,g,a,n);g.tokenFeeAmountA=Z0.gte(J0)&&Z0.lt(j8)?Z0:J0,g.tokenFeeAmountB=_.gte(J0)&&Z0.lt(j8)?_:J0;for(let v=0;v<G.length;v++)g.rewardInfos[v].pendingReward=G[v].gte(J0)&&G[v].lt(j8)?G[v]:J0}}}}if(C.length>0){const q=C.map((O)=>O.tokenVault),K=await J$(J,q,{batchRequest:W}),w={};for(let O=0;O<q.length;O++){const h=q[O].toString(),b=K[O];if(b===null)continue;const N=$$.decode(b.data);w[h]=N.amount}for(let O of C){const h=w[O.tokenVault.toString()];O.remainingRewards=h!==void 0?h.sub(O.rewardTotalEmissioned.sub(O.rewardClaimed)):J0}}return U}static async fetchMultiplePoolTickArrays({connection:J,poolKeys:$,batchRequest:H}){const Q={},W=[];for(let z of $){const j=v0.getTickArrayStartIndexByTick(z.tickCurrent,z.tickSpacing),V=v0.getInitializedTickArrayInRange(z.tickArrayBitmap,z.exBitmapInfo,z.tickSpacing,j,7);for(let U of V){const{publicKey:C}=m0(z.programId,z.id,U);W.push({pubkey:C}),Q[C.toString()]=z.id}}const Z=await FH(J,W,{batchRequest:H}),Y={};for(let z of Z){if(!z.accountInfo)continue;const j=Q[z.pubkey.toString()];if(!j)continue;if(Y[j.toString()]===void 0)Y[j.toString()]={};const V=jQ.decode(z.accountInfo.data);Y[j.toString()][V.startTickIndex]={...V,address:z.pubkey}}return Y}static async fetchExBitmaps({connection:J,exBitmapAddress:$,batchRequest:H}){const Q=await FH(J,$.map((Z)=>({pubkey:Z})),{batchRequest:H}),W={};for(let Z of Q){if(Z.accountInfo===null)continue;W[Z.pubkey.toString()]=AY.decode(Z.accountInfo.data)}return W}static async getWhiteListMint({connection:J,programId:$}){const H=await J.getAccountInfo(G8($).publicKey);if(!H)return[];return xY.decode(H.data).whitelistMints.filter((W)=>!W.equals(i0.default))}}import{PublicKey as jj} from"@solana/web3.js";var IY="9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",Vj=new jj(IY),mY={[IY]:3},dY={3:Vj};var $W=e([p0(5),p0(8),c("ownAddress"),P("vaultSignerNonce"),c("baseMint"),c("quoteMint"),c("baseVault"),P("baseDepositsTotal"),P("baseFeesAccrued"),c("quoteVault"),P("quoteDepositsTotal"),P("quoteFeesAccrued"),P("quoteDustThreshold"),c("requestQueue"),c("eventQueue"),c("bids"),c("asks"),P("baseLotSize"),P("quoteLotSize"),P("feeRateBps"),P("referrerRebatesAccrued"),p0(7)]),pY={3:$W};import{PublicKey as Gj} from"@solana/web3.js";var q8=U0.from("Serum");class v8{static getProgramId(J){const $=dY[J];return q8.assertArgument(!!$,"invalid version","version",J),$}static getVersion(J){const $=J.toBase58(),H=mY[$];return q8.assertArgument(!!H,"invalid program id","programId",$),H}static getStateLayout(J){const $=pY[J];return q8.assertArgument(!!$,"invalid version","version",J),$}static getLayouts(J){return{state:this.getStateLayout(J)}}static getAssociatedAuthority({programId:J,marketId:$}){const H=[$.toBuffer()];let Q=0,W;while(Q<100){try{const Z=H.concat(Buffer.from([Q]),Buffer.alloc(7));W=Gj.createProgramAddressSync(Z,J)}catch(Z){if(Z instanceof TypeError)throw Z;Q++;continue}return{publicKey:W,nonce:Q}}return q8.throwArgumentError("unable to find a viable program address nonce","params",{programId:J,marketId:$})}}import{PublicKey as Fj} from"@solana/web3.js";var Dj=function(J,$){return[0,RH-2]},qj=function(J){return[0,RH-2]},vj=function(J){return[0,RH-2]},Cj=function(J,$,H){const[Q,W]=Dj($,H);let Z=Q,Y=W,z=0;const j=$*J.multiplier/H;while(Z<=Y){if(z=Math.floor((Y+Z)/2),z===0||z>=RH-2)return[z,z,!1];const V=J.DataElement[z].x*J.multiplier/J.DataElement[z].y,U=J.DataElement[z-1].x*J.multiplier/J.DataElement[z-1].y,C=J.DataElement[z+1].x*J.multiplier/J.DataElement[z+1].y;if(j===V)return[z,z,!0];else if(j===U)return[z-1,z-1,!0];else if(j===C)return[z+1,z+1,!0];else if(j<U)Y=z-1;else if(j>U&&j<V)return[z-1,z,!0];else if(j>V&&j<C)return[z,z+1,!0];else Z=z+1}return[z,z,!1]},HW=function(J,$,H){const[Q,W,Z]=Cj(J,$,H);if(!Z)return 0;if(Q===W){const Y=J.DataElement[Q].x;return $*J.multiplier/Y}else{const Y=J.DataElement[Q].x,z=J.DataElement[Q].y,j=J.DataElement[W].x,V=J.DataElement[W].y,U=H*(j*z-Y*V),C=Y*U,q=(j-Y)*($*z-Y*H)*V,K=C+q;return $*J.multiplier*U/K}},CH=function(J,$,H){return $*J.multiplier/H},lY=function(J,$,H){return $*H/J.multiplier},Rj=function(J,$){const[H,Q]=qj($);let W=H,Z=Q,Y=0;const z=$;while(W<Z){if(Y=Math.floor((Z+W)/2),Y<=0||Y>RH-2)return[Y,Y,!1];const j=J.DataElement[Y].x,V=J.DataElement[Y-1].x,U=J.DataElement[Y+1].x;if(z===j)return[Y,Y,!0];else if(z===V)return[Y-1,Y-1,!0];else if(z===U)return[Y+1,Y+1,!0];else if(z<V)Z=Y-1;else if(z>V&&z<j)return[Y-1,Y,!0];else if(z>j&&z<U)return[Y,Y+1,!0];else W=Y+1}return[Y,Y,!1]},Bj=function(J,$){const[H,Q]=vj($);let W=H,Z=Q,Y=0;const z=$;while(W<=Z){if(Y=Math.floor((Z+W)/2),Y<=0||Y>=RH-2)return[Y,Y,!1];const j=J.DataElement[Y].y,V=J.DataElement[Y-1].y,U=J.DataElement[Y+1].y;if(z===j)return[Y,Y,!0];else if(z===V)return[Y-1,Y-1,!0];else if(z===U)return[Y+1,Y+1,!0];else if(z<U)W=Y+1;else if(z<V&&z>j)return[Y-1,Y,!0];else if(z<j&&z>U)return[Y,Y+1,!0];else Z=Y-1}return[Y,Y,!1]},uY=function(J,$,H,Q){const W=Q?$+H:$-H,[Z,Y,z]=Rj(J,W);if(!z)return[0,0,!1,z];if(Z===Y)return[J.DataElement[Y].price,J.DataElement[Y].y,!1,z];else{const j=J.DataElement[Z].x,V=J.DataElement[Y].x,U=J.DataElement[Z].price,C=J.DataElement[Y].price,q=J.DataElement[Z].y,K=J.DataElement[Y].y;if($>=j&&$<=V)if(Q)return[C,K,!0,z];else return[U,q,!0,z];else{let w,O;if(Q)w=U+(C-U)*($-j)/(V-j),O=q-(W-j)*J.multiplier/C;else w=U+(C-U)*($-j)/(V-j),O=K+(V-W)*J.multiplier/U;return[w,O,!1,z]}}},Mj=function(J,$,H,Q){const W=Q?$-H:$+H,[Z,Y,z]=Bj(J,W);if(!z)return[0,0,!1,z];if(Z===Y)return[J.DataElement[Y].price,J.DataElement[Y].x,!1,z];else{const j=J.DataElement[Z].x,V=J.DataElement[Y].x,U=J.DataElement[Z].price,C=J.DataElement[Y].price,q=J.DataElement[Z].y,K=J.DataElement[Y].y;if($>=K&&$<=q)return Q?[C,V,!0,z]:[U,j,!0,z];else{let w,O;if(Q)w=U+(C-U)*(q-$)/(q-K),O=j+C*(q-W)/J.multiplier;else w=U+(C-U)*(q-$)/(q-K),O=V-U*(W-K)/J.multiplier;return[w,O,!1,z]}}},Oj=function(J,$){const H=uY(J,$,0,!1);if(H[3])return H[0];else return 0};function cY(J,$,H,Q){const W=HW(J,$,H),Z=CH(J,$,W),Y=CH(J,H,W),z=CH(J,Q,W),[V,U,C,q]=uY(J,Z,z,!0);if(!q)return 0;if(C)return Q*J.multiplier/V;else{const K=Y-U;return lY(J,K,W)}}function sY(J,$,H,Q){const W=HW(J,$,H),Z=CH(J,$,W),Y=CH(J,H,W),z=CH(J,Q,W),[V,U,C,q]=Mj(J,Y,z,!1);if(!q)return 0;if(C)return Q*V/J.multiplier;else{const K=Z-U;return lY(J,K,W)}}function aY(J){const $=Uj.decode(J);return{accountType:$.accountType.toNumber(),status:$.status.toNumber(),multiplier:$.multiplier.toNumber(),validDataCount:$.validDataCount.toNumber(),DataElement:$.DataElement.map((H)=>({x:H.x.toNumber(),y:H.y.toNumber(),price:H.price.toNumber()}))}}function iY(J,$,H,Q){const W=Oj(J,CH(J,$,HW(J,$,H)))/J.multiplier;return Q?W:1/W}var yH=new Fj("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),RH=50000,Xj=e([P("x"),P("y"),P("price")]),Uj=e([P("accountType"),P("status"),P("multiplier"),P("validDataCount"),z0(Xj,RH,"DataElement")]);async function rY(J){if(FQ.validDataCount===0){if(J){const $=await J.getAccountInfo(yH);if($)FQ=aY($?.data)}}}var GQ,W0=U0.from("Liquidity"),FQ={accountType:0,status:0,multiplier:0,validDataCount:0,DataElement:[]},E$;(function(J){J[J.Uninitialized=0]="Uninitialized",J[J.Initialized=1]="Initialized",J[J.Disabled=2]="Disabled",J[J.RemoveLiquidityOnly=3]="RemoveLiquidityOnly",J[J.LiquidityOnly=4]="LiquidityOnly",J[J.OrderBook=5]="OrderBook",J[J.Swap=6]="Swap",J[J.WaitingForStart=7]="WaitingForStart"})(E$||(E$={}));var nY=new TJ.default(25),QW=new TJ.default(1e4);class S$ extends V${static getStateLayout(J){const $=m6[J];return W0.assertArgument(!!$,"invalid version","version",J),$}static getLayouts(J){return{state:this.getStateLayout(J)}}static getAssociatedId({programId:J,marketId:$}){const{publicKey:H}=h0([J.toBuffer(),$.toBuffer(),Buffer.from("amm_associated_seed","utf-8")],J);return H}static getAssociatedAuthority({programId:J}){return h0([Buffer.from([97,109,109,32,97,117,116,104,111,114,105,116,121])],J)}static getAssociatedBaseVault({programId:J,marketId:$}){const{publicKey:H}=h0([J.toBuffer(),$.toBuffer(),Buffer.from("coin_vault_associated_seed","utf-8")],J);return H}static getAssociatedQuoteVault({programId:J,marketId:$}){const{publicKey:H}=h0([J.toBuffer(),$.toBuffer(),Buffer.from("pc_vault_associated_seed","utf-8")],J);return H}static getAssociatedLpMint({programId:J,marketId:$}){const{publicKey:H}=h0([J.toBuffer(),$.toBuffer(),Buffer.from("lp_mint_associated_seed","utf-8")],J);return H}static getAssociatedLpVault({programId:J,marketId:$}){const{publicKey:H}=h0([J.toBuffer(),$.toBuffer(),Buffer.from("temp_lp_token_associated_seed","utf-8")],J);return H}static getAssociatedTargetOrders({programId:J,marketId:$}){const{publicKey:H}=h0([J.toBuffer(),$.toBuffer(),Buffer.from("target_associated_seed","utf-8")],J);return H}static getAssociatedWithdrawQueue({programId:J,marketId:$}){const{publicKey:H}=h0([J.toBuffer(),$.toBuffer(),Buffer.from("withdraw_associated_seed","utf-8")],J);return H}static getAssociatedOpenOrders({programId:J,marketId:$}){const{publicKey:H}=h0([J.toBuffer(),$.toBuffer(),Buffer.from("open_order_associated_seed","utf-8")],J);return H}static getAssociatedConfigId({programId:J}){const{publicKey:$}=h0([Buffer.from("amm_config_account_seed","utf-8")],J);return $}static getAssociatedPoolKeys({version:J,marketVersion:$,marketId:H,baseMint:Q,quoteMint:W,baseDecimals:Z,quoteDecimals:Y,programId:z,marketProgramId:j}){const V=this.getAssociatedId({programId:z,marketId:H}),U=this.getAssociatedLpMint({programId:z,marketId:H}),{publicKey:C,nonce:q}=this.getAssociatedAuthority({programId:z}),K=this.getAssociatedBaseVault({programId:z,marketId:H}),w=this.getAssociatedQuoteVault({programId:z,marketId:H}),O=this.getAssociatedLpVault({programId:z,marketId:H}),h=this.getAssociatedOpenOrders({programId:z,marketId:H}),b=this.getAssociatedTargetOrders({programId:z,marketId:H}),N=this.getAssociatedWithdrawQueue({programId:z,marketId:H}),{publicKey:x}=v8.getAssociatedAuthority({programId:j,marketId:H});return{id:V,baseMint:Q,quoteMint:W,lpMint:U,baseDecimals:Z,quoteDecimals:Y,lpDecimals:Z,version:J,programId:z,authority:C,nonce:q,baseVault:K,quoteVault:w,lpVault:O,openOrders:h,targetOrders:b,withdrawQueue:N,marketVersion:$,marketProgramId:j,marketId:H,marketAuthority:x,lookupTableAccount:h$.default,configId:this.getAssociatedConfigId({programId:z})}}static async getCreatePoolFee({connection:J,programId:$}){const H=this.getAssociatedConfigId({programId:$}),Q=e([P("fee")]),W=await J.getAccountInfo(H,{dataSlice:{offset:536,length:8}});if(W===null)throw Error("get config account error");return Q.decode(W.data).fee}static makeAddLiquidityInstruction(J){const{poolKeys:$,userKeys:H,baseAmountIn:Q,quoteAmountIn:W,fixedSide:Z}=J,{version:Y}=$;if(Y===4||Y===5){const z=e([o("instruction"),P("baseAmountIn"),P("quoteAmountIn"),P("fixedSide")]),j=Buffer.alloc(z.span);z.encode({instruction:3,baseAmountIn:H0(Q),quoteAmountIn:H0(W),fixedSide:H0(Z==="base"?0:1)},j);const V=[d(m,!1),y($.id,!1),d($.authority,!1),d($.openOrders,!1),y($.targetOrders,!1),y($.lpMint,!1),y($.baseVault,!1),y($.quoteVault,!1)];if(Y===5)V.push(y(yH,!1));return V.push(d($.marketId,!1),y(H.baseTokenAccount,!1),y(H.quoteTokenAccount,!1),y(H.lpTokenAccount,!1),d(H.owner,!0),d($.marketEventQueue,!1)),{address:{},innerTransaction:{instructions:[new IH({programId:$.programId,keys:V,data:j})],signers:[],lookupTableAddress:[$.lookupTableAccount].filter((U)=>U&&!U.equals(h$.default)),instructionTypes:[Y===4?$0.ammV4AddLiquidity:$0.ammV5AddLiquidity]}}}return W0.throwArgumentError("invalid version","poolKeys.version",Y)}static async makeAddLiquidityInstructionSimple(J){const{connection:$,poolKeys:H,userKeys:Q,amountInA:W,amountInB:Z,fixedSide:Y,config:z,makeTxVersion:j,lookupTableCache:V,computeBudgetConfig:U}=J,{lpMint:C}=H,{tokenAccounts:q,owner:K,payer:w=K}=Q;W0.debug("amountInA:",W),W0.debug("amountInB:",Z),W0.assertArgument(!W.isZero()&&!Z.isZero(),"amounts must greater than zero","amountInA & amountInB",{amountInA:W.toFixed(),amountInB:Z.toFixed()});const{bypassAssociatedCheck:O,checkCreateATAOwner:h}={...{bypassAssociatedCheck:!1,checkCreateATAOwner:!1},...z},b=W instanceof O0?W.token:r.WSOL,N=Z instanceof O0?Z.token:r.WSOL,x=this._selectTokenAccount({programId:m,tokenAccounts:q,mint:b.mint,owner:K,config:{associatedOnly:!1}}),k=this._selectTokenAccount({programId:m,tokenAccounts:q,mint:N.mint,owner:K,config:{associatedOnly:!1}});W0.assertArgument(!!x||!!k,"cannot found target token accounts","tokenAccounts",q);const g=this._selectTokenAccount({programId:m,tokenAccounts:q,mint:C,owner:K}),A=[b,N],I=[x,k],T=[W.raw,Z.raw],[u]=this._getAmountsSide(W,Z,H);let a="base";if(u==="quote")if(A.reverse(),I.reverse(),T.reverse(),Y==="a")a="quote";else if(Y==="b")a="base";else return W0.throwArgumentError("invalid fixedSide","fixedSide",Y);else if(u==="base")if(Y==="a")a="base";else if(Y==="b")a="quote";else return W0.throwArgumentError("invalid fixedSide","fixedSide",Y);else return W0.throwArgumentError("invalid fixedSide","fixedSide",Y);const[n,Z0]=A,[_,G]=I,[v,X]=T,D=[],M=[],L=[],S=[],R=[],F=await this._handleTokenAccount({programId:m,connection:$,side:"in",amount:v,mint:n.mint,tokenAccount:_,owner:K,payer:w,frontInstructions:D,endInstructions:M,signers:R,bypassAssociatedCheck:O,frontInstructionsType:L,endInstructionsType:S,checkCreateATAOwner:h}),E=await this._handleTokenAccount({programId:m,connection:$,side:"in",amount:X,mint:Z0.mint,tokenAccount:G,owner:K,payer:w,frontInstructions:D,endInstructions:M,signers:R,bypassAssociatedCheck:O,frontInstructionsType:L,endInstructionsType:S,checkCreateATAOwner:h}),f=await this._handleTokenAccount({programId:m,connection:$,side:"out",amount:0,mint:C,tokenAccount:g,owner:K,payer:w,frontInstructions:D,endInstructions:M,signers:R,bypassAssociatedCheck:O,frontInstructionsType:L,endInstructionsType:S,checkCreateATAOwner:h}),l=this.makeAddLiquidityInstruction({poolKeys:H,userKeys:{baseTokenAccount:F,quoteTokenAccount:E,lpTokenAccount:f,owner:K},baseAmountIn:v,quoteAmountIn:X,fixedSide:a});return{address:{lpTokenAccount:f},innerTransactions:await L0({connection:$,makeTxVersion:j,computeBudgetConfig:U,payer:w,innerTransaction:[{instructionTypes:L,instructions:D,signers:R},l.innerTransaction,{instructionTypes:S,instructions:M,signers:[]}],lookupTableCache:V})}}static makeRemoveLiquidityInstruction(J){const{poolKeys:$,userKeys:H,amountIn:Q}=J,{version:W}=$;if(W===4||W===5){const Z=e([o("instruction"),P("amountIn")]),Y=Buffer.alloc(Z.span);Z.encode({instruction:4,amountIn:H0(Q)},Y);const z=[d(m,!1),y($.id,!1),d($.authority,!1),y($.openOrders,!1),y($.targetOrders,!1),y($.lpMint,!1),y($.baseVault,!1),y($.quoteVault,!1)];if(W===5)z.push(y(yH,!1));else z.push(y($.withdrawQueue,!1)),z.push(y($.lpVault,!1));return z.push(d($.marketProgramId,!1),y($.marketId,!1),y($.marketBaseVault,!1),y($.marketQuoteVault,!1),d($.marketAuthority,!1),y(H.lpTokenAccount,!1),y(H.baseTokenAccount,!1),y(H.quoteTokenAccount,!1),d(H.owner,!0),y($.marketEventQueue,!1),y($.marketBids,!1),y($.marketAsks,!1)),{address:{},innerTransaction:{instructions:[new IH({programId:$.programId,keys:z,data:Y})],signers:[],lookupTableAddress:[$.lookupTableAccount].filter((j)=>j&&!j.equals(h$.default)),instructionTypes:[W===4?$0.ammV4RemoveLiquidity:$0.ammV5RemoveLiquidity]}}}return W0.throwArgumentError("invalid version","poolKeys.version",W)}static async makeRemoveLiquidityInstructionSimple(J){const{connection:$,poolKeys:H,userKeys:Q,amountIn:W,config:Z,makeTxVersion:Y,lookupTableCache:z,computeBudgetConfig:j}=J,{baseMint:V,quoteMint:U,lpMint:C}=H,{tokenAccounts:q,owner:K,payer:w=K}=Q;W0.debug("amountIn:",W),W0.assertArgument(!W.isZero(),"amount must greater than zero","amountIn",W.toFixed()),W0.assertArgument(W instanceof O0&&W.token.mint.equals(C),"amountIn's token not match lpMint","amountIn",W);const O=this._selectTokenAccount({programId:m,tokenAccounts:q,mint:C,owner:K,config:{associatedOnly:!1}});if(!O)return W0.throwArgumentError("cannot found lpTokenAccount","tokenAccounts",q);const h=this._selectTokenAccount({programId:m,tokenAccounts:q,mint:V,owner:K}),b=this._selectTokenAccount({programId:m,tokenAccounts:q,mint:U,owner:K}),{bypassAssociatedCheck:N,checkCreateATAOwner:x}={...{bypassAssociatedCheck:!1,checkCreateATAOwner:!1},...Z},k=[],g=[],A=[],I=[],T=[],u=O,a=await this._handleTokenAccount({programId:m,connection:$,side:"out",amount:0,mint:V,tokenAccount:h,owner:K,payer:w,frontInstructions:k,endInstructions:g,signers:T,bypassAssociatedCheck:N,frontInstructionsType:A,checkCreateATAOwner:x}),n=await this._handleTokenAccount({programId:m,connection:$,side:"out",amount:0,mint:U,tokenAccount:b,owner:K,payer:w,frontInstructions:k,endInstructions:g,signers:T,bypassAssociatedCheck:N,frontInstructionsType:A,checkCreateATAOwner:x}),Z0=this.makeRemoveLiquidityInstruction({poolKeys:H,userKeys:{lpTokenAccount:u,baseTokenAccount:a,quoteTokenAccount:n,owner:K},amountIn:W.raw});return{address:{lpTokenAccount:u},innerTransactions:await L0({connection:$,makeTxVersion:Y,computeBudgetConfig:j,payer:w,innerTransaction:[{instructionTypes:A,instructions:k,signers:T},Z0.innerTransaction,{instructionTypes:I,instructions:g,signers:[]}],lookupTableCache:z})}}static makeSwapInstruction(J){const{poolKeys:$,userKeys:H,amountIn:Q,amountOut:W,fixedSide:Z}=J,{version:Y}=$;if(Y===4||Y===5){if(Z==="in")return this.makeSwapFixedInInstruction({poolKeys:$,userKeys:H,amountIn:Q,minAmountOut:W},Y);else if(Z==="out")return this.makeSwapFixedOutInstruction({poolKeys:$,userKeys:H,maxAmountIn:Q,amountOut:W},Y);return W0.throwArgumentError("invalid params","params",J)}return W0.throwArgumentError("invalid version","poolKeys.version",Y)}static makeSwapFixedInInstruction({poolKeys:J,userKeys:$,amountIn:H,minAmountOut:Q},W){const Z=e([o("instruction"),P("amountIn"),P("minAmountOut")]),Y=Buffer.alloc(Z.span);Z.encode({instruction:9,amountIn:H0(H),minAmountOut:H0(Q)},Y);const z=[d(m,!1),y(J.id,!1),d(J.authority,!1),y(J.openOrders,!1)];if(W===4)z.push(y(J.targetOrders,!1));if(z.push(y(J.baseVault,!1),y(J.quoteVault,!1)),W===5)z.push(y(yH,!1));return z.push(d(J.marketProgramId,!1),y(J.marketId,!1),y(J.marketBids,!1),y(J.marketAsks,!1),y(J.marketEventQueue,!1),y(J.marketBaseVault,!1),y(J.marketQuoteVault,!1),d(J.marketAuthority,!1),y($.tokenAccountIn,!1),y($.tokenAccountOut,!1),d($.owner,!0)),{address:{},innerTransaction:{instructions:[new IH({programId:J.programId,keys:z,data:Y})],signers:[],lookupTableAddress:[J.lookupTableAccount].filter((j)=>j&&!j.equals(h$.default)),instructionTypes:[W===4?$0.ammV4SwapBaseIn:$0.ammV5SwapBaseIn]}}}static makeSwapFixedOutInstruction({poolKeys:J,userKeys:$,maxAmountIn:H,amountOut:Q},W){const Z=e([o("instruction"),P("maxAmountIn"),P("amountOut")]),Y=Buffer.alloc(Z.span);Z.encode({instruction:11,maxAmountIn:H0(H),amountOut:H0(Q)},Y);const z=[d(m,!1),y(J.id,!1),d(J.authority,!1),y(J.openOrders,!1),y(J.targetOrders,!1),y(J.baseVault,!1),y(J.quoteVault,!1)];if(W===5)z.push(y(yH,!1));return z.push(d(J.marketProgramId,!1),y(J.marketId,!1),y(J.marketBids,!1),y(J.marketAsks,!1),y(J.marketEventQueue,!1),y(J.marketBaseVault,!1),y(J.marketQuoteVault,!1),d(J.marketAuthority,!1),y($.tokenAccountIn,!1),y($.tokenAccountOut,!1),d($.owner,!0)),{address:{},innerTransaction:{instructions:[new IH({programId:J.programId,keys:z,data:Y})],signers:[],lookupTableAddress:[J.lookupTableAccount].filter((j)=>j&&!j.equals(h$.default)),instructionTypes:[W===4?$0.ammV4SwapBaseOut:$0.ammV5SwapBaseOut]}}}static async makeSwapInstructionSimple(J){const{connection:$,poolKeys:H,userKeys:Q,amountIn:W,amountOut:Z,fixedSide:Y,config:z,makeTxVersion:j,lookupTableCache:V,computeBudgetConfig:U}=J,{tokenAccounts:C,owner:q,payer:K=q}=Q;W0.debug("amountIn:",W),W0.debug("amountOut:",Z),W0.assertArgument(!W.isZero()&&!Z.isZero(),"amounts must greater than zero","currencyAmounts",{amountIn:W.toFixed(),amountOut:Z.toFixed()});const{bypassAssociatedCheck:w,checkCreateATAOwner:O}={...{bypassAssociatedCheck:!1,checkCreateATAOwner:!1},...z},h=W instanceof O0?W.token:r.WSOL,b=Z instanceof O0?Z.token:r.WSOL,N=this._selectTokenAccount({programId:m,tokenAccounts:C,mint:h.mint,owner:q,config:{associatedOnly:!1}}),x=this._selectTokenAccount({programId:m,tokenAccounts:C,mint:b.mint,owner:q}),[k,g]=[W.raw,Z.raw],A=[],I=[],T=[],u=[],a=[],n=await this._handleTokenAccount({programId:m,connection:$,side:"in",amount:k,mint:h.mint,tokenAccount:N,owner:q,payer:K,frontInstructions:A,endInstructions:I,signers:a,bypassAssociatedCheck:w,frontInstructionsType:T,checkCreateATAOwner:O}),Z0=await this._handleTokenAccount({programId:m,connection:$,side:"out",amount:0,mint:b.mint,tokenAccount:x,owner:q,payer:K,frontInstructions:A,endInstructions:I,signers:a,bypassAssociatedCheck:w,frontInstructionsType:T,checkCreateATAOwner:O}),_=this.makeSwapInstruction({poolKeys:H,userKeys:{tokenAccountIn:n,tokenAccountOut:Z0,owner:q},amountIn:k,amountOut:g,fixedSide:Y});return{address:{},innerTransactions:await L0({connection:$,makeTxVersion:j,computeBudgetConfig:U,payer:K,innerTransaction:[{instructionTypes:T,instructions:A,signers:a},_.innerTransaction,{instructionTypes:u,instructions:I,signers:[]}],lookupTableCache:V})}}static makeSimulatePoolInfoInstruction({poolKeys:J}){const $=e([o("instruction"),o("simulateType")]),H=Buffer.alloc($.span);$.encode({instruction:12,simulateType:0},H);const Q=[d(J.id,!1),d(J.authority,!1),d(J.openOrders,!1),d(J.baseVault,!1),d(J.quoteVault,!1),d(J.lpMint,!1),d(J.marketId,!1),d(J.marketEventQueue,!1)];return{address:{},innerTransaction:{instructions:[new IH({programId:J.programId,keys:Q,data:H})],signers:[],lookupTableAddress:[J.lookupTableAccount].filter((W)=>W&&!W.equals(h$.default)),instructionTypes:[J.version===4?$0.ammV4SimulatePoolInfo:$0.ammV5SimulatePoolInfo]}}}static isV4(J){return J.withdrawQueue!==void 0}static async makeCreatePoolV4InstructionV2Simple({connection:J,programId:$,marketInfo:H,baseMintInfo:Q,quoteMintInfo:W,baseAmount:Z,quoteAmount:Y,startTime:z,ownerInfo:j,associatedOnly:V=!1,computeBudgetConfig:U,checkCreateATAOwner:C=!1,makeTxVersion:q,lookupTableCache:K,feeDestinationId:w}){const O=[],h=[],b=[],N=[],x=[],k=j.useSOLBalance&&Q.mint.equals(r.WSOL.mint),g=j.useSOLBalance&&W.mint.equals(r.WSOL.mint),A=await this._selectOrCreateTokenAccount({programId:m,mint:Q.mint,tokenAccounts:k?[]:j.tokenAccounts,owner:j.wallet,createInfo:k?{connection:J,payer:j.feePayer,amount:Z,frontInstructions:O,frontInstructionsType:b,endInstructions:k?h:[],endInstructionsType:k?N:[],signers:x}:void 0,associatedOnly:k?!1:V,checkCreateATAOwner:C}),I=await this._selectOrCreateTokenAccount({programId:m,mint:W.mint,tokenAccounts:g?[]:j.tokenAccounts,owner:j.wallet,createInfo:g?{connection:J,payer:j.feePayer,amount:Y,frontInstructions:O,frontInstructionsType:b,endInstructions:g?h:[],endInstructionsType:g?N:[],signers:x}:void 0,associatedOnly:g?!1:V,checkCreateATAOwner:C});if(A===void 0||I===void 0)throw Error("you don't has some token account");const T=GQ.getAssociatedPoolKeys({version:4,marketVersion:3,marketId:H.marketId,baseMint:Q.mint,quoteMint:W.mint,baseDecimals:Q.decimals,quoteDecimals:W.decimals,programId:$,marketProgramId:H.programId}),u=this.makeCreatePoolV4InstructionV2({programId:$,ammId:T.id,ammAuthority:T.authority,ammOpenOrders:T.openOrders,lpMint:T.lpMint,coinMint:T.baseMint,pcMint:T.quoteMint,coinVault:T.baseVault,pcVault:T.quoteVault,ammTargetOrders:T.targetOrders,marketProgramId:T.marketProgramId,marketId:T.marketId,userWallet:j.wallet,userCoinVault:A,userPcVault:I,userLpVault:n0(j.wallet,T.lpMint,m).publicKey,ammConfigId:T.configId,feeDestinationId:w,nonce:T.nonce,openTime:z,coinAmount:Z,pcAmount:Y}).innerTransaction;return{address:{programId:$,ammId:T.id,ammAuthority:T.authority,ammOpenOrders:T.openOrders,lpMint:T.lpMint,coinMint:T.baseMint,pcMint:T.quoteMint,coinVault:T.baseVault,pcVault:T.quoteVault,withdrawQueue:T.withdrawQueue,ammTargetOrders:T.targetOrders,poolTempLp:T.lpVault,marketProgramId:T.marketProgramId,marketId:T.marketId},innerTransactions:await L0({connection:J,makeTxVersion:q,computeBudgetConfig:U,payer:j.feePayer,innerTransaction:[{instructionTypes:b,instructions:O,signers:x},u,{instructionTypes:N,instructions:h,signers:[]}],lookupTableCache:K})}}static makeCreatePoolV4InstructionV2({programId:J,ammId:$,ammAuthority:H,ammOpenOrders:Q,lpMint:W,coinMint:Z,pcMint:Y,coinVault:z,pcVault:j,ammTargetOrders:V,marketProgramId:U,marketId:C,userWallet:q,userCoinVault:K,userPcVault:w,userLpVault:O,nonce:h,openTime:b,coinAmount:N,pcAmount:x,lookupTableAddress:k,ammConfigId:g,feeDestinationId:A}){const I=e([o("instruction"),o("nonce"),P("openTime"),P("pcAmount"),P("coinAmount")]),T=[{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:tJ,isSigner:!1,isWritable:!1},{pubkey:t0,isSigner:!1,isWritable:!1},{pubkey:v$,isSigner:!1,isWritable:!1},{pubkey:$,isSigner:!1,isWritable:!0},{pubkey:H,isSigner:!1,isWritable:!1},{pubkey:Q,isSigner:!1,isWritable:!0},{pubkey:W,isSigner:!1,isWritable:!0},{pubkey:Z,isSigner:!1,isWritable:!1},{pubkey:Y,isSigner:!1,isWritable:!1},{pubkey:z,isSigner:!1,isWritable:!0},{pubkey:j,isSigner:!1,isWritable:!0},{pubkey:V,isSigner:!1,isWritable:!0},{pubkey:g,isSigner:!1,isWritable:!1},{pubkey:A,isSigner:!1,isWritable:!0},{pubkey:U,isSigner:!1,isWritable:!1},{pubkey:C,isSigner:!1,isWritable:!1},{pubkey:q,isSigner:!0,isWritable:!0},{pubkey:K,isSigner:!1,isWritable:!0},{pubkey:w,isSigner:!1,isWritable:!0},{pubkey:O,isSigner:!1,isWritable:!0}],u=Buffer.alloc(I.span);I.encode({instruction:1,nonce:h,openTime:b,coinAmount:N,pcAmount:x},u);const a=new IH({keys:T,programId:J,data:u});return{address:{},innerTransaction:{instructions:[a],signers:[],lookupTableAddress:k?[k]:void 0,instructionTypes:[$0.ammV4CreatePoolV2]}}}static async makeRemoveAllLpAndCreateClmmPosition({connection:J,poolKeys:$,removeLpAmount:H,userKeys:Q,clmmPoolKeys:W,createPositionInfo:Z,farmInfo:Y,computeBudgetConfig:z,checkCreateATAOwner:j=!1,getEphemeralSigners:V,makeTxVersion:U,lookupTableCache:C}){if(!($.baseMint.equals(W.mintA.mint)||$.baseMint.equals(W.mintB.mint)))throw Error("mint check error");if(!($.quoteMint.equals(W.mintA.mint)||$.quoteMint.equals(W.mintB.mint)))throw Error("mint check error");const q=[],K=[],w=[],O=[],h=[],b={};for(let _ of Q.tokenAccounts)if(b[_.accountInfo.mint.toString()]===void 0||n0(Q.owner,_.accountInfo.mint,m).publicKey.equals(_.pubkey))b[_.accountInfo.mint.toString()]=_.pubkey;const N=b[$.lpMint.toString()];if(N===void 0)throw Error("find lp account error in trade accounts");const x=H.add(Y?.amount??new TJ.default(0)),k=$.baseMint.equals(r.WSOL.mint),g=$.quoteMint.equals(r.WSOL.mint),A=await this._selectOrCreateTokenAccount({programId:m,mint:$.baseMint,tokenAccounts:Q.tokenAccounts,owner:Q.owner,createInfo:{connection:J,payer:Q.payer??Q.owner,frontInstructions:q,frontInstructionsType:w,endInstructions:k?K:[],endInstructionsType:k?O:[],signers:h},associatedOnly:!0,checkCreateATAOwner:j}),I=await this._selectOrCreateTokenAccount({programId:m,mint:$.quoteMint,tokenAccounts:Q.tokenAccounts,owner:Q.owner,createInfo:{connection:J,payer:Q.payer??Q.owner,amount:0,frontInstructions:q,frontInstructionsType:w,endInstructions:g?K:[],endInstructionsType:g?O:[],signers:h},associatedOnly:!0,checkCreateATAOwner:j});b[$.baseMint.toString()]=A,b[$.quoteMint.toString()]=I;const T=this.makeRemoveLiquidityInstruction({poolKeys:$,userKeys:{lpTokenAccount:N,baseTokenAccount:A,quoteTokenAccount:I,owner:Q.owner},amountIn:x}),[u,a]=$.baseMint.equals(W.mintA.mint)?[A,I]:[I,A],n=await D8.makeOpenPositionFromLiquidityInstructions({poolInfo:W,ownerInfo:{feePayer:Q.payer??Q.owner,wallet:Q.owner,tokenAccountA:u,tokenAccountB:a},withMetadata:"create",...Z,getEphemeralSigners:V});let Z0={instructions:[],signers:[],instructionTypes:[]};if(Y!==void 0){const _=[];for(let G of Y.poolKeys.rewardInfos){const v=G.rewardMint.equals(r.WSOL.mint);_.push(b[G.rewardMint.toString()]??await this._selectOrCreateTokenAccount({programId:m,mint:G.rewardMint,tokenAccounts:Q.tokenAccounts,owner:Q.owner,createInfo:{connection:J,payer:Q.payer??Q.owner,frontInstructions:q,frontInstructionsType:w,endInstructions:v?K:[],endInstructionsType:v?O:[],signers:h},associatedOnly:!0,checkCreateATAOwner:j}))}Z0=aJ.makeWithdrawInstruction({poolKeys:Y.poolKeys,amount:Y.amount,userKeys:{ledger:aJ.getAssociatedLedgerAccount({programId:Y.poolKeys.programId,poolId:Y.poolKeys.id,owner:Q.owner,version:Y.poolKeys.version}),lpTokenAccount:N,rewardTokenAccounts:_,owner:Q.owner}}).innerTransaction}return{address:{...T.address,...n.address},innerTransactions:await L0({connection:J,makeTxVersion:U,computeBudgetConfig:z,payer:Q.payer??Q.owner,innerTransaction:[{instructionTypes:w,instructions:q,signers:h},Z0,T.innerTransaction,n.innerTransaction,{instructionTypes:O,instructions:K,signers:[]}],lookupTableCache:C})}}static async fetchAllPoolKeys(J,$,H){const Q=(await Promise.all(Object.entries(m6).map(([j,V])=>{try{return J.getProgramAccounts($[Number(j)],{filters:[{dataSize:V.span}]}).then((U)=>{return U.map((C)=>{return{id:C.pubkey,version:Number(j),programId:$[Number(j)],...V.decode(C.account.data)}})})}catch(U){if(U instanceof Error)return W0.throwError("failed to fetch pool info",U0.errors.RPC_ERROR,{message:U.message})}}))).flat(),W=Q.map((j)=>j.marketId),Z={};try{const j=await J$(J,W,H);for(let V of j){if(V===null)continue;const U={programId:V.owner,...$W.decode(V.data)};Z[U.ownAddress.toString()]=U}}catch(j){if(j instanceof Error)return W0.throwError("failed to fetch markets",U0.errors.RPC_ERROR,{message:j.message})}const Y={};for(let[j,V]of Object.entries($))Y[j]=this.getAssociatedAuthority({programId:V}).publicKey;const z=[];for(let j of Q){if(j===void 0)continue;if(j.baseMint.equals(h$.default))continue;const V=Z[j.marketId.toString()],U=V.programId;z.push({id:j.id,baseMint:j.baseMint,quoteMint:j.quoteMint,lpMint:j.lpMint,baseDecimals:j.baseDecimal.toNumber(),quoteDecimals:j.quoteDecimal.toNumber(),lpDecimals:j.id.toString()==="6kmMMacvoCKBkBrqssLEdFuEZu2wqtLdNQxh9VjtzfwT"?5:j.baseDecimal.toNumber(),version:j.version,programId:j.programId,authority:Y[j.version],openOrders:j.openOrders,targetOrders:j.targetOrders,baseVault:j.baseVault,quoteVault:j.quoteVault,marketVersion:3,marketProgramId:U,marketId:V.ownAddress,marketAuthority:v8.getAssociatedAuthority({programId:U,marketId:V.ownAddress}).publicKey,marketBaseVault:V.baseVault,marketQuoteVault:V.quoteVault,marketBids:V.bids,marketAsks:V.asks,marketEventQueue:V.eventQueue,...j.version===5?{modelDataAccount:j.modelDataAccount,withdrawQueue:h$.default,lpVault:h$.default}:{withdrawQueue:j.withdrawQueue,lpVault:j.lpVault},lookupTableAccount:h$.default})}return z}static async fetchInfo({connection:J,poolKeys:$}){const H=await this.fetchMultipleInfo({connection:J,pools:[$]});return W0.assertArgument(H.length===1,`fetchInfo failed, ${H.length} pools found`,"poolKeys.id",$.id),H[0]}static async fetchMultipleInfo({connection:J,pools:$,config:H}){await rY(J);const Q=$.map((Y)=>this.makeSimulatePoolInfoInstruction({poolKeys:Y}));return(await M6(J,Q.map((Y)=>Y.innerTransaction.instructions).flat(),"GetPoolData")).map((Y)=>{const z=O6(Y,"GetPoolData"),j=new TJ.default(C$(z,"status")),V=Number(C$(z,"coin_decimals")),U=Number(C$(z,"pc_decimals")),C=Number(C$(z,"lp_decimals")),q=new TJ.default(C$(z,"pool_coin_amount")),K=new TJ.default(C$(z,"pool_pc_amount")),w=new TJ.default(C$(z,"pool_lp_supply"));let O="0";try{O=C$(z,"pool_open_time")}catch(h){}return{status:j,baseDecimals:V,quoteDecimals:U,lpDecimals:C,baseReserve:q,quoteReserve:K,lpSupply:w,startTime:new TJ.default(O)}})}static getEnabledFeatures(J){const{status:$}=J,H=$.toNumber();if(H===E$.Uninitialized)return{swap:!1,addLiquidity:!1,removeLiquidity:!1};else if(H===E$.Initialized)return{swap:!0,addLiquidity:!0,removeLiquidity:!0};else if(H===E$.Disabled)return{swap:!1,addLiquidity:!1,removeLiquidity:!1};else if(H===E$.RemoveLiquidityOnly)return{swap:!1,addLiquidity:!1,removeLiquidity:!0};else if(H===E$.LiquidityOnly)return{swap:!1,addLiquidity:!0,removeLiquidity:!0};else if(H===E$.OrderBook)return{swap:!1,addLiquidity:!0,removeLiquidity:!0};else if(H===E$.Swap)return{swap:!0,addLiquidity:!0,removeLiquidity:!0};else if(H===E$.WaitingForStart){const{startTime:Q}=J;if(Date.now()/1000<Q.toNumber())return{swap:!1,addLiquidity:!0,removeLiquidity:!0};return{swap:!0,addLiquidity:!0,removeLiquidity:!0}}else return{swap:!1,addLiquidity:!1,removeLiquidity:!1}}static includesToken(J,$){const{baseMint:H,quoteMint:Q}=$;return J.mint.equals(H)||J.mint.equals(Q)}static _getTokenSide(J,$){const{baseMint:H,quoteMint:Q}=$;if(J.mint.equals(H))return"base";else if(J.mint.equals(Q))return"quote";else return W0.throwArgumentError("token not match with pool","params",{token:J.mint,baseMint:H,quoteMint:Q})}static _getTokensSide(J,$,H){const{baseMint:Q,quoteMint:W}=H,Z=this._getTokenSide(J,H),Y=this._getTokenSide($,H);return W0.assertArgument(Z!==Y,"tokens not match with pool","params",{tokenA:J.mint,tokenB:$.mint,baseMint:Q,quoteMint:W}),[Z,Y]}static _getAmountSide(J,$){const H=J instanceof O0?J.token:r.WSOL;return this._getTokenSide(H,$)}static _getAmountsSide(J,$,H){const Q=J instanceof O0?J.token:r.WSOL,W=$ instanceof O0?$.token:r.WSOL;return this._getTokensSide(Q,W,H)}static computeAnotherAmount({poolKeys:J,poolInfo:$,amount:H,anotherCurrency:Q,slippage:W}){const{baseReserve:Z,quoteReserve:Y}=$;W0.debug("baseReserve:",Z.toString()),W0.debug("quoteReserve:",Y.toString());const z=H instanceof O0?H.token:H.currency;W0.debug("currencyIn:",z),W0.debug("amount:",H.toFixed()),W0.debug("anotherCurrency:",Q),W0.debug("slippage:",`${W.toSignificant()}%`);const j=this._getAmountSide(H,J);W0.debug("input side:",j);let V=J0;if(!H.isZero())V=j==="base"?aQ(H.raw.mul(Y),Z):aQ(H.raw.mul(Z),Y);const U=aQ(H.raw.mul($.lpSupply),j==="base"?$.baseReserve:$.quoteReserve),q=new uJ(k0).add(W).mul(V).quotient,K=Q instanceof r?new O0(Q,V):new r0(Q,V),w=Q instanceof r?new O0(Q,q):new r0(Q,q);return W0.debug("anotheAmount:",K.toFixed()),W0.debug("maxAnotheAmount:",w.toFixed()),{anotherAmount:K,maxAnotherAmount:w,liquidity:U}}static _computePriceImpact(J,$,H){const Q=J.raw.mul($),W=Q.sub(H).div(Q);return new uJ(W.numerator,W.denominator)}static getRate(J){const{baseReserve:$,quoteReserve:H,baseDecimals:Q,quoteDecimals:W}=J;return new PJ(new Y$(Q),$,new Y$(W),H)}static computeAmountIn({poolKeys:J,poolInfo:$,amountOut:H,currencyIn:Q,slippage:W}){const{baseReserve:Z,quoteReserve:Y}=$;W0.debug("baseReserve:",Z.toString()),W0.debug("quoteReserve:",Y.toString());const z=H instanceof O0?H.token:H.currency;W0.debug("currencyOut:",z),W0.debug("amountOut:",H.toFixed()),W0.debug("currencyIn:",Q),W0.debug("slippage:",`${W.toSignificant()}%`);const j=[Z,Y],V=this._getAmountSide(H,J);if(V==="base")j.reverse();W0.debug("output side:",V);const[U,C]=j,q=new PJ(Q,U,z,C);W0.debug("currentPrice:",`1 ${Q.symbol} \u2248 ${q.toFixed()} ${z.symbol}`),W0.debug("currentPrice invert:",`1 ${z.symbol} \u2248 ${q.invert().toFixed()} ${Q.symbol}`);let K=J0,w=H.raw;if(!w.isZero()){if(w.gt(C))w=C.sub(k0);const g=C.sub(w);K=U.mul(w).div(g).mul(QW).div(QW.sub(nY))}const h=new uJ(k0).add(W).mul(K).quotient,b=Q instanceof r?new O0(Q,K):new r0(Q,K),N=Q instanceof r?new O0(Q,h):new r0(Q,h);W0.debug("amountIn:",b.toFixed()),W0.debug("maxAmountIn:",N.toFixed());let x=null;if(!K.isZero()&&!w.isZero())x=new PJ(Q,K,z,w),W0.debug("executionPrice:",`1 ${Q.symbol} \u2248 ${x.toFixed()} ${z.symbol}`),W0.debug("executionPrice invert:",`1 ${z.symbol} \u2248 ${x.invert().toFixed()} ${Q.symbol}`);const k=this._computePriceImpact(q,K,w);return W0.debug("priceImpact:",`${k.toSignificant()}%`),{amountIn:b,maxAmountIn:N,currentPrice:q,executionPrice:x,priceImpact:k}}}GQ=S$;S$.computeAmountOut=({poolKeys:J,poolInfo:$,amountIn:H,currencyOut:Q,slippage:W})=>{const Z=H instanceof O0?H.token:r.WSOL,Y=Q instanceof r?Q:r.WSOL;W0.assertArgument(GQ.includesToken(Z,J)&&GQ.includesToken(Y,J),"token not match with pool","poolKeys",{poolKeys:J,tokenIn:Z,tokenOut:Y});const{baseReserve:z,quoteReserve:j}=$;W0.debug("baseReserve:",z.toString()),W0.debug("quoteReserve:",j.toString());const V=H instanceof O0?H.token:H.currency;W0.debug("currencyIn:",V),W0.debug("amountIn:",H.toFixed()),W0.debug("currencyOut:",Q),W0.debug("slippage:",`${W.toSignificant()}%`);const U=[z,j],C=GQ._getAmountSide(H,J);if(C==="quote")U.reverse();W0.debug("input side:",C);const[q,K]=U;let w;if(J.version===4)w=new PJ(V,q,Q,K);else{const n=iY(FQ,z.toNumber(),j.toNumber(),!1);if(C==="quote")w=new PJ(V,new TJ.default(n*1e6),Q,new TJ.default(1e6));else w=new PJ(V,new TJ.default(1e6),Q,new TJ.default(n*1e6))}W0.debug("currentPrice:",`1 ${V.symbol} \u2248 ${w.toFixed()} ${Q.symbol}`),W0.debug("currentPrice invert:",`1 ${Q.symbol} \u2248 ${w.invert().toFixed()} ${V.symbol}`);const O=H.raw;let h=J0,b=J0;if(!O.isZero())if(J.version===4){b=oH(O.mul(nY),QW);const n=O.sub(b),Z0=q.add(n);h=K.mul(n).div(Z0)}else{b=O.mul(new TJ.default(2)).div(new TJ.default(1e4));const n=O.sub(b);if(C==="quote")h=new TJ.default(cY(FQ,j.toNumber(),z.toNumber(),n.toNumber()));else h=new TJ.default(sY(FQ,j.toNumber(),z.toNumber(),n.toNumber()))}const x=new uJ(k0).add(W).invert().mul(h).quotient,k=Q instanceof r?new O0(Q,h):new r0(Q,h),g=Q instanceof r?new O0(Q,x):new r0(Q,x);W0.debug("amountOut:",k.toFixed()),W0.debug("minAmountOut:",g.toFixed());let A=new PJ(V,O.sub(b),Q,h);if(!O.isZero()&&!h.isZero())A=new PJ(V,O.sub(b),Q,h),W0.debug("executionPrice:",`1 ${V.symbol} \u2248 ${A.toFixed()} ${Q.symbol}`),W0.debug("executionPrice invert:",`1 ${Q.symbol} \u2248 ${A.invert().toFixed()} ${V.symbol}`);const I=A.denominator.mul(w.numerator),T=A.numerator.mul(w.denominator).sub(I).abs(),u=new uJ(T,I);W0.debug("priceImpact:",`${u.toSignificant()}%`);const a=V instanceof r?new O0(V,b):new r0(V,b);return{amountOut:k,minAmountOut:g,currentPrice:w,executionPrice:A,priceImpact:u,fee:a}};import{PublicKey as wJ} from"@solana/web3.js";var G5={SERUM_MARKET:new wJ("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),OPENBOOK_MARKET:new wJ("srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX"),UTIL1216:new wJ("CLaimxFqjHzgTJtAGHU47NPhg6qrc5sCnpC4tBLyABQS"),FarmV3:new wJ("EhhTKczWMGQt46ynNeRX1WfeagwwJd7ufHvCDjRxjo5Q"),FarmV5:new wJ("9KEPoZmtHUrBbhWN1v1KWLMkkvwY6WLtAVUCPRtRjP4z"),FarmV6:new wJ("FarmqiPv5eAj3j1GMdMCMUGXqPUvmquZtMy86QH6rzhG"),AmmV4:new wJ("675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8"),AmmStable:new wJ("5quBtoiQqxF9Jv6KYKctB59NT3gtJD2Y65kdnB1Uev3h"),CLMM:new wJ("CAMMCzo5YL8w4VFF8KVHrK22GGUsp5VTaW7grrKgrWqK"),Router:new wJ("routeUGWgWzqBWFcrCfv8tritsqukccJPu3q5GPP3xS")},F5={SERUM_MARKET:wJ.default,OPENBOOK_MARKET:new wJ("EoTcMgcDRTJVZDMZWBoU6rhYHZfkNTVEAfz3uUJRcYGj"),UTIL1216:wJ.default,FarmV3:new wJ("85BFyr98MbCUU9MVTEgzx1nbhWACbJqLzho6zd6DZcWL"),FarmV5:new wJ("EcLzTrNg9V7qhcdyXDe2qjtPkiGzDM2UbdRaeaadU5r2"),FarmV6:new wJ("Farm2hJLcqPtPg8M4rR6DMrsRNc5TPm5Cs4bVQrMe2T7"),AmmV4:new wJ("HWy1jotHpo6UqeQxx49dpYYdQB8wj9Qk9MdxwjLvDHB8"),AmmStable:new wJ("DDg4VmQaJV9ogWce7LpcjBA9bv22wRp5uaTPa5pGjijF"),CLMM:new wJ("devi51mZmdwUJGU9hjN27vEz64Gps7uUefqxg27EAtH"),Router:new wJ("BVChZ3XFEwTMUk1o9i3HAf91H6mFxSwa5X2wFAWhYPhU")};var Lj=E0(EJ(),1);import{PublicKey as S5} from"@solana/web3.js";import{PublicKey as R5,TransactionInstruction as B5} from"@solana/web3.js";var Kj=E0(EJ(),1);import{PublicKey as I5,SystemProgram as m5,TransactionInstruction as d5} from"@solana/web3.js";var hj=function(J="accountFlags"){const $=new S6(J);return $.addBoolean("initialized"),$.addBoolean("market"),$.addBoolean("openOrders"),$.addBoolean("requestQueue"),$.addBoolean("eventQueue"),$.addBoolean("bids"),$.addBoolean("asks"),$},s5=e([p0(5),hj("accountFlags"),c("ownAddress"),P("vaultSignerNonce"),c("baseMint"),c("quoteMint"),c("baseVault"),P("baseDepositsTotal"),P("baseFeesAccrued"),c("quoteVault"),P("quoteDepositsTotal"),P("quoteFeesAccrued"),P("quoteDustThreshold"),c("requestQueue"),c("eventQueue"),c("bids"),c("asks"),P("baseLotSize"),P("quoteLotSize"),P("feeRateBps"),P("referrerRebatesAccrued"),p0(7)]);var WW=E0(EJ(),1);import{PublicKey as Ej,TransactionInstruction as Sj} from"@solana/web3.js";var ZW;class r$ extends V${static getPdaPoolId(J,$){return h0([this.SEED_CONFIG.pool.id,$.toBuffer()],J)}static getPdaOwnerId(J,$,H,Q){return h0([this.SEED_CONFIG.owner.id,$.toBuffer(),H.toBuffer(),Buffer.from(new WW.default(Q).toArray())],J)}static async getAllInfo({connection:J,programId:$,poolIds:H,wallet:Q,chainTime:W}){if(H.length===0)return[];const Z=H.map((V)=>this.getPdaPoolId($,V).publicKey),Y=[];for(let V=0;V<this.VERSION_PROJECT.length;V++)Y.push(...Z.map((U)=>this.getPdaOwnerId($,U,Q,V).publicKey));const z=await J$(J,[...Z,...Y]),j=[];for(let V=0;V<z.length;V++){const U=Math.floor(V/H.length),C=V%H.length,q=Z[C],K=Y[V],w=z[C],O=z[H.length+V];if(!(w&&O))continue;if(w.data.length!==this.POOL_LAYOUT.span||O.data.length!==this.OWNER_LAYOUT.span)continue;const h=this.POOL_LAYOUT.decode(w.data),b=this.OWNER_LAYOUT.decode(O.data),N=h.openTime.toNumber(),x=h.endTime.toNumber(),k=b.tokenInfo.map((I)=>I.debtAmount.gt(new WW.default(0))).filter((I)=>!I).length!==3,g=W>N&&W<x&&h.status===1,A=k&&g;j.push({programId:$,poolId:q,ammId:h.ammId,ownerAccountId:K,snapshotLpAmount:b.lpAmount,project:this.VERSION_PROJECT[U],openTime:N,endTime:x,canClaim:A,canClaimErrorType:!k?"alreadyClaimIt":!g?"outOfOperationalTime":void 0,tokenInfo:h.tokenInfo.map((I,T)=>({programId:m,mintAddress:I.mintAddress,mintVault:I.mintVault,mintDecimals:I.mintDecimals,perLpLoss:I.perLpLoss,debtAmount:b.tokenInfo[T].debtAmount.add(b.tokenInfo[T].claimedAmount)}))})}return j}static async makeClaimInstructionSimple({connection:J,poolInfo:$,ownerInfo:H,makeTxVersion:Q,lookupTableCache:W}){const Z=[],Y=[],z=[],j=[],V=[],U=[],C=[],q=[];for(let K of $.tokenInfo)q.push(await this._selectOrCreateTokenAccount({programId:K.programId,mint:K.mintAddress,tokenAccounts:K.mintAddress.equals(r.WSOL.mint)?[]:H.tokenAccounts,owner:H.wallet,createInfo:{connection:J,payer:H.wallet,amount:0,frontInstructions:Z,endInstructions:K.mintAddress.equals(r.WSOL.mint)?z:[],frontInstructionsType:Y,endInstructionsType:j,signers:C},associatedOnly:K.mintAddress.equals(r.WSOL.mint)?!1:H.associatedOnly,checkCreateATAOwner:H.checkCreateATAOwner}));return V.push(this.makeClaimInstruction({programId:$.programId,poolInfo:$,ownerInfo:{wallet:H.wallet,ownerPda:$.ownerAccountId,claimAddress:q}})),U.push($0.util1216OwnerClaim),{address:{},innerTransactions:await L0({connection:J,makeTxVersion:Q,computeBudgetConfig:void 0,payer:H.wallet,innerTransaction:[{instructionTypes:Y,instructions:Z,signers:C},{instructionTypes:U,instructions:V,signers:[]},{instructionTypes:j,instructions:z,signers:[]}],lookupTableCache:W})}}static async makeClaimAllInstructionSimple({connection:J,poolInfos:$,ownerInfo:H,makeTxVersion:Q,lookupTableCache:W}){const Z=[],Y=[],z=[],j=[],V=[],U=[],C=[],q={};for(let K of $){const w=[];for(let O of K.tokenInfo){const h=q[O.mintAddress.toString()]??await this._selectOrCreateTokenAccount({programId:O.programId,mint:O.mintAddress,tokenAccounts:O.mintAddress.equals(r.WSOL.mint)?[]:H.tokenAccounts,owner:H.wallet,createInfo:{connection:J,payer:H.wallet,amount:0,frontInstructions:Z,endInstructions:O.mintAddress.equals(r.WSOL.mint)?z:[],frontInstructionsType:Y,endInstructionsType:j,signers:C},associatedOnly:O.mintAddress.equals(r.WSOL.mint)?!1:H.associatedOnly,checkCreateATAOwner:H.checkCreateATAOwner});q[O.mintAddress.toString()]=h,w.push(h)}V.push(this.makeClaimInstruction({programId:K.programId,poolInfo:K,ownerInfo:{wallet:H.wallet,ownerPda:K.ownerAccountId,claimAddress:w}})),U.push($0.util1216OwnerClaim)}return{address:{},innerTransactions:await L0({connection:J,makeTxVersion:Q,computeBudgetConfig:void 0,payer:H.wallet,innerTransaction:[{instructionTypes:Y,instructions:Z,signers:C},{instructionTypes:U,instructions:V,signers:[]},{instructionTypes:j,instructions:z,signers:[]}],lookupTableCache:W})}}static makeClaimInstruction({programId:J,poolInfo:$,ownerInfo:H}){const Q=e([]),W=[{pubkey:H.wallet,isSigner:!0,isWritable:!0},{pubkey:$.poolId,isSigner:!1,isWritable:!0},{pubkey:H.ownerPda,isSigner:!1,isWritable:!0},...H.claimAddress.map((z)=>({pubkey:z,isSigner:!1,isWritable:!0})),...$.tokenInfo.map(({mintVault:z})=>({pubkey:z,isSigner:!1,isWritable:!0})),{pubkey:m,isSigner:!1,isWritable:!1}],Z=Buffer.alloc(Q.span);Q.encode({},Z);const Y=Buffer.from([10,66,208,184,161,6,191,98,...Z]);return new Sj({keys:W,programId:J,data:Y})}}ZW=r$;r$.CLAIMED_NUM=3;r$.POOL_LAYOUT=e([p0(8),o("bump"),o("status"),P("openTime"),P("endTime"),c("ammId"),z0(e([o("mintDecimals"),c("mintAddress"),c("mintVault"),P("perLpLoss"),P("totalClaimedAmount")]),ZW.CLAIMED_NUM,"tokenInfo"),z0(P(),10,"padding")]);r$.OWNER_LAYOUT=e([p0(8),o("bump"),o("version"),c("poolId"),c("owner"),P("lpAmount"),z0(e([c("mintAddress"),P("debtAmount"),P("claimedAmount")]),ZW.CLAIMED_NUM,"tokenInfo"),z0(P(),4,"padding")]);r$.DEFAULT_POOL_ID=["58oQChx4yWmvKdwLLZzBi4ChoCc2fqCUWBkwMihLYQo2","6UmmUiYoBjSrhakAobJw8BvkmJtDVxaeBtbt7rxWo1mg","AVs9TA4nWDzfPJE9gGVNJMVhcQy3V9PGazuz33BfG2RA","DVa7Qmb5ct9RCpaU7UTpSaf3GVMYz17vNVU67XpdCRut","7XawhbbxtsRcQA8KTkHT9f9nc6d69UwqCDh6U5EEbEmX","6a1CsrpeZubDjEJE9s1CMVheB6HWM5d7m1cj2jkhyXhj","EoNrn8iUhwgJySD1pHu8Qxm5gSQqLK3za4m8xzD2RuEb","AceAyRTWt4PyB2pHqf2qhDgNZDtKVNaxgL8Ru3V4aN1P","6tmFJbMk5yVHFcFy7X2K8RwHjKLr6KVFLYXpgpBNeAxB"].map((J)=>new Ej(J));r$.SEED_CONFIG={pool:{id:Buffer.from("pool_seed","utf8")},owner:{id:Buffer.from("user_claim_seed","utf8")}};r$.VERSION_PROJECT=[void 0,"Francium","Tulip","Larix"];var eY={id:"73hB2xN1R7Q47xyTBzQJMRMDvjGjetBc6AaDvYaE85hD",baseMint:"AmghZTmRCWooJS8wHodqGcZnLzvxgsdegmF3GCTb7YQw",quoteMint:"So11111111111111111111111111111111111111112",lpMint:"AxQ1wYZqkfBvoRyaMby1gLs2xwxc2dv6YXJ2vyHfXKW7",baseDecimals:8,quoteDecimals:9,lpDecimals:8,version:4,programId:"675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8",authority:"5Q544fKrFoe6tsEbD7S8EmxGTJYAKtTVhAW5Q5pge4j1",openOrders:"CBJYgSfKLu81VrxzKU9MNJ1PXuoXp4fDUGmwEszS9PUA",targetOrders:"69pr6RJeoqCCt3eqbUM4mCCA38awL9etaSsjgxRu3PMH",baseVault:"9hQmiGtVJLUQLfRVyraDRBroZyVFR4qz6Jym5LNyWZji",quoteVault:"AcjfNpuWboWv32mUfTyhQBvqiSqDuL5GBrRw3roX1nA5",withdrawQueue:"11111111111111111111111111111111",lpVault:"11111111111111111111111111111111",marketVersion:4,marketProgramId:"srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX",marketId:"D6Xh8GK9u8B8cYNLiCwiiLaPFrj3aSxc4XodVxebNtbv",marketAuthority:"7EDQCDrgLw6utkCabGcjBCcziLqb1S6UF7DABceGBVad",marketBaseVault:"5uiyywWfSS1BZnS87gHu3ad3VrAUa719bKkgTcCnaxxJ",marketQuoteVault:"EbLcv9Up4hy49FXfXuJiGLHjLV7iqS78goYv2EuS77FN",marketBids:"3WaYqHbXAAdAjjpW5SZ9D4Tkai1Qyy5gnFmtT4c1LDvS",marketAsks:"6h9qh3aCPzgLTawXP3gJ8tnnZt5K3mLwGMMy696sqtoT",marketEventQueue:"ADNssU3T9MUsDbsrE6jSqwb1qJV1JXYh9vnDNtTahigP",lookupTableAccount:"J3WPh5nvxYDucBgw1n9HvJXwsJDcZwZMtyWPHbnpWXYQ"};import{SystemProgram as _j,Transaction as Pj} from"@solana/web3.js";function C8(J,$){let{quoteMint:H,baseMint:Q,quoteDecimals:W,baseDecimals:Z}=J;if($==="out")H=J.baseMint,Q=J.quoteMint,W=J.baseDecimals,Z=J.quoteDecimals;let Y=new r(J.marketProgramId,H,W),z=new r(J.marketProgramId,Q,Z);return{currencyIn:Y,currencyOut:z,currencyInDecimals:W,currencyOutDecimals:Z,currencyInMint:H,currencyOutMint:Q}}function bj(J,$,H,Q){const{currencyIn:W,currencyOut:Z,currencyInDecimals:Y}=C8($,"out");let z=new O0(W,1,!1);const j=new uJ(0,100),{amountOut:V}=S$.computeAmountOut({poolKeys:$,poolInfo:H,amountIn:z,currencyOut:Z,slippage:j}),U=Q*Math.pow(10,Y+1)/V.numerator.toNumber();return console.log("actualRawAmount",U),U}async function tY(J,$,H,Q){const W=await S$.fetchInfo({connection:J,poolKeys:$});let Z=H;if(Q==="out")Z=bj(J,$,W,H);const{currencyIn:Y,currencyOut:z}=C8($,Q);let j=new O0(Y,Z,!1);const V=new uJ(0,100),{amountOut:U}=S$.computeAmountOut({poolKeys:$,poolInfo:W,amountIn:j,currencyOut:z,slippage:V});return{amountIn:j,amountOut:U}}async function oY(J,$,H){const Q=kQ($,H);let W;try{await xW(J,Q)}catch(Z){if(Z instanceof HH||Z instanceof QH)W=TQ(H,Q,H,$);else throw Z}return W}async function x7(J,$,H,Q){try{const W=new Pj,Z=await J.getLatestBlockhash();W.recentBlockhash=Z.blockhash,W.lastValidBlockHeight=Z.lastValidBlockHeight;const{currencyInMint:Y,currencyOutMint:z,currencyInDecimals:j,currencyOutDecimals:V}=C8(XQ,Q),U=await oY(J,Y,$.publicKey);if(U)W.add(U);const C=await oY(J,z,$.publicKey);if(C)W.add(C);const q=new r(XQ.marketProgramId,Y,j),K=new r(XQ.marketProgramId,z,V),{amountIn:w,amountOut:O}=await tY(J,XQ,H,Q),h=kQ(Y,$.publicKey),b=kQ(z,$.publicKey);if(Q==="in"){const k=_j.transfer({fromPubkey:$.publicKey,toPubkey:h,lamports:w.numerator.toNumber()});W.add(k);const g=aW(h);W.add(g)}const N=await S$.makeSwapInstruction({poolKeys:XQ,amountIn:w.numerator.toNumber(),amountOut:O.numerator.toNumber(),userKeys:{owner:$.publicKey,tokenAccountIn:h,tokenAccountOut:b},fixedSide:"in"});W.add(...N.innerTransaction.instructions);const x=_Q(Q==="in"?h:b,$.publicKey,$.publicKey);if(W.add(x),W.instructions.length===0){console.log("no instruction");return}return console.log("Sending..."),J.sendTransaction(W,[$])}catch(W){const Z=W.logs?.filter((Y)=>Y.includes("Error:"))[0];console.error("error:",Z||W.message)}}var XQ=wH(eY);export{x7 as SwapRaydiumLp};
